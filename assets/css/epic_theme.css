@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Lora:ital,wght@0,400;0,700;1,400&display=swap');

:root {
    --epic-purple-emperor: #4A0D67;
    --epic-purple-emperor-rgb: 74, 13, 103;
    --epic-gold-main: #FFD700;
    --epic-gold-main-rgb: 255, 215, 0;
    --epic-gold-secondary: #B8860B;
    --epic-gold-secondary-rgb: 184, 134, 11;
    --epic-alabaster-bg: #EAEBF0; /* Cool greyish-white */
    --epic-alabaster-bg-rgb: 234, 235, 240; /* RGB for the new color */
    --epic-alabaster-medium: #D8D9E0; /* Derived from new --epic-alabaster-bg */
    --epic-alabaster-medium-rgb: 216, 217, 224; /* RGB for new medium alabaster */
    --epic-text-color: #2c1d12;
    --epic-text-color-rgb: 44, 29, 18;
    --epic-text-light: #EAE0C8;
    --epic-text-light-rgb: 234, 224, 208;

    --epic-transparent-overlay-dark: rgba(var(--epic-purple-emperor-rgb), 0.65);
    --epic-transparent-overlay-medium: rgba(var(--epic-purple-emperor-rgb), 0.45);
    --epic-transparent-overlay-light: rgba(var(--epic-alabaster-medium-rgb), 0.85);
    --epic-transparent-black-overlay: rgba(10, 10, 10, 0.75);

    --font-primary: 'Lora', serif;
    --font-headings: 'Cinzel', serif;

    --global-border-radius: 8px;
    --global-transition-speed: 0.3s;
    --global-box-shadow-light: 0 2px 8px rgba(var(--epic-text-color-rgb), 0.1);
    --global-box-shadow-medium: 0 5px 15px rgba(var(--epic-text-color-rgb), 0.15);
    --global-box-shadow-dark: 0 8px 25px rgba(var(--epic-text-color-rgb), 0.2);
    --alabaster-background-image: url('/assets/img/alabastro.jpg');

    /* Form Validation & Message Colors */
    --epic-error-red: #D32F2F;
    --epic-error-red-rgb: 211, 47, 47;
    --epic-success-color: var(--epic-gold-secondary);
    --epic-success-color-rgb: var(--epic-gold-secondary-rgb);
    --spacing-m: 1em; /* Define spacing variable for consistency */
}

/* --- Global Reset & Box Sizing --- */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 100%;
    scroll-behavior: smooth;
}

/* --- Body Styling --- */
body {
    font-family: var(--font-primary);
    color: var(--epic-text-color);
    background-image: var(--alabaster-background-image);
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed; /* For parallax-like effect */
    background-position: center center;
    background-color: var(--epic-alabaster-bg); /* Fallback color */
    filter: grayscale(70%) brightness(110%) contrast(105%); /* Cooler, greyish tone for alabastro.jpg */
    line-height: 1.7;
    text-align: left; /* Default text alignment */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    animation: fadeInPage 0.7s ease-out forwards;
}

@keyframes fadeInPage {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Headings --- */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headings);
    color: var(--epic-purple-emperor);
    margin-top: 1.5em;
    margin-bottom: 0.8em;
    line-height: 1.3;
    font-weight: 700;
    text-wrap: balance; /* Improves text wrapping for titles */
}

h1 { font-size: clamp(2.8em, 6vw, 4.2em); }
h2 { font-size: clamp(2.2em, 5vw, 3.2em); color: var(--epic-gold-secondary); } /* Secondary gold for H2 for variety */
h3 { font-size: clamp(1.8em, 4vw, 2.5em); }
h4 { font-size: clamp(1.4em, 3.5vw, 2em); }
h5 { font-size: clamp(1.2em, 3vw, 1.7em); }
h6 { font-size: clamp(1em, 2.5vw, 1.4em); }

/* --- Paragraphs --- */
p {
    margin-bottom: 1.25em; /* Adjusted margin */
    max-width: 70ch; /* Limit width for readability, even if centered */
    /* margin-left: auto; and margin-right: auto; removed for default left align */
    text-shadow: 0 1px 2px rgba(var(--epic-alabaster-medium-rgb), 0.4); /* Subtle shadow for depth/readability */
}

/* --- Links --- */
a {
    color: var(--epic-gold-main);
    text-decoration: none;
    transition: color var(--global-transition-speed) ease-in-out, opacity var(--global-transition-speed) ease-in-out, letter-spacing var(--global-transition-speed) ease-in-out;
}

a:hover,
a:focus-visible {
    color: var(--epic-gold-secondary);
    opacity: 0.85;
    text-decoration: underline;
    letter-spacing: 0.25px;
}
a:focus-visible {
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* --- Lists --- */
ul, ol {
    margin-bottom: 1.5em;
    padding-left: 1.5em; /* Standard padding for lists */
    list-style-position: outside; /* Standard marker position */
}

li {
    margin-bottom: 0.5em;
}

/* --- Images --- */
img {
    max-width: 100%;
    height: auto;
    display: block; /* Allows centering with margin auto */
    margin-left: auto;
    margin-right: auto;
    border-radius: var(--global-border-radius);
    margin-top: 1em;
    margin-bottom: 1em;
    transition: opacity 0.5s ease-in-out; /* General fade for images */
}

img.lazy-loaded-fade-in {
    opacity: 0;
}
img.lazy-loaded-fade-in.loaded {
    opacity: 1;
}

/* --- Tables --- */
table {
    width: 100%; /* Or a specific width like 80% and margin auto */
    margin: 2em auto;
    border-collapse: collapse;
    border: 1px solid var(--epic-purple-emperor);
    /* text-align: center; for td/th will be inherited or can be set explicitly */
}

th, td {
    border: 1px solid var(--epic-purple-emperor);
    padding: 0.75em 1em;
    /* text-align: center; is inherited from body */
}

th {
    background-color: var(--epic-transparent-overlay-medium); /* Purple transparent */
    color: var(--epic-text-light);
    font-family: var(--font-headings);
}

/* --- Basic Container (optional, can be expanded later) --- */
.container-epic {
    width: 90%;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    padding: clamp(1.5em, 3vw, 2.5em); /* Adjusted padding */
}

/* --- Helper class for forced left alignment if needed --- */
.text-left-override {
    text-align: left !important;
}
.text-left-override p,
.text-left-override li,
.text-left-override td,
.text-left-override div { /* Add other elements as needed */
    text-align: left !important;
    margin-left: 0; /* Reset margin-left for these cases if they used auto */
    margin-right: 0; /* Reset margin-right for these cases if they used auto */
}

/* --- Helper class for forced right alignment if needed --- */
.text-right-override {
    text-align: right !important;
}
.text-right-override p,
.text-right-override li,
.text-right-override td,
.text-right-override div {
    text-align: right !important;
    margin-left: 0;
    margin-right: 0;
}

/* --- Sidebar Navigation (#sidebar, #sidebar-toggle from _header.html) --- */
#sidebar {
    position: fixed;
    top: 0;
    left: -280px; /* Initial hidden state */
    width: 280px;
    height: 100vh;
    background-color: var(--epic-transparent-overlay-dark); /* Purple with transparency */
    backdrop-filter: blur(5px); /* Optional: frosted glass effect */
    padding: 25px 15px; /* Refined padding */
    box-shadow: 3px 0 15px rgba(var(--epic-text-color-rgb), 0.25);
    transition: left var(--global-transition-speed) ease-in-out;
    overflow-y: auto;
    z-index: 1001; /* High z-index */
    display: flex;
    flex-direction: column;
    border-right: 2px solid var(--epic-gold-secondary);
}

#sidebar.sidebar-visible {
    left: 0;
}

#sidebar-toggle {
    position: fixed;
    top: 15px;
    left: 15px;
    /* font-size: 1.8em; Removed as icon is no longer text */
    background-color: var(--epic-purple-emperor);
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    padding: 10px; /* Adjusted padding for icon */
    cursor: pointer;
    z-index: 1002; /* Above sidebar */
    transition: left var(--global-transition-speed) ease-in-out, background-color var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
    display: flex; /* For centering bars if needed, or for layout of bars */
    flex-direction: column;
    justify-content: space-around;
    width: 44px; /* Fixed width for consistency */
    height: 44px; /* Fixed height for consistency */
}

#sidebar-toggle .bar {
    display: block;
    width: 22px;
    height: 3px;
    background-color: var(--epic-gold-main); /* Default bar color */
    margin: 2px auto; /* Adjusted margin for tighter packing, auto for horizontal centering */
    transition: all 0.3s ease-in-out;
    border-radius: 1px;
}

#sidebar-toggle:hover .bar {
    background-color: var(--epic-purple-emperor); /* Bars turn purple when button is hovered (gold bg) */
}

#sidebar-toggle:hover {
    background-color: var(--epic-gold-main);
    /* color: var(--epic-purple-emperor); No longer needed for text icon */
}

/* Adjust toggle button position and icon animation when sidebar is visible */
body.sidebar-active #sidebar-toggle {
    left: 300px; /* sidebar width + desired offset */
}

body.sidebar-active #sidebar-toggle .bar:nth-child(1) {
    transform: translateY(7px) rotate(45deg); /* height (3px) + margin (4px from example, using 2px*2=4 + 3/2 for center = ~7) */
}
body.sidebar-active #sidebar-toggle .bar:nth-child(2) {
    opacity: 0;
}
body.sidebar-active #sidebar-toggle .bar:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
}

/* Ensure bars maintain correct color on hover when active (X shape) */
body.sidebar-active #sidebar-toggle:hover .bar {
    background-color: var(--epic-purple-emperor); /* Or whatever the X color should be on hover */
}


#sidebar .logo-link {
    display: block;
    /* text-align: center; */
    margin-bottom: 30px; /* Refined margin */
    padding: 10px 0;
}

#sidebar .logo-image {
    max-width: 80%;
    height: auto;
    border-radius: var(--global-border-radius);
    margin: 0 auto; /* Centering already handled by parent text-align and block display */
    border: 3px solid var(--epic-gold-secondary);
    background-color: var(--epic-alabaster-bg); /* Alabaster background for logo */
}

#sidebar .nav-links { /* Uses existing .nav-links class */
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Align items to the start for left text align */
    width: 100%;
}

#sidebar .nav-links li {
    width: 100%;
    margin-bottom: 8px;
}

#sidebar .nav-links a {
    display: block;
    padding: 12px 15px;
    color: var(--epic-text-light); /* Light text for dark sidebar */
    font-family: var(--font-headings);
    font-size: 1.1em;
    font-weight: 600;
    text-decoration: none;
    border-radius: var(--global-border-radius);
    transition: background-color var(--global-transition-speed) ease-in-out, color var(--global-transition-speed) ease-in-out, padding-left var(--global-transition-speed) ease-in-out;
    text-align: left; /* Explicitly left align sidebar links */
}

#sidebar .nav-links a:hover,
#sidebar .nav-links a:focus-visible,
#sidebar .nav-links a.active-link { /* active-link might need JS to set based on current page */
    background-color: var(--epic-gold-main);
    color: var(--epic-purple-emperor);
    padding-left: 25px; /* Indent on hover/active */
    outline: none;
}

#sidebar .nav-links a i { /* FontAwesome icons */
    margin-right: 10px;
    font-size: 1.1em;
    width: 20px; /* For alignment */
    text-align: center;
}

/* Main content adjustment when sidebar is active */
body.sidebar-active {
    margin-left: 280px; /* Match sidebar width */
    transition: margin-left var(--global-transition-speed) ease-in-out;
}

/* Hide standard navbar and its toggle if sidebar is the primary mobile nav */
@media (max-width: 768px) {
    .navbar .nav-toggle, /* Standard navbar toggle */
    .navbar .nav-links { /* Standard navbar links container */
        /* display: none !important; /* Assuming sidebar takes over */
    }
    /* If sidebar overlaps on mobile instead of pushing content */
    /* body.sidebar-active { margin-left: 0; } */
}


/* --- Footer Styling (.footer from _footer.html) --- */
.footer {
    background-color: var(--epic-purple-emperor);
    color: var(--epic-text-light);
    padding: 3em 1em 2em 1em; /* More padding */
    text-align: center; /* Footer content should generally be centered */
    border-top: 8px solid var(--epic-gold-main);
    position: relative;
    margin-top: 2em; /* Space above footer */
}

.footer::before { /* Optional decorative element */
    content: '';
    display: block;
    width: 60px;
    height: 60px;
    background-image: url('/assets/img/estrella.png'); /* Re-use existing star if appropriate */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: -60px auto 20px auto; /* Position it above the footer */
    position: relative;
    opacity: 0.5;
    filter: drop-shadow(0 0 5px var(--epic-gold-main));
}

.footer p {
    margin-bottom: 0.8em;
    font-size: clamp(0.9em, 1.8vw, 1em);
    color: var(--epic-alabaster-medium);
    text-align: center; /* Ensure paragraphs in footer remain centered */
}

.footer a {
    color: var(--epic-gold-main);
}
.footer a:hover, .footer a:focus-visible {
    color: var(--epic-alabaster-bg); /* Brighter gold on hover */
    text-decoration: underline;
}

.footer .social-links {
    margin-top: 1.5em;
}

.footer .social-links a {
    font-size: 1.8em; /* Larger icons */
    color: var(--epic-gold-secondary);
    margin: 0 12px;
    display: inline-block;
    transition: transform var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
}

.footer .social-links a:hover, .footer .social-links a:focus-visible {
    color: var(--epic-gold-main);
    transform: scale(1.2);
}

/* Style for social links that are placeholders (e.g., href="#") */
.footer .social-links a[href="#"] {
    opacity: 0.4;
    pointer-events: none; /* Make them non-interactive */
    filter: grayscale(90%);
    cursor: default;
}
.footer .social-links a[href="#"]:hover { /* Override hover effect for disabled links */
    transform: none;
    color: var(--epic-gold-secondary); /* Keep original color or a muted one */
}


/* --- Hero Sections (.hero, .page-header) --- */
.hero, .page-header {
    position: relative;
    width: 100%;
    background-size: cover;
    background-position: center center;
    display: flex; /* For centering content */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--epic-text-light); /* Light text for dark backgrounds */
    text-align: center; /* Hero section text should be centered */
    padding: clamp(3em, 10vh, 6em) 1em;
    border-bottom: 10px solid var(--epic-gold-main);
    overflow: hidden; /* Contain pseudo-elements */
    min-height: 50vh; /* Default min height for page headers */
}
/* Default background if no inline style is set - a purple gradient */
.hero, .page-header {
    background-image: linear-gradient(var(--epic-transparent-overlay-dark), var(--epic-transparent-black-overlay));
    background-color: var(--epic-purple-emperor); /* Fallback */
}

/* Specific hero for homepage */
.hero { /* This class is often used for the main homepage banner */
    min-height: 80vh; /* Taller for homepage hero */
}


/* Overlay for all hero/page-header sections to ensure text readability */
.hero::before, .page-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--epic-transparent-overlay-dark); /* Default dark purple overlay */
    z-index: 1; /* Below content, above background image */
}
/* If a specific background image is set via inline style, this ensures the overlay is still there */
[style*="background-image"]::before {
    background-color: var(--epic-transparent-overlay-dark); /* Ensure consistency */
}


.hero-content, .page-header .hero-content { /* .hero-content is a common inner wrapper */
    position: relative;
    z-index: 2; /* Above the overlay */
    max-width: 900px;
    background-color: var(--epic-transparent-black-overlay); /* Semi-transparent black for content box */
    padding: clamp(1.5em, 5vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-dark);
    border: 2px solid var(--epic-gold-secondary);
    text-align: center; /* Content within hero-content should be centered */
}

.hero-content h1, .page-header .hero-content h1 {
    font-size: clamp(2.5em, 7vw, 4.5em); /* Larger for hero titles */
    color: var(--epic-gold-main); /* Gold for main hero titles */
    text-shadow: 2px 2px 5px rgba(var(--epic-text-color-rgb), 0.7);
    margin-top: 0;
    margin-bottom: 0.4em;
}

.hero-content p, .page-header .hero-content p { /* Subtitles in hero */
    font-size: clamp(1.1em, 2.5vw, 1.5em);
    color: var(--epic-alabaster-bg);
    max-width: 65ch;
    margin: 0 auto 1em auto; /* Centering handled by parent */
    line-height: 1.6;
}

.hero-escudo { /* Specific to index.html hero */
    width: clamp(150px, 25vw, 220px);
    height: auto;
    margin-bottom: 1.5em; /* text-align:center on parent centers it */
    border: 5px solid var(--epic-gold-main);
    padding: 8px;
    background-color: var(--epic-transparent-overlay-dark);
    box-shadow: 0 0 20px var(--epic-gold-main), inset 0 0 15px rgba(var(--epic-text-color-rgb),0.4);
}

.cta-button { /* Call to Action button styling */
    display: inline-block;
    background-image: linear-gradient(145deg, var(--epic-gold-main), var(--epic-gold-secondary) 70%);
    color: var(--epic-purple-emperor);
    padding: clamp(1em, 2vh, 1.2em) clamp(2em, 4vw, 3em);
    font-size: clamp(1.1em, 2.5vw, 1.4em);
    font-family: var(--font-headings);
    font-weight: 700;
    border-radius: 50px; /* Pill shape */
    border: 2px solid var(--epic-purple-emperor);
    box-shadow: var(--global-box-shadow-medium), inset 0 -3px 5px rgba(var(--epic-text-color-rgb), 0.2);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--global-transition-speed) ease-in-out;
    margin-top: 1em;
}

.cta-button:hover, .cta-button:focus-visible {
    background-image: linear-gradient(145deg, var(--epic-purple-emperor), #380A54); /* Darker purple */
    color: var(--epic-gold-main);
    border-color: var(--epic-gold-main);
    transform: translateY(-3px) scale(1.03);
    box-shadow: var(--global-box-shadow-dark), inset 0 -2px 3px rgba(var(--epic-text-color-rgb), 0.1);
    outline: none;
}


/* --- Content Sections (.section, .page-content-block) --- */
.section {
    padding: clamp(3em, 8vh, 5em) 0;
    position: relative;
    background-image: var(--alabaster-background-image); /* Default alabaster texture for sections */
    background-size: cover;
    background-position: center center;
    background-attachment: local; /* Parallax within section, not fixed to viewport like body */
    z-index: 1;
    margin: 2em 0; /* Space between sections */
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-light);
    overflow: hidden; /* For pseudo-elements */
}

/* Dark overlay for sections with background images, to make content pop */
.section::before {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--epic-transparent-overlay-dark); /* Dark purple overlay */
    opacity: 0; /* Hidden by default, only show if .section has a specific bg image or class */
    transition: opacity var(--global-transition-speed) ease-out;
    z-index: 0;
    border-radius: inherit;
    pointer-events: none;
}
/* Activate overlay for sections that are likely to have a prominent background image */
.section.alternate-bg::before, /* Example class */
.section[style*="background-image"]::before { /* If section has inline background image */
    opacity: 1; /* Show the overlay */
}

/* Container within .section for actual content */
.section > .container-epic { /* Using the .container-epic defined in base styles */
    position: relative;
    z-index: 1; /* Above section's ::before overlay */
    background-color: var(--epic-transparent-overlay-light); /* Semi-transparent alabaster */
    backdrop-filter: blur(3px); /* Subtle blur for content background */
    padding: clamp(1.5em, 4vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    margin-top: 0; /* Reset if inside .section */
    margin-bottom: 0; /* Reset if inside .section */
}

.page-content-block { /* .page-content-block is another common content wrapper */
    position: relative;
    z-index: 1; /* Above section's ::before overlay */
    background-color: var(--epic-transparent-overlay-light); /* Semi-transparent alabaster */
    backdrop-filter: blur(3px); /* Subtle blur for content background */
    padding: clamp(1.5em, 4vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    margin-top: 2em; /* General margin for page-content-block */
    margin-bottom: 2em; /* General margin for page-content-block */
}

/* If a section has a specific background and we want its content container to be more opaque */
.section.alternate-bg > .container-epic,
.section[style*="background-image"] > .container-epic,
.page-content-block.dark-bg-content { /* Add this class if page-content-block is on a dark page bg */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.92); /* More opaque alabaster */
    /* Margins are already set by the general .page-content-block or .section > .container-epic rules.
       If specific overrides are needed for .dark-bg-content, they can be added here.
       The previous change that added margins here might have been too specific.
       Keeping the margin declaration here if .page-content-block.dark-bg-content needs different margins
       than the general .page-content-block. For now, let's assume it inherits or we want the 2em.
       If the 2em from the previous step on this specific selector was intentional and different from the
       general .page-content-block, then it should be preserved.
       Re-evaluating: the previous step DID add 2em here. The new general rule for .page-content-block also adds 2em.
       So, it's redundant for .page-content-block.dark-bg-content to also have it if it's the same.
       Let's remove the specific margin from .page-content-block.dark-bg-content here,
       as it will inherit from the new general .page-content-block rule.
    */
}


.section-title { /* Title for a section */
    text-align: center; /* Section titles are usually centered */
    font-size: clamp(2em, 5vw, 3em);
    margin-bottom: 1.5em;
    color: var(--epic-purple-emperor);
}
.section-title::after { /* Decorative element after section titles */
    content: '';
    display: block;
    width: 50px;
    height: 50px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: 20px auto 40px auto;
    opacity: 0.8;
    filter: drop-shadow(0 0 8px var(--epic-gold-main));
}

/* --- Content from estilos.css Merged --- */

/*
   Variable Review Note: Variables from estilos.css like --color-primario-purpura,
   --color-secundario-dorado, etc., have been mapped to corresponding
   --epic-purple-emperor, --epic-gold-main/secondary etc. in the rules below where possible.
   Any unmapped variables from estilos.css that are critical for specific appended sections
   would need to be added to the :root definition in epic_theme.css.
   For now, :root from epic_theme.css is the primary source of variables.
*/

/* Global Resets and Base element styles from estilos.css were omitted as epic_theme.css covers them. */
/* Navbar styles from estilos.css were omitted as sidebar is used. */

/* --- Page Headers & Hero Sections (Styles from estilos.css, potentially conflicting/overlapping) --- */
/* The .page-header.hero rules from estilos.css are generally more specific due to image selectors or context. */
/* We assume epic_theme.css .hero and .page-header provide base styling, and these are overrides/extensions. */

.page-header.hero { /* This is a combined rule. epic_theme.css provides a base .page-header and .hero */
    /* Properties from estilos.css .page-header.hero */
    background-image:
        linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.8), rgba(var(--epic-text-color-rgb), 0.9)), /* Mapped to epic vars */
        url('/assets/img/hero_default_background.jpg');
    min-height: 45vh; /* This might override epic_theme.css min-height for .page-header */
    padding: clamp(60px, 15vh, 100px) 20px; /* This might override epic_theme.css padding for .page-header */
    border-bottom-width: 10px; /* This might override epic_theme.css border for .page-header */
    /* Other properties like color, text-align, display, justify-content, align-items are likely inherited or set by epic_theme.css base .hero/.page-header */
}
/* Specific background images from estilos.css page-headers. These are important. */
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"],
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"],
.page-header.hero[style*="/imagenes/hero_lugares_background.jpg"],
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"],
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"],
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"],
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"],
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"],
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"],
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] {
    /* No specific rules here, but the selectors imply these background images are set via inline styles */
}

.page-header.hero .hero-content { /* Compare with .hero-content in epic_theme.css */
    padding: clamp(25px, 4vw, 45px);
    background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.7);
}
.page-header.hero .hero-content h1 {
    font-size: clamp(2.5em, 6vw, 4em);
    margin-bottom: 0.3em;
}
.page-header.hero .hero-content p {
    font-size: clamp(1.05em, 2.2vw, 1.4em);
    margin-bottom: 0;
    color: var(--color-piedra-clara, #EAE0C8); /* Mapped to epic_theme var if possible, or add as new */
    text-shadow: 0 1px 5px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.7);
}
.page-header.hero .decorative-star-header {
    width: clamp(50px, 8vw, 70px);
    height: auto;
    margin: 0 auto 15px auto;
    opacity: 0.8;
    filter: drop-shadow(0 0 10px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.5)); /* Mapped to epic_theme var */
}

.decorative-star-header-highlighted { /* Specific for Cerezo de Rio Tiron header star */
    filter: drop-shadow(0 0 12px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.75)) !important;
    width: clamp(60px, 10vw, 80px) !important;
    margin-bottom: 20px !important;
}


/* --- Hero Section (Página de Inicio from estilos.css) --- */
/* This .hero style is specifically for the homepage as per estilos.css.
   epic_theme.css also has a .hero style. We need to ensure they don't conflict badly,
   or that the homepage hero takes precedence if it's more specific. */
.hero { /* This rule might conflict with epic_theme.css .hero. Consider namespacing if needed. */
    background-image:
        linear-gradient(rgba(var(--color-primario-purpura-rgb, 74, 13, 103), 0.82), rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.95)),
        url('/assets/img/hero_mis_tierras.jpg');
    background-color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    /* other properties like background-size, position, color, padding, text-align, border-bottom, min-height, display, flex-direction, justify-content, align-items, position, overflow are likely similar or need careful merge */
}

/* .hero-content from estilos.css - compare with .hero-content in epic_theme.css */
/* Styles for .hero-escudo, .hero h1, .hero p, .cta-button from estilos.css are appended.
   These are specific to the homepage hero design in estilos.css. */

.hero-content { /* This rule for .hero-content from estilos.css might conflict */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px;
    max-width: 950px;
    background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.85);
    padding: clamp(40px, 7vw, 70px);
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: 0 15px 50px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.6);
    position: relative;
    z-index: 1;
    border: 3px solid rgba(var(--color-dorado-rgb, 184, 134, 11), 0.6); /* Mapped */
}

.hero-escudo { /* This is from estilos.css, specific to its hero */
    width: clamp(180px, 30vw, 280px);
    height: auto;
    margin-bottom: 30px;
    animation: fadeInScaleUp 1.4s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    filter: drop-shadow(0px 12px 28px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.8));
    border: 7px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding: 10px;
    background-color: rgba(var(--color-primario-purpura-rgb, 74, 13, 103), 0.65);
    box-shadow: 0 0 25px rgba(var(--color-secundario-dorado, #B8860B), 0.7), inset 0 0 18px rgba(var(--color-negro-contraste-rgb,10,10,10),0.5);
}

@keyframes fadeInScaleUp {
    from { opacity: 0; transform: scale(0.5) translateY(50px) rotate(-5deg); }
    to { opacity: 1; transform: scale(1) translateY(0) rotate(0deg); }
}

.hero h1 { /* From estilos.css, for homepage hero */
    font-size: clamp(3.2em, 10vw, 6em);
    color: var(--color-alabastro, #fdfaf6); /* Mapped, though epic_theme uses --epic-gold-main for hero h1 */
    margin-top: 0;
    margin-bottom: 0.5em;
    text-shadow: 0 5px 15px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 1), 0 0 50px rgba(var(--color-acento-amarillo, #FFD700),0.95);
    line-height: 1.1;
    text-align: center;
}

.hero p { /* From estilos.css, for homepage hero */
    font-size: clamp(1.25em, 3.5vw, 1.9em);
    margin-bottom: 55px;
    color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
    text-shadow: 0 3px 20px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 1);
    line-height: 1.75;
    max-width: 50ch;
    text-align: center;
}

/* .cta-button from estilos.css - epic_theme.css also has .cta-button. Review needed. */
/* Appending estilos.css version for now. */
.cta-button {
    background-image: linear-gradient(145deg, var(--color-acento-amarillo, #FFD700), var(--color-secundario-dorado, #B8860B) 70%);
    color: var(--color-primario-purpura, #4A0D67);
    padding: clamp(20px, 3vh, 26px) clamp(50px, 8vw, 65px);
    font-size: clamp(1.3em, 3.5vw, 1.7em);
    font-weight: 700;
    border-radius: 50px;
    border: 3px solid var(--color-primario-purpura, #4A0D67);
    box-shadow: 0 8px 25px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.4), inset 0 -4px 6px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.25);
    text-transform: uppercase;
    letter-spacing: 1.8px;
    transition: all var(--global-transition-speed) cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Standardized */
    display: inline-block;
}

.cta-button:hover, .cta-button:focus-visible {
    background-image: linear-gradient(145deg, var(--color-primario-purpura, #4A0D67), #380A54);
    color: var(--color-acento-amarillo, #FFD700);
    border-color: var(--color-acento-amarillo, #FFD700);
    transform: translateY(-6px) scale(1.08);
    box-shadow: 0 16px 40px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.5), inset 0 -2px 3px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.1);
    outline: none;
}

.cta-button-small {
    padding: clamp(12px, 2vh, 18px) clamp(25px, 5vw, 45px);
    font-size: clamp(0.9em, 2.2vw, 1.2em);
    letter-spacing: 1.2px;
}
.cta-button-small:hover, .cta-button-small:focus-visible {
    /* Inherits from .cta-button hover */
}


/* --- Sección de Video --- */
.video-section {
    padding: clamp(60px, 10vh, 80px) 0;
}
.video-container {
    max-width: 1100px;
    margin: 25px auto;
    border: 8px solid var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)), 0 0 30px rgba(var(--color-alabastro-glow-rgb, 248, 245, 238), 0.25); /* Mapped */
    aspect-ratio: 16 / 9;
    overflow: hidden;
}
.video-container iframe {
    width: 100%;
    height: 100%;
    display: block;
}
.video-section h2 {
     margin-bottom: 45px;
     color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}

/* --- Secciones Generales con Efecto de Linterna (Spotlight) --- */
/* epic_theme.css has .section and .section.spotlight-active::after.
   estilos.css also has .section, .section::before (dark overlay), and .section::after (spotlight).
   Strategy: Use epic_theme.css's spotlight implementation. Omit .section::after from estilos.css.
   The .section::before for dark overlay from estilos.css will be kept if it provides a different or complementary effect.
*/
.section { /* This rule from estilos.css might conflict with .section in epic_theme.css */
    /* padding, position, background-image, size, position, attachment, z-index, border-radius, margin, box-shadow, overflow are common properties. */
    /* epic_theme.css .section already provides robust base styling. */
    /* The ::before overlay from estilos.css is different (multiply blend mode) and could be kept if that specific effect is desired. */
    /* However, epic_theme.css .section::before already provides a dark overlay, controlled by opacity. */
    /* To avoid conflicting overlays, we will rely on epic_theme.css .section::before and its .section.alternate-bg::before logic. */
    /* So, the .section::before from estilos.css (with mix-blend-mode) is removed. */
}

/* Spotlight effect from estilos.css (.section::after) was OMITTED during initial append to prefer epic_theme.css version. */

/*
   Container class: estilos.css uses .container, epic_theme.css uses .container-epic.
   The rule .section > .container from estilos.css is specific.
   epic_theme.css has .section > .container-epic.
   If pages use <section><div class="container"> (from estilos.css pattern), that rule will apply.
   If pages use <section><div class="container-epic"> (from epic_theme.css pattern), that rule will apply.
   This is acceptable for now, as they style different class names.
*/
.section > .container { /* This is from estilos.css, for pages using <div class="container"> directly in a section */
    position: relative;
    z-index: 1; /* Ensure content is above section's ::before if any */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.9); /* Mapped to epic var */
    padding: 30px;
    border-radius: var(--global-border-radius); /* Mapped to epic var */
    box-shadow: 0 0 15px rgba(var(--epic-text-color-rgb), 0.1); /* Mapped to epic var */
}


/* SECCIÓN DE INTRODUCCIÓN DETALLADA y Bloques de Contenido de Página Interna */
/* .detailed-intro-section .container uses .container, so the rule above applies. */
/* .page-content-block is defined in both. epic_theme.css provides a base. Appended styles from estilos.css are more specific. */
.detailed-intro-section .container,
.page-content-block {
    /* epic_theme.css .page-content-block provides base: bg, backdrop-filter, padding, border-radius, box-shadow */
    /* estilos.css version adds more specific background and padding, potentially overriding epic_theme.css */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.96); /* Mapped & slightly more opaque */
    padding: clamp(30px, 5vw, 50px); /* Potentially different padding */
    border-radius: var(--global-border-radius); /* Mapped, should be consistent */
    box-shadow: var(--global-box-shadow-medium); /* Mapped, should be consistent */
    margin-top: 0;
    margin-bottom: 0;
}
.detailed-intro-section h2,
.page-content-block h2 {
    text-align: center;
    font-size: clamp(2.2em, 5.5vw, 3.2em);
    margin-bottom: 1.3em;
}
.detailed-intro-section p,
.page-content-block p {
    font-size: clamp(1.05em, 2.3vw, 1.2em);
    line-height: 1.85;
    /* text-align: center !important; */ /* Allowing left align from body now */
    margin-bottom: 1.6em;
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
}
.detailed-intro-section p:first-of-type,
.page-content-block .intro-paragraph {
    font-size: clamp(1.2em, 2.8vw, 1.4em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    font-style: italic;
    /* text-align: center; */ /* Allowing left align from body now, or specific centering if needed */
    border-left: 4px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    border-right: 4px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding: 0.7em 1.2em;
    background-color: rgba(var(--color-piedra-arena-rgb, 200, 187, 174), 0.15); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
}


.image-gallery-intro {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-top: 40px;
}
.image-gallery-intro img {
    border: 6px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); /* Mapped */
    transition: transform 0.4s ease-in-out, box-shadow 0.4s ease-in-out, filter 0.4s ease-in-out;
    margin: 0 auto;
}
.image-gallery-intro img:hover {
    transform: scale(1.08) rotate(-2deg);
    box-shadow: var(--global-box-shadow-dark); /* Consistent enhanced shadow */
    filter: sepia(50%) contrast(1.1) brightness(0.85);
}


.section.alternate-bg > .container::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 300px;
    height: 300px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transform: translate(-50%, -50%) rotate(15deg);
    z-index: -1;
    opacity: 0.06;
}


.section-title { /* epic_theme.css has .section-title too. Appending for now. */
    /* text-align: center; */ /* Already centered by previous rule */
    font-size: clamp(2.2em, 5.5vw, 3.2em);
    margin-bottom: 25px;
}

.section-title::after { /* epic_theme.css has .section-title::after too. Appending for now. */
    content: '';
    display: block;
    width: 55px;
    height: 55px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: 30px auto 60px auto;
    position: relative;
    animation: pulseStar 3.8s infinite ease-in-out;
    filter: drop-shadow(0 0 8px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.6)); /* Mapped */
}
@keyframes pulseStar {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
    50% { transform: scale(1.08) rotate(10deg); opacity: 1; }
}
<<<<<<< add-history-placeholders
/* --- Tarjetas (Cards) --- */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2em; /* Increased gap */
    margin-top: 2em;
}

.card {
    background-color: var(--epic-alabaster-bg);
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    overflow: hidden;
    transition: transform var(--global-transition-speed) ease-in-out, box-shadow var(--global-transition-speed) ease-in-out;
    display: flex;
    flex-direction: column; /* For footer button alignment */
    text-align: center; /* Card content often centered */
}

.card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: var(--global-box-shadow-dark);
    border-color: var(--epic-gold-main);
}

.card img {
    width: 100%;
    height: 200px; /* Fixed height for card images */
    object-fit: cover; /* Crop images to fit */
    border-bottom: 4px solid var(--epic-gold-main);
    margin: 0 0 1em 0; /* Remove image's own margins, add space below */
    border-radius: 0; /* Image takes top radius from card */
    filter: sepia(30%) contrast(1.1) brightness(0.9); /* Subtle epic filter */
    transition: filter var(--global-transition-speed) ease-in-out, transform var(--global-transition-speed) ease-in-out;
}
.card:hover img {
    filter: sepia(10%) contrast(1) brightness(1);
    transform: scale(1.05);
}

.card-content {
    padding: 1.5em;
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allows button to stick to bottom */
    /* text-align: center; is inherited */
}

.card-content h3 {
    font-size: clamp(1.3em, 3vw, 1.7em);
    margin-top: 0;
    margin-bottom: 0.7em;
    color: var(--epic-purple-emperor);
}
.card-content h3::before { /* Small star before card titles */
    content: '';
    display: inline-block;
    width: 12px;
    height: 12px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    margin-right: 8px;
    opacity: 0.7;
    vertical-align: middle;
}

.card-content p {
    font-size: clamp(0.95em, 2vw, 1.05em);
    line-height: 1.6;
    color: var(--epic-text-color);
    margin-bottom: 1.2em;
    flex-grow: 1; /* Pushes button down */
}

.card-content .read-more { /* Button inside card */
    background-color: transparent;
    color: var(--epic-gold-secondary);
    border: 2px solid var(--epic-gold-secondary);
    padding: 0.6em 1.2em;
    font-size: 0.9em;
    font-weight: 700;
    font-family: var(--font-headings);
    text-transform: uppercase;
    border-radius: 20px;
    align-self: center; /* Center button */
    margin-top: auto; /* Stick to bottom */
    transition: background-color var(--global-transition-speed) ease-in-out, color var(--global-transition-speed) ease-in-out;
}

.card-content .read-more:hover, .card-content .read-more:focus-visible {
    background-color: var(--epic-gold-secondary);
    color: var(--epic-alabaster-bg); /* Light text on gold bg */
    text-decoration: none;
    outline: none;
}

/* --- Content from estilos.css Merged --- */
=======


/* --- Tarjetas (Cards) --- */
/* The simpler .card style from epic_theme.css base has been removed.
   The following is the prioritized "creative" card style, with refinements. */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Kept from creative version */
    gap: 40px; /* Kept from creative version */
    margin-top: 2em; /* From simpler version, good spacing */
}

.card {
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Using mapped var, consider --epic-alabaster-bg */
    border: 2px solid var(--color-piedra-media, #D2B48C); /* Mapped, consider --epic-gold-secondary */
    border-radius: var(--global-border-radius); /* Standardized to 8px */
    box-shadow: 8px 8px 0px -2px var(--color-piedra-media, #D2B48C), 16px 16px 28px rgba(var(--color-morado-emperador-rgb, 74, 13, 103), 0.18); /* Mapped */
    overflow: hidden; /* Essential */
    transition: transform var(--global-transition-speed) ease, box-shadow var(--global-transition-speed) ease, border-color var(--global-transition-speed) ease; /* Standardized speed, added border-color */
    position: relative; /* Essential for pseudo-elements */
    z-index: 1; /* For stacking context if needed with pseudo-elements */
    display: flex;
    flex-direction: column;
    text-align: center; /* Added for card content centering */
}

.card:hover {
    transform: translateY(-18px) translateX(-9px) rotate(1.5deg); /* Creative hover transform */
    box-shadow: 12px 12px 0px -2px var(--color-secundario-dorado, #B8860B), 22px 22px 35px rgba(var(--color-morado-emperador-rgb, 74, 13, 103), 0.25); /* Mapped */
    border-color: var(--epic-gold-main); /* Enhanced border pop on hover */
}

.card img {
    border-bottom: 6px solid var(--color-secundario-dorado, #B8860B); /* Mapped, consider --epic-gold-main */
    /* border-radius for image adjusted to fit card's new global radius */
    border-radius: 0; /* Top corners will be clipped by card's overflow:hidden and border-radius */
    filter: grayscale(70%) sepia(40%) contrast(1.1) brightness(0.85);
    transition: transform var(--global-transition-speed) cubic-bezier(0.165, 0.84, 0.44, 1), filter var(--global-transition-speed) ease-out; /* Standardized speed */
    margin: 0; /* Remove default image margins */
    width: 100%;
    height: 200px; /* Retain fixed height for consistency */
    object-fit: cover; /* Retain object-fit */
}

.card:hover img {
    transform: scale(1.15); /* Existing image zoom */
    filter: grayscale(0%) sepia(0%) contrast(1.05) brightness(1.05) saturate(1.1); /* Enhanced color pop */
}

.card-content {
    padding: 30px; /* Kept from creative version */
    /* text-align: center; */ /* Inherited from .card */
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.card-content h3::before {
    content: '';
    display: inline-block;
    width: 14px;
    height: 14px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 10px;
    vertical-align: middle;
    opacity: 0.75;
    transform: translateY(-2px) rotate(-12deg);
}


.card-content h3 { /* epic_theme.css has .card-content h3. Appending. */
    font-size: clamp(1.4em, 3vw, 1.8em);
    margin-bottom: 15px;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}

.card-content p { /* epic_theme.css has .card-content p. Appending. */
    font-size: clamp(1em, 2vw, 1.05em);
    line-height: 1.7;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped to --epic-text-color or similar */
    /* text-align: center; */ /* Inherits from .card-content */
    margin-bottom: 1.5em;
    flex-grow: 1;
}

.card-content .read-more { /* epic_theme.css has .card-content .read-more. Appending. */
    background-color: transparent;
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    border: 2px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding: 10px 20px;
    font-size: 0.9em;
    font-weight: 700;
    margin-top: auto;
    align-self: center;
    text-decoration: none;
}
.card-content .read-more:hover, .card-content .read-more:focus-visible {
    background-color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    text-decoration: none;
    outline: none;
}

/* --- View Switcher Buttons --- */
.view-switch-controls {
    text-align: center;
    margin-bottom: 20px;
    padding-top: 20px;
}

.view-switch-button {
    padding: 0.8em 1.5em;
    font-size: clamp(1em, 2.2vw, 1.2em);
    margin: 5px;
    letter-spacing: 0.5px;
    border-width: 2px;
}

.view-switch-button:disabled {
    background-image: none;
    background-color: var(--epic-alabaster-medium);
    color: var(--epic-text-color);
    opacity: 0.6;
    cursor: not-allowed;
    border-color: var(--epic-alabaster-medium);
    transform: none;
    box-shadow: var(--global-box-shadow-light);
}

/* Initial hidden state for 3D museum */
#museo-3d-section {
    display: none;
}
>>>>>>> main

/* --- Sección de Inmersión --- */
.immersion-section {
