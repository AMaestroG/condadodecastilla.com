
:root {
    --epic-error-red: #D9534F; /* Default error red */
    --epic-purple-emperor: #4A0D67;
    --epic-purple-emperor-rgb: 74, 13, 103;
    --epic-gold-main: #CFB53B; /* Old gold tone */
    --epic-gold-main-rgb: 207, 181, 59;
    --epic-gold-secondary: #9A6700;
    --epic-gold-secondary-rgb: 154, 103, 0;
    --epic-alabaster-bg: #fdfaf6; /* Alabaster white page background */
    --epic-alabaster-bg-rgb: 253, 250, 246;
    --epic-alabaster-medium: var(--epic-purple-emperor); /* Maintain purple tone */
    --epic-alabaster-medium-rgb: var(--epic-purple-emperor-rgb);
    --epic-text-color: #2c1d12;
    --epic-text-color-rgb: 44, 29, 18;
    --epic-text-light: #EAE0C8;
    --epic-text-light-rgb: 234, 224, 208;
    /* Legacy color palette names */
    --color-acento-amarillo: var(--epic-gold-main);
    --color-acento-amarillo-rgb: var(--epic-gold-main-rgb);
    --color-piedra-clara: var(--epic-text-light);
    --color-piedra-clara-rgb: var(--epic-text-light-rgb);
    --color-piedra-media: #D2B48C;
    --color-piedra-media-rgb: 210, 180, 140;
    --color-texto-principal: var(--epic-text-color);
    --color-texto-principal-rgb: var(--epic-text-color-rgb);
    --color-fondo-pagina: var(--epic-alabaster-bg);
    --color-fondo-pagina-rgb: var(--epic-alabaster-bg-rgb);
    --color-negro-contraste: #1A1A1A;
    --color-negro-contraste-rgb: 26, 26, 26;

    /* Use alabaster tones for all overlay backgrounds */
    --epic-transparent-overlay-dark: rgba(var(--epic-alabaster-bg-rgb), 0.95);
    /* Unified 5% transparency across overlays */
    --epic-transparent-overlay-medium: rgba(var(--epic-alabaster-bg-rgb), 0.95);
    --epic-transparent-overlay-light: rgba(var(--epic-alabaster-bg-rgb), 0.95);
    --epic-transparent-black-overlay: rgba(10, 10, 10, 0.75);

    --font-primary: 'Lora', serif;
    --font-headings: 'Cinzel', serif;

    --global-border-radius: 8px;
    --global-transition-speed: 0.3s;
    --global-box-shadow-light: 0 2px 8px rgba(var(--epic-text-color-rgb), 0.1);
    --global-box-shadow-medium: 0 5px 15px rgba(var(--epic-text-color-rgb), 0.15);
    --global-box-shadow-dark: 0 8px 25px rgba(var(--epic-text-color-rgb), 0.2);
    --alabaster-background-image: url('/assets/img/alabastro.jpg');
    --menu-extra-offset: 60px;
    --header-footer-height: 60px;
    /* Altura reservada para la barra de idiomas superior (no usada en el panel lateral) */
    --language-bar-height: 40px;
    /* Espacio superior aplicado al menú, ajustado dinámicamente */
    --language-bar-offset: 0px;
    /* Additional theme variables for admin dashboard */
    --epic-purple-hover: #663399;
    --epic-gray: #6c757d;
    --epic-gray-dark: #5a6268;
    --epic-alabaster-light: var(--epic-purple-emperor);
    --epic-success-bg: #d4edda;
    --epic-success-text: #155724;
    --epic-success-border: #c3e6cb;
    --epic-danger-bg: #f8d7da;
    --epic-danger-text: #721c24;
    --epic-danger-border: #f5c6cb;
    --epic-info-bg: #e2e3e5;
    --epic-info-text: #383d41;
    --epic-info-border: #d6d8db;
    --epic-neutral-border: #ddd;
    --epic-neutral-bg: #f9f9f9;
    --epic-highlight-bg: #e7f3ff;
    --epic-highlight-text: #0056b3;
    --epic-error-bg: #f2dede;
    --epic-action-hover: #1e7e34;
    --epic-input-border: #ccc;
    --epic-text-muted: #666;
    --epic-action-bg: #f0fff0;
    /* Time-based palette variables */
    --epic-alabaster-dawn: #e5e5e5; /* Soft morning light */
    --epic-gold-soft: #f3e5ab;      /* Gentle dawn gold */
    --epic-purple-vibrant: #6b46c1; /* Bright daytime purple */
    --epic-alabaster-dusk: #efe2d2; /* Warm dusk background */
    --epic-gold-dusk: #f0b429;      /* Intense dusk gold */
    --epic-orange-sunset: #f97316;  /* Sunset orange accent */
    --epic-text-night: #e0e0e0;     /* Light text for night mode */
    /* Alert variables */
    --alert-bg: #ffdddd;
    --alert-border: #ff0000;
    --alert-text: #d8000c;
}

body.lang-bar-visible {
    --language-bar-offset: var(--language-bar-height);
}

@media (prefers-color-scheme: dark) {
    :root:not(.light-mode) {
        --epic-alabaster-bg: #252B38;
        --epic-alabaster-bg-rgb: 37, 43, 56;
        --epic-alabaster-medium: #2a2f39;
        --epic-alabaster-medium-rgb: 42, 47, 57;
        --epic-text-color: #F0F0F0;
        --epic-text-color-rgb: 240, 240, 240;
        --epic-text-light: #D8D8D8;
        --epic-text-light-rgb: 245, 245, 245;
    }
}

/* --- Global Reset & Box Sizing --- */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:focus-visible {
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

html {
    font-size: 102.5%;
    scroll-behavior: smooth;
    overflow-x: hidden; /* Prevent horizontal scroll on the page */
}

/* --- Body Styling --- */
body {
    font-family: var(--font-primary);
    color: var(--epic-text-color);
    background-color: transparent; /* Body uses pseudo-element with page background */
    line-height: 1.7;
    text-align: left; /* Default text alignment */
    position: relative; /* For z-index stacking with pseudo-element */
    z-index: 1; /* Content above background pseudo-element */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    overflow-x: hidden; /* Prevent side scrolling on narrow screens */
    animation: fadeInPage 0.7s ease-out forwards;
    padding-top: calc(var(--menu-extra-offset) + var(--language-bar-offset));
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -1; /* Behind the body content */
    background-image: var(--alabaster-background-image);
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: center center;
    filter: grayscale(70%) brightness(110%) contrast(105%); /* Original light mode filter */
}

@keyframes fadeInPage {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUpFadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes drawBorder {
    to {
        stroke-dashoffset: 0;
        opacity: 1;
    }
}
@keyframes heroLightSweep {
    from { transform: translateX(-100%); }
    to { transform: translateX(100%); }
}

/* --- Headings --- */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headings);
    color: var(--epic-purple-emperor);
    margin-top: 1.5em;
    margin-bottom: 0.8em;
    line-height: 1.3;
    font-weight: 700;
    text-wrap: balance; /* Improves text wrapping for titles */
    text-shadow: 1px 1px 3px rgba(var(--epic-text-color-rgb), 0.15);
}

h1, h2, h3 {
    animation: slideUpFadeIn 0.6s ease-out forwards;
}

/* h1 { font-size: clamp(2.8em, 6vw, 4.2em); } */

/* Gradient Text for H1 */
h1 {
    background-image: linear-gradient(45deg, var(--epic-gold-main), var(--epic-purple-emperor));
    -webkit-background-clip: text;
    -moz-background-clip: text;
    background-clip: text;
    color: transparent !important; /* Ensure this overrides other color settings */
}

/* h2 { font-size: clamp(2.2em, 5vw, 3.2em); color: var(--epic-gold-secondary); }  Secondary gold for H2 for variety */
/* h3 { font-size: clamp(1.8em, 4vw, 2.5em); } */
/* h4 { font-size: clamp(1.4em, 3.5vw, 2em); } */
/* h5 { font-size: clamp(1.2em, 3vw, 1.7em); } */
/* h6 { font-size: clamp(1em, 2.5vw, 1.4em); } */

.gradient-text {
    background-image: linear-gradient(45deg, var(--epic-purple-emperor), var(--epic-gold-main));
    -webkit-background-clip: text;
    background-clip: text;
    color: var(--epic-purple-emperor); /* Fallback color */
    color: transparent;
    font-weight: 700;
    /* Stronger shadow for improved contrast */
    text-shadow: 2px 2px 4px rgba(var(--color-negro-contraste-rgb), 0.8);
}

/* Fallbacks for browsers without background-clip:text */
@supports not ((-webkit-background-clip: text) or (background-clip: text)) {
    h1,
    .gradient-text {
        background-image: none;
        -webkit-background-clip: initial;
        background-clip: initial;
        color: var(--epic-purple-emperor);
        text-shadow: none;
    }
    h1 {
        color: var(--epic-gold-main);
    }
}

/* Optional class to disable clipped text manually */
.no-clip-text h1,
.no-clip-text .gradient-text {
    background-image: none;
    -webkit-background-clip: initial;
    background-clip: initial;
    color: var(--epic-purple-emperor);
}

/* Utility classes to apply blend modes on text */
.blend-screen {
    mix-blend-mode: screen;
    display: inline-block;
    color: var(--epic-gold-main); /* Ensure visibility when blend modes are unsupported */
}

.blend-overlay {
    mix-blend-mode: overlay;
    display: inline-block;
    color: var(--epic-gold-main); /* Ensure visibility when blend modes are unsupported */
}

/* Fallbacks for browsers without mix-blend-mode */
@supports not (mix-blend-mode: screen) {
    .blend-screen,
    .blend-overlay {
        mix-blend-mode: normal;
        color: var(--epic-gold-main);
    }
}

/* Optional class to disable blend modes manually */
.no-blend .blend-screen,
.no-blend .blend-overlay {
    mix-blend-mode: normal;
    color: var(--epic-gold-main);
}

/* --- Paragraphs --- */
p {
    margin-bottom: 1.25em; /* Adjusted margin */
    max-width: 70ch; /* Limit width for readability, even if centered */
    /* margin-left: auto; and margin-right: auto; removed for default left align */
    text-shadow: 0 1px 2px rgba(var(--epic-alabaster-medium-rgb), 0.4); /* Subtle shadow for depth/readability */
    text-align: left;
}

/* --- Links --- */
a {
    color: var(--epic-gold-main);
    text-decoration: none;
    transition: color var(--global-transition-speed) ease-in-out, opacity var(--global-transition-speed) ease-in-out, letter-spacing var(--global-transition-speed) ease-in-out;
}

a:hover,
a:focus-visible {
    color: var(--epic-gold-secondary);
    opacity: 0.85;
    text-decoration: underline;
    letter-spacing: 0.25px;
}
a:focus-visible {
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* --- Lists --- */
ul, ol {
    margin-bottom: 1.5em;
    padding-left: 1.5em; /* Standard padding for lists */
    list-style-position: outside; /* Standard marker position */
}

li {
    margin-bottom: 0.5em;
}

/* --- Images --- */
img {
    max-width: 100%;
    height: auto;
    display: block; /* Allows centering with margin auto */
    margin-left: auto;
    margin-right: auto;
    border-radius: var(--global-border-radius);
    margin-top: 1em;
    margin-bottom: 1em;
}

/* --- Tables --- */
table {
    width: 100%; /* Or a specific width like 80% and margin auto */
    margin: 2em auto;
    border-collapse: collapse;
    border: 1px solid var(--epic-purple-emperor);
    /* text-align: center; for td/th will be inherited or can be set explicitly */
}

th, td {
    border: 1px solid var(--epic-purple-emperor);
    padding: 0.75em 1em;
    /* text-align: center; is inherited from body */
}

th {
    background-color: var(--epic-transparent-overlay-medium); /* Purple transparent */
    color: var(--epic-text-light);
    font-family: var(--font-headings);
}

/* --- Basic Container (optional, can be expanded later) --- */
.container-epic {
    width: 90%;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    padding: clamp(1.5em, 3vw, 2.5em); /* Adjusted padding */
    text-align: center;
}

/* --- Helper class for forced left alignment if needed --- */
.text-left-override {
    text-align: left !important;
}
.text-left-override p,
.text-left-override li,
.text-left-override td,
.text-left-override div { /* Add other elements as needed */
    text-align: left !important;
    margin-left: 0; /* Reset margin-left for these cases if they used auto */
    margin-right: 0; /* Reset margin-right for these cases if they used auto */
}

/* --- Helper class for forced right alignment if needed --- */
.text-right-override {
    text-align: right !important;
}
.text-right-override p,
.text-right-override li,
.text-right-override td,
.text-right-override div {
    text-align: right !important;
    margin-left: 0;
    margin-right: 0;
}

/* Alignment utility classes */
.text-center {
    text-align: center;
}
.text-justify {
    text-align: justify;
}
#pieza-info-overlay {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--epic-text-color-rgb), 0.8); /* Dark overlay background */
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    z-index: 1050; /* High z-index, above most content but potentially below a main menu if one had higher */
    opacity: 0;
    transition: opacity var(--global-transition-speed) ease-in-out;
    align-items: center; /* For centering #overlay-content */
    justify-content: center; /* For centering #overlay-content */
}

#pieza-info-overlay.visible {
    display: flex; /* Use flex to enable centering */
    opacity: 1;
}

#overlay-content {
    background-color: var(--epic-alabaster-bg);
    color: var(--epic-text-color);
    padding: clamp(20px, 4vw, 40px);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-dark);
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
    text-align: left; /* Override body's text-align:center */
    position: relative; /* For positioning close button */
    transform: scale(0.95);
    transition: transform var(--global-transition-speed) ease-in-out;
}

#pieza-info-overlay.visible #overlay-content {
    transform: scale(1);
}

#overlay-content h3 { /* #overlay-titulo */
    font-family: var(--font-headings);
    color: var(--epic-purple-emperor);
    /* font-size: clamp(1.8em, 4vw, 2.5em); */
    margin-top: 0;
    margin-bottom: 0.7em;
    border-bottom: 2px solid var(--epic-gold-secondary);
    padding-bottom: 0.3em;
    text-align: center;
}

#overlay-content p { /* #overlay-autor, #overlay-descripcion */
    font-family: var(--font-primary);
    font-size: clamp(1em, 2vw, 1.1em);
    line-height: 1.6;
    margin-bottom: 1em;
    text-align: left; /* Ensure paragraphs are left-aligned */
}

#overlay-content #overlay-autor {
    font-style: italic;
    color: var(--epic-purple-emperor); /* Or a slightly less prominent color */
    margin-bottom: 1.5em;
}

#overlay-cerrar {
    display: block;
    margin: 20px auto 0 auto;
    padding: 0.7em 1.5em;
    font-family: var(--font-headings);
    font-size: 1em;
    font-weight: bold;
    color: var(--epic-alabaster-bg);
    background-color: var(--epic-gold-secondary);
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    cursor: pointer;
    transition: background-color var(--global-transition-speed), color var(--global-transition-speed), border-color var(--global-transition-speed);
}

#overlay-cerrar:hover,
#overlay-cerrar:focus {
    background-color: var(--epic-gold-main);
    border-color: var(--epic-gold-main);
    color: var(--epic-purple-emperor);
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* --- Footer Styling (.footer from fragments/footer.php) --- */
.footer {
    background: linear-gradient(to bottom, rgba(var(--epic-purple-emperor-rgb), 0.9), rgba(var(--epic-purple-emperor-rgb), 0.75));
    color: var(--epic-text-light);
    height: var(--header-footer-height);
    padding: 3em 1em 2em 1em; /* More padding */
    text-align: center; /* Footer content should generally be centered */
    border-top: 8px solid var(--epic-gold-main);
    position: relative;
    margin-top: 2em; /* Space above footer */
}

.footer::before { /* Optional decorative element */
    content: '';
    display: block;
    width: 60px;
    height: 60px;
    background-image: url('/assets/img/estrella.png'); /* Re-use existing star if appropriate */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: -60px auto 20px auto; /* Position it above the footer */
    position: relative;
    opacity: 0.5;
    filter: drop-shadow(0 0 5px var(--epic-gold-main));
}

.footer p {
    margin-bottom: 0.8em;
    font-size: clamp(0.9em, 1.8vw, 1em);
    color: var(--epic-alabaster-medium);
    text-align: center; /* Ensure paragraphs in footer remain centered */
}

.footer a {
    color: var(--epic-gold-main);
}
.footer a:hover, .footer a:focus-visible {
    color: var(--epic-alabaster-bg); /* Brighter gold on hover */
    text-decoration: underline;
}

.footer .social-links {
    margin-top: 1.5em;
}

.footer .social-links a {
    font-size: 1.8em; /* Larger icons */
    color: var(--epic-gold-secondary);
    margin: 0 12px;
    display: inline-block;
    transition: transform var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
}

.footer .social-links a:hover, .footer .social-links a:focus-visible {
    color: var(--epic-gold-main);
    transform: scale(1.2);
}

body.dark-mode .footer .social-links a {
    color: var(--epic-icon-color);
}

body.dark-mode .footer .social-links a:hover,
body.dark-mode .footer .social-links a:focus-visible {
    color: var(--epic-icon-hover);
}

/* Style for social links that are placeholders */
.footer .social-links a[href="/en_construccion.html"] {
    opacity: 0.4;
    pointer-events: none; /* Make them non-interactive */
    filter: grayscale(90%);
    cursor: default;
}
.footer .social-links a[href="/en_construccion.html"]:hover { /* Override hover effect for disabled links */
    transform: none;
    color: var(--epic-gold-secondary); /* Keep original color or a muted one */
}

/* --- Hero Sections (.hero, .page-header) --- */
.hero, .page-header {
    position: relative;
    width: 100%;
    background-size: cover;
    background-position: center center;
    display: flex; /* For centering content */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--epic-text-light); /* Light text for dark backgrounds */
    text-align: center; /* Hero section text should be centered */
    padding: clamp(3em, 10vh, 6em) 1em;
    border-bottom: 10px solid var(--epic-gold-main);
    overflow: hidden; /* Contain pseudo-elements */
    min-height: 50vh; /* Default min height for page headers */
}
/* Default background if no inline style is set - a purple gradient */
.hero, .page-header {
    background-image: none !important;
    background: transparent !important; /* Fallback */
}

/* Specific hero for homepage */
.hero { /* This class is often used for the main homepage banner */
    min-height: 80vh; /* Taller for homepage hero */
}

@media (max-width: 768px) {
    .hero {
        /* Use a slightly smaller minimum height on small screens */
        min-height: 65vh;
        /* Use the small viewport height unit when supported */
        min-height: 100svh;
    }
}


/* Overlay for all hero/page-header sections to ensure text readability */
.hero::before, .page-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: transparent !important; /* Default dark purple overlay */
    z-index: 1; /* Below content, above background image */
}
.hero::after, .page-header::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 200%;
    height: 100%;
    pointer-events: none;
    background: linear-gradient(45deg, rgba(255,255,200,0.1), rgba(255,255,255,0));
    animation: heroLightSweep 15s linear infinite;
    z-index: 1;
}
/* If a specific background image is set via inline style, this ensures the overlay is still there */
[style*="background-image"]::before {
    background-color: transparent !important; /* Ensure consistency */
}


.hero-content, .page-header .hero-content { /* .hero-content is a common inner wrapper */
    position: relative;
    z-index: 2; /* Above the overlay */
    max-width: 900px;
    background: transparent !important; /* Semi-transparent black for content box */
    padding: clamp(1.5em, 5vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-dark);
    border: 2px solid transparent !important;
    text-align: center; /* Content within hero-content should be centered */
}

.hero-content h1, .page-header .hero-content h1 {
    /* font-size: clamp(2.5em, 7vw, 4.5em);  Larger for hero titles */
    color: var(--epic-gold-main); /* Gold for main hero titles */
    text-shadow: 2px 2px 5px rgba(var(--epic-text-color-rgb), 0.7);
    margin-top: 0;
    margin-bottom: 0.4em;
}

.hero-content p, .page-header .hero-content p { /* Subtitles in hero */
    font-size: clamp(1.1em, 2.5vw, 1.5em);
    color: var(--epic-alabaster-bg);
    max-width: 65ch;
    margin: 0 auto 1em auto; /* Centering handled by parent */
    line-height: 1.6;
}

/* Mission tagline under hero content */
.mission-tagline {
    font-size: clamp(1.2em, 2.8vw, 1.6em);
    color: var(--epic-gold-main);
    font-weight: 600;
    text-shadow: 1px 1px 2px rgba(var(--epic-text-color-rgb), 0.5);
    margin-bottom: 1.5em;
}

.hero-escudo { /* Specific to index.html hero */
    /* Slightly larger on wide screens for better visual impact */
    width: clamp(180px, 30vw, 300px);
    height: auto;
    margin-bottom: 1.5em; /* text-align:center on parent centers it */
    border: 5px solid var(--epic-gold-main);
    padding: 8px;
    background-color: var(--epic-transparent-overlay-dark);
    box-shadow: 0 0 20px var(--epic-gold-main), inset 0 0 15px rgba(var(--epic-text-color-rgb),0.4);
}

.hero-escudo.draggable {
    cursor: grab;
    position: absolute;
}

.hero-escudo.dragging {
    cursor: grabbing;
}

/* Background media within hero sections */
.hero > img.hero-bg,
.page-header > img.hero-bg,
.hero > video.hero-bg,
.page-header > video.hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    z-index: 0;
}
@media (min-width: 768px) {
    .hero > img.hero-bg,
    .page-header > img.hero-bg,
    .hero > video.hero-bg,
    .page-header > video.hero-bg {
        object-position: top;
    }
}

.cta-button { /* Call to Action button styling */
    display: inline-block;
    position: relative; /* For border animation pseudo-element */
    overflow: hidden;
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.66); /* Purple with 34% transparency */
    color: var(--epic-alabaster-bg);
    padding: clamp(1em, 2vh, 1.2em) clamp(2em, 4vw, 3em);
    font-size: clamp(1.1em, 2.5vw, 1.4em);
    font-family: var(--font-headings);
    font-weight: 700;
    border-radius: 50px; /* Pill shape */
    border: 2px solid var(--epic-purple-emperor);
    box-shadow: var(--global-box-shadow-medium), inset 0 -3px 5px rgba(var(--epic-text-color-rgb), 0.2);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--global-transition-speed) ease-in-out;
    margin-top: 1em;
}

/* Animated outline */
.cta-button::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    border: 2px solid var(--epic-gold-main);
    opacity: 0;
    stroke-dasharray: 250;
    stroke-dashoffset: 250;
}

.cta-button:hover, .cta-button:focus-visible {
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.9); /* Less transparent on hover */
    color: var(--epic-gold-main);
    border-color: var(--epic-gold-main);
    transform: translateY(-3px) scale(1.03);
    box-shadow: var(--global-box-shadow-dark), inset 0 -2px 3px rgba(var(--epic-text-color-rgb), 0.1);
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}
.cta-button:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
}
.cta-button:hover::after, .cta-button:focus-visible::after {
    animation: drawBorder 0.4s forwards;
}

/* --- Content Sections (.section, .page-content-block) --- */
.section {
    padding: clamp(3em, 8vh, 5em) 0;
    position: relative;
    background-image: none !important; /* Default alabaster texture for sections */
    background-color: transparent !important;
    background-size: cover;
    background-position: center center;
    background-attachment: scroll; /* Parallax within section, not fixed to viewport like body */
    z-index: 1;
    margin: 2em 0; /* Space between sections */
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-light);
    overflow: hidden; /* For pseudo-elements */
}

/* Dark overlay for sections with background images, to make content pop */
.section::before {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: transparent !important; /* Dark purple overlay */
    opacity: 0; /* Hidden by default, only show if .section has a specific bg image or class */
    transition: opacity var(--global-transition-speed) ease-out;
    z-index: 0;
    border-radius: inherit;
    pointer-events: none;
}
/* Activate overlay for sections that are likely to have a prominent background image */
.section.alternate-bg::before, /* Example class */
.section[style*="background-image"]::before { /* If section has inline background image */
    opacity: 1; /* Show the overlay */
}

/* Container within .section for actual content */
.section > .container-epic { /* Using the .container-epic defined in base styles */
    position: relative;
    z-index: 1; /* Above section's ::before overlay */
    background-color: transparent !important; /* Semi-transparent alabaster */
    /* backdrop-filter: blur(3px); */ /* Subtle blur for content background */
    padding: clamp(1.5em, 4vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: none !important;
    margin-top: 0; /* Reset if inside .section */
    margin-bottom: 0; /* Reset if inside .section */
    text-align: center;
}

.page-content-block { /* .page-content-block is another common content wrapper */
    position: relative;
    z-index: 1; /* Above section's ::before overlay */
    background-color: transparent !important; /* Semi-transparent alabaster */
    /* backdrop-filter: blur(3px); */ /* Subtle blur for content background */
    padding: clamp(1.5em, 4vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: none !important;
    margin-top: 2em; /* General margin for page-content-block */
    margin-bottom: 2em; /* General margin for page-content-block */
}

/* If a section has a specific background and we want its content container to be more opaque */
.section.alternate-bg > .container-epic,
.section[style*="background-image"] > .container-epic,
.page-content-block.dark-bg-content { /* Add this class if page-content-block is on a dark page bg */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.92); /* More opaque alabaster */
    /* Margins are already set by the general .page-content-block or .section > .container-epic rules.
       If specific overrides are needed for .dark-bg-content, they can be added here.
       The previous change that added margins here might have been too specific.
       Keeping the margin declaration here if .page-content-block.dark-bg-content needs different margins
       than the general .page-content-block. For now, let's assume it inherits or we want the 2em.
       If the 2em from the previous step on this specific selector was intentional and different from the
       general .page-content-block, then it should be preserved.
       Re-evaluating: the previous step DID add 2em here. The new general rule for .page-content-block also adds 2em.
       So, it's redundant for .page-content-block.dark-bg-content to also have it if it's the same.
       Let's remove the specific margin from .page-content-block.dark-bg-content here,
       as it will inherit from the new general .page-content-block rule.
    */
}


.section-title { /* Title for a section */
    text-align: center; /* Section titles are usually centered */
    font-size: clamp(2em, 5vw, 3em);
    margin-bottom: 1.5em;
    color: var(--epic-purple-emperor);
}

/* --- Cards (.card) --- */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2em; /* Increased gap */
    margin-top: 2em;
}

.card {
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.75) !important;
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    overflow: hidden;
    transition: transform var(--global-transition-speed) ease-in-out, box-shadow var(--global-transition-speed) ease-in-out;
    display: flex;
    flex-direction: column; /* For footer button alignment */
    text-align: center; /* Card content often centered */
}

.card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: var(--global-box-shadow-dark);
    border-color: var(--epic-gold-main);
}

.card img {
    width: 100%;
    height: auto;
    max-height: 250px; /* Limit without cropping */
    -o-object-fit: contain;
       object-fit: contain; /* Ensure full image visible */
    border-bottom: 4px solid var(--epic-gold-main);
    margin: 0 0 1em 0; /* Remove image's own margins, add space below */
    border-radius: var(--global-border-radius); /* Image takes top radius from card */
    filter: sepia(30%) contrast(1.1) brightness(0.9); /* Subtle epic filter */
    transition: filter var(--global-transition-speed) ease-in-out, transform var(--global-transition-speed) ease-in-out;
}
.card:hover img {
    filter: sepia(10%) contrast(1) brightness(1);
    transform: scale(1.05);
}

/* Responsive images specifically for the Legado section */
#legado .card img {
    height: auto;
    max-height: 350px;
    -o-object-fit: contain;
       object-fit: contain;
}

.card-content {
    padding: 1.5em;
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allows button to stick to bottom */
    /* text-align: center; is inherited */
}

.card-content h3 {
    font-size: clamp(1.3em, 3vw, 1.7em);
    margin-top: 0;
    margin-bottom: 0.7em;
    color: var(--epic-purple-emperor);
}
.card-content h3::before { /* Small star before card titles */
    content: '';
    display: inline-block;
    width: 12px;
    height: 12px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    margin-right: 8px;
    opacity: 0.7;
    vertical-align: middle;
}

.card-content p {
    font-size: clamp(0.95em, 2vw, 1.05em);
    line-height: 1.6;
    color: var(--epic-text-color);
    margin-bottom: 1.2em;
    flex-grow: 1; /* Pushes button down */
}

.card-content .read-more { /* Button inside card */
    background-color: transparent;
    color: var(--epic-gold-secondary);
    border: 2px solid var(--epic-gold-secondary);
    padding: 0.6em 1.2em;
    font-size: 0.9em;
    font-weight: 700;
    font-family: var(--font-headings);
    text-transform: uppercase;
    border-radius: 20px;
    align-self: center; /* Center button */
    margin-top: auto; /* Stick to bottom */
    transition: background-color var(--global-transition-speed) ease-in-out, color var(--global-transition-speed) ease-in-out;
}

.card-content .read-more:hover, .card-content .read-more:focus-visible {
    background-color: var(--epic-gold-secondary);
    color: var(--epic-alabaster-bg); /* Light text on gold bg */
    text-decoration: none;
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* --- Estilos para Selector de Idioma (Demostración) --- */
#languageSelectorContainer {
    /* El contenedor ya tiene estilos inline para margen, padding-bottom y border-bottom.
       El text-align:center también está inline. */
}

#languageSelectorContainer h4 {
    /* El h4 ya tiene estilos inline y usa variables del tema. */
}

.lang-btn {
    background-color: var(--epic-alabaster-medium);
    color: var(--epic-purple-emperor);
    border: 1px solid var(--epic-gold-secondary);
    padding: 8px 15px;
    margin: 0 5px 5px 5px; /* Añadido margen inferior para posible envoltura */
    border-radius: 20px;
    cursor: pointer;
    font-family: var(--font-primary);
    font-size: 0.9em;
    font-weight: 600; /* Un poco más de peso */
    transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
    text-decoration: none;
}

.lang-btn:hover {
    background-color: var(--epic-gold-secondary);
    color: var(--epic-alabaster-bg);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(var(--epic-text-color-rgb), 0.1);
}

.lang-btn.active {
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.75);
    color: var(--epic-gold-main);
    font-weight: bold; /* Más destacado */
    border-color: var(--epic-gold-main);
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.25); /* Sombra interior para efecto presionado */
    transform: none;
}

.lang-btn.active:hover {
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.75);
    color: var(--epic-gold-main);
    /* Mantener el efecto de sombra interior, pero se podría añadir un sutil brillo exterior si se desea */
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.25), 0 0 8px rgba(var(--epic-gold-main-rgb), 0.4);
}

/* --- Estilos para Etiquetas Sugeridas por IA --- */
.tags-sugeridos-ia {
    /* El contenedor tiene estilos inline para margen y borde superior.
       El text-align:center se aplica a sus hijos a través de #listaTagsIA y el h4. */
}

.lista-tags-ia {
    /* El text-align:center ya está aplicado inline. */
    /* Se añade flexbox para mejor espaciado y envoltura de etiquetas. */
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px; /* Espacio horizontal y vertical entre etiquetas */
    margin-top: 10px; /* Espacio después del título h4 de la sección */
}

.tag-ia {
    display: inline-block; /* Comportamiento natural para spans, pero explícito */
    background-color: var(--epic-alabaster-medium);
    color: var(--epic-purple-emperor);
    padding: 6px 12px;
    border-radius: 15px; /* Estilo píldora */
    font-size: 0.9em;
    font-family: var(--font-primary);
    border: 1px solid var(--epic-gold-secondary);
    transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
    text-decoration: none; /* En caso de que se conviertan en enlaces */
    margin-bottom: 4px; /* Para el caso de wrap, asegurar un pequeño espacio vertical extra si gap no es suficiente */
}

.tag-ia:hover {
    background-color: var(--epic-gold-main);
    color: var(--epic-purple-emperor);
    transform: translateY(-1px); /* Ligero efecto de elevación */
    box-shadow: 0 2px 5px rgba(var(--epic-text-color-rgb), 0.15);
}

/* --- View Switcher Buttons --- */
.view-switch-controls {
    text-align: center;
    margin-bottom: 20px;
    padding-top: 20px;
}

.view-switch-button {
    /* Inherits from .cta-button, can add overrides or use a different base */
    padding: 0.8em 1.5em; /* Slightly smaller than main CTA */
    font-size: clamp(1em, 2.2vw, 1.2em); /* Adjust size */
    margin: 5px;
    letter-spacing: 0.5px;
    border-width: 2px; /* Ensure border width is consistent */
}

.view-switch-button:disabled {
    background-image: none; /* Remove gradient */
    background-color: var(--epic-alabaster-medium); /* Grey out */
    color: var(--epic-text-color);
    opacity: 0.6;
    cursor: not-allowed;
    border-color: var(--epic-alabaster-medium);
    transform: none; /* No hover effect */
    box-shadow: var(--global-box-shadow-light);
}

/* Initial hidden state for 3D museum */
#museo-3d-section {
    display: none; /* Hidden by default, JS will toggle */
}

.page-header.hero {
    background-image:
        linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.82), rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.95)),
        url('/assets/img/hero_mis_tierras.jpg');
    background-color: var(--epic-purple-emperor);
    min-height: 45vh; /* Override default min-height */
    padding: clamp(60px, 15vh, 100px) 20px; /* Override default padding */
    border-bottom-width: 10px; /* Matches decorative border */
    /* Other properties like color, text-align, display and alignment inherit from base .hero/.page-header */
}
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"],
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"],
.page-header.hero[style*="/imagenes/hero_lugares_background.jpg"],
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"],
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"],
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"],
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"],
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"],
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"],
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] {
    /* No specific rules here, but the selectors imply these background images are set via inline styles */
}

.page-header.hero .hero-content { /* Compare with .hero-content in epic_theme.css */
    padding: clamp(25px, 4vw, 45px);
    background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.7);
}
.page-header.hero .hero-content h1 {
    /* font-size: clamp(2.5em, 6vw, 4em); */
    margin-bottom: 0.3em;
}
.page-header.hero .hero-content p {
    font-size: clamp(1.05em, 2.2vw, 1.4em);
    margin-bottom: 0;
    color: var(--color-piedra-clara, #EAE0C8); 
    text-shadow: 0 1px 5px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.7);
}
.page-header.hero .decorative-star-header {
    width: clamp(50px, 8vw, 70px);
    height: auto;
    margin: 0 auto 15px auto;
    opacity: 0.8;
    filter: drop-shadow(0 0 10px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.5)); 
}

.decorative-star-header-highlighted { /* Specific for Cerezo de Rio Tiron header star */
    filter: drop-shadow(0 0 12px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.75)) !important;
    width: clamp(60px, 10vw, 80px) !important;
    margin-bottom: 20px !important;
}

.hero-content { 
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px;
    max-width: 950px;
    background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.85);
    padding: clamp(40px, 7vw, 70px);
    border-radius: var(--border-radius-medio, 10px); 
    box-shadow: 0 15px 50px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.6);
    position: relative;
    z-index: 1;
    border: 3px solid rgba(var(--color-dorado-rgb, 184, 134, 11), 0.6); 
}

.hero-escudo { 
    /* Keep in sync with the homepage hero size adjustment */
    width: clamp(200px, 32vw, 320px);
    height: auto;
    margin-bottom: 30px;
    animation: fadeInScaleUp 1.4s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    filter: drop-shadow(0px 12px 28px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.8));
    border: 7px solid var(--epic-gold-main, #B8860B); 
    padding: 10px;
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.65);
    box-shadow: 0 0 25px rgba(var(--epic-gold-main, #B8860B), 0.7), inset 0 0 18px rgba(var(--color-negro-contraste-rgb,10,10,10),0.5);
}

@keyframes fadeInScaleUp {
    from { opacity: 0; transform: scale(0.5) translateY(50px) rotate(-5deg); }
    to { opacity: 1; transform: scale(1) translateY(0) rotate(0deg); }
}

.hero h1 {
    /* font-size: clamp(3.2em, 10vw, 6em); */
    color: var(--color-alabastro, #fdfaf6); 
    margin-top: 0;
    margin-bottom: 0.5em;
    text-shadow: 0 5px 15px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 1), 0 0 50px rgba(var(--color-acento-amarillo, #FFD700),0.95);
    line-height: 1.1;
    text-align: center;
}

.hero p { 
    font-size: clamp(1.25em, 3.5vw, 1.9em);
    margin-bottom: 55px;
    color: var(--color-piedra-clara, #EAE0C8); 
    text-shadow: 0 3px 20px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 1);
    line-height: 1.75;
    max-width: 50ch;
    text-align: center;
}
.cta-button--large-legacy {
    background-image: linear-gradient(145deg,#716472,#a69ba8);
    color: var(--epic-purple-emperor);
    padding: clamp(20px, 3vh, 26px) clamp(50px, 8vw, 65px);
    font-size: clamp(1.3em, 3.5vw, 1.7em);
    font-weight: 700;
    border-radius: 50px;
    border: 3px solid var(--epic-purple-emperor);
    box-shadow: inset 2px 2px 4px #51474f, inset -2px -2px 4px #cac5cf;
    text-transform: uppercase;
    letter-spacing: 1.8px;
    transition: all var(--global-transition-speed) cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Standardized */
    display: inline-block;
    position: relative;
}

.cta-button--large-legacy:hover, .cta-button--large-legacy:focus-visible {
    background-image: linear-gradient(145deg, var(--epic-purple-emperor, #4A0D67), #380A54);
    color: var(--color-acento-amarillo, #FFD700);
    border: 1px solid #d4af37;
    transform: translateY(-6px) scale(1.08);
    box-shadow: 0 16px 40px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.5), inset 0 -2px 3px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.1);
    filter: brightness(1.2);
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
    animation: borderDash 0.4s forwards;
}

@keyframes borderDash {
    from { stroke-dasharray: 100 0; }
    to { stroke-dasharray: 4 4; }
}

.cta-button-small {
    padding: clamp(12px, 2vh, 18px) clamp(25px, 5vw, 45px);
    font-size: clamp(0.9em, 2.2vw, 1.2em);
    letter-spacing: 1.2px;
}
.cta-button-small:hover, .cta-button-small:focus-visible {
    /* Inherits from .cta-button hover */
}

.header-action-buttons .cta-button-small {
    margin-top: 0;
    padding: clamp(4px, 1vh, 8px) clamp(12px, 4vw, 18px);
    font-size: clamp(0.8em, 2vw, 1em);
}


/* --- Sección de Video --- */
.video-section {
    padding: clamp(60px, 10vh, 80px) 0;
}
.video-container {
    max-width: 1100px;
    margin: 25px auto;
    border: 8px solid var(--color-fondo-pagina, #fdfaf6); 
    border-radius: var(--border-radius-medio, 10px); 
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)), 0 0 30px rgba(var(--color-alabastro-glow-rgb, 248, 245, 238), 0.25); 
    aspect-ratio: 16 / 9;
    overflow: hidden;
}
.video-container iframe {
    width: 100%;
    height: 100%;
    display: block;
}
.video-section h2 {
     margin-bottom: 45px;
     color: var(--epic-purple-emperor); 
}

/* --- Secciones Generales con Efecto de Linterna (Spotlight) --- */
/* epic_theme.css has .section and .section.spotlight-active::after.
*/
    /* However, epic_theme.css .section::before already provides a dark overlay, controlled by opacity. */
}

/*
   epic_theme.css has .section > .container-epic.
   If pages use <section><div class="container-epic"> (from epic_theme.css pattern), that rule will apply.
*/
    position: relative;
    z-index: 1; /* Ensure content is above section's ::before if any */
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.9); /* Uses purple emperor background */
    padding: 30px;
    border-radius: var(--global-border-radius); 
    box-shadow: 0 0 15px rgba(var(--epic-text-color-rgb), 0.1); 
}


/* SECCIÓN DE INTRODUCCIÓN DETALLADA y Bloques de Contenido de Página Interna */
/* .detailed-intro-section .container uses .container, so the rule above applies. */
.detailed-intro-section .container {
    /* epic_theme.css .page-content-block provides base: bg, backdrop-filter, padding, border-radius, box-shadow */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.96); 
    padding: clamp(30px, 5vw, 50px); /* Potentially different padding */
    border-radius: var(--global-border-radius); 
    box-shadow: var(--global-box-shadow-medium); 
    margin-top: 0;
    margin-bottom: 0;
}
.detailed-intro-section h2,
.page-content-block h2 {
    text-align: center;
    font-size: clamp(2.2em, 5.5vw, 3.2em);
    margin-bottom: 1.3em;
}
.detailed-intro-section p,
.page-content-block p {
    font-size: clamp(1.05em, 2.3vw, 1.2em);
    line-height: 1.85;
    /* text-align: center !important; */ /* Allowing left align from body now */
    margin-bottom: 1.6em;
    color: var(--color-texto-principal, #2c1d12); 
}
.detailed-intro-section p:first-of-type,
.page-content-block .intro-paragraph {
    font-size: clamp(1.2em, 2.8vw, 1.4em);
    color: var(--epic-purple-emperor); 
    font-style: italic;
    /* text-align: center; */ /* Allowing left align from body now, or specific centering if needed */
    border-left: 4px solid var(--epic-gold-main, #B8860B); 
    border-right: 4px solid var(--epic-gold-main, #B8860B); 
    padding: 0.7em 1.2em;
    background-color: rgba(var(--color-piedra-arena-rgb, 200, 187, 174), 0.15); 
    border-radius: var(--border-radius-suave, 5px); 
}


.image-gallery-intro {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-top: 40px;
}
.image-gallery-intro figure {
    overflow: hidden;
}
.image-gallery-intro img {
    border: 6px solid var(--color-piedra-media, #D2B48C); 
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); 
    transition: transform 0.4s ease-in-out, box-shadow 0.4s ease-in-out, filter 0.4s ease-in-out;
    margin: 0 auto;
    width: 100%;
    height: auto;
    max-height: 100%;
    -o-object-fit: contain;
       object-fit: contain; /* Show entire image */
    display: block;
}
.image-gallery-intro img:hover {
    transform: scale(1.08) rotate(-2deg);
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); 
    filter: sepia(50%) contrast(1.1) brightness(0.85);
}


.section.alternate-bg > .container::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 300px;
    height: 300px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transform: translate(-50%, -50%) rotate(15deg);
    z-index: -1;
    opacity: 0.06;
}


.section-title { /* epic_theme.css has .section-title too. Appending for now. */
    /* text-align: center; */ /* Already centered by previous rule */
    font-size: clamp(2.2em, 5.5vw, 3.2em);
    margin-bottom: 25px;
}

.section-title::after { /* epic_theme.css has .section-title::after too. Appending for now. */
    content: '';
    display: block;
    width: 55px;
    height: 55px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: 30px auto 60px auto;
    position: relative;
    animation: pulseStar 3.8s infinite ease-in-out;
    filter: drop-shadow(0 0 8px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.6)); 
}
@keyframes pulseStar {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
    50% { transform: scale(1.08) rotate(10deg); opacity: 1; }
}


/* --- Tarjetas (Cards) --- */

.card--legacy-hover-effect {
    background-color: var(--color-fondo-pagina, #fdfaf6); 
    border: 2px solid var(--color-piedra-media, #D2B48C); 
    border-radius: var(--border-radius-medio, 10px); 
    box-shadow: 8px 8px 0px -2px var(--color-piedra-media, #D2B48C), 16px 16px 28px rgba(var(--epic-purple-emperor-rgb), 0.18); 
    overflow: hidden;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
}

.card--legacy-hover-effect:hover {
    transform: translateY(-18px) translateX(-9px) rotate(1.5deg);
    box-shadow: 12px 12px 0px -2px var(--epic-gold-main, #B8860B), 22px 22px 35px rgba(var(--epic-purple-emperor-rgb), 0.25); 
}

/* --- Sección de Inmersión --- */
.immersion-section {
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.95); 
    color: var(--color-alabastro, #fdfaf6); 
    padding: clamp(60px, 12vh, 100px) 20px;
    background-image:
        linear-gradient(rgba(var(--epic-purple-emperor-rgb),0.92), rgba(var(--epic-purple-emperor-rgb),0.97)),
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.04) 10px,
            rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.04) 20px
        );
    filter: none !important;
    margin: 30px 0;
    border-radius: var(--border-radius-medio, 10px); 
}
.immersion-section::before {
    opacity: 0 !important;
}
.immersion-section::after {
    opacity: 0 !important;
}


.immersion-section h2 {
    color: var(--color-acento-amarillo, #FFD700); 
    font-size: clamp(2em, 5vw, 3em);
}
.immersion-section p {
    font-size: clamp(1.15em, 2.8vw, 1.5em);
    max-width: 850px;
    line-height: 1.7;
    /* text-align: center; */ /* Centered by .immersion-section */
}
.immersion-section .cta-button { /* Styles for CTA button within immersion section */
    background-image: linear-gradient(to bottom, var(--color-acento-amarillo, #FFD700), var(--epic-gold-main, #B8860B));
    color: var(--epic-purple-emperor);
    border-color: var(--color-alabastro, #fdfaf6);
}
.immersion-section .cta-button:hover, .immersion-section .cta-button:focus-visible {
    background-image: linear-gradient(to bottom, var(--color-alabastro, #fdfaf6), #e0dccc);
    color: var(--epic-purple-emperor);
    border-color: var(--epic-purple-emperor);
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* --- Footer --- */
/* Both files have .footer styles. epic_theme.css's version is primary.
   For consistency, we'll rely on epic_theme.css .footer.
*/
/*
*/
@media (max-width: 768px) {
    .hero-content {
        padding: 20px;
    }
    .hero-escudo {
        /* Slightly larger on mobile as well */
        width: clamp(170px, 40vw, 250px);
    }
    /* .hero h1 { font-size: clamp(2.4em, 7vw, 3.5em); } */
    .hero p { font-size: clamp(1.05em, 3.5vw, 1.4em); max-width: 90%;}

    .detailed-intro-section p { text-align: justify !important; }
    .section-title::after { width: 40px; height: 40px; margin: 20px auto 35px auto; }
    .timeline::before { left: 20px; }
    .timeline-item { padding-left: 60px; margin-bottom: 40px; }
    .timeline-icon { width: 40px; height: 40px; left: 0; }
    .timeline-icon img { width: 60%; height: 60%; }
        /* max-height: none; */ 
        /* overflow: visible; */
    }
        /* color: var(--color-piedra-clara); Ensure this is consistent */
    }
}
@media (max-width: 480px) {
    /* .hero h1 { font-size: clamp(2.2em, 10vw, 3em); } */
    .hero p { font-size: clamp(1em, 4vw, 1.2em); }
    .cta-button { padding: 15px 30px; font-size: clamp(1em, 4vw, 1.2em); }
    /* .detailed-intro-section h2, .section-title { font-size: clamp(1.8em, 6vw, 2.5em); } */
    .card-content { padding: 20px; }
    .section-title::after { width: 35px; height: 35px; }
    .footer::before { width: 50px; height: 50px; margin: -80px auto 20px auto; }
}

/* Estilos para la página de Camino de Santiago */
.camino-content-block {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    align-items: center;
    margin-bottom: 3em;
}
.camino-content-block.reverse {
    flex-direction: row-reverse;
}
.camino-text {
    flex: 1;
    min-width: 300px;
}
.camino-text p {
    /* text-align: center; */ /* Will be left by default */
    font-size: clamp(1em, 2.1vw, 1.15em);
    color: var(--color-texto-secundario, #2c1d12); 
}
.camino-image {
    flex: 1;
    min-width: 280px;
    /* text-align: center; */ /* Images are block centered with margin auto */
}
.camino-image img {
    border: 4px solid var(--color-piedra-media, #D2B48C); 
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); 
    max-width: 100%;
    margin: 1em auto;
}
.camino-image .image-caption {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); 
    font-style: italic;
    margin-top: 0.8em;
}
.camino-image .image-caption i {
    margin-right: 6px;
    color: var(--epic-gold-main, #B8860B); 
}

.camino-cta-block {
    /* text-align: center; */ /* Centered by .camino-cta-block */
    padding: 30px;
    background-color: rgba(var(--color-piedra-clara-rgb, 234, 224, 208), 0.3); 
    border-radius: var(--border-radius-medio, 10px); 
    margin-top: 3em;
    border: 2px dashed var(--epic-gold-main, #B8860B); 
}
.camino-cta-block .decorative-star-cta {
    width: 50px;
    height: 50px;
    margin: 0 auto 15px auto;
    opacity: 0.7;
}
.camino-cta-block p {
    font-size: clamp(1.1em, 2.3vw, 1.3em);
    color: var(--epic-purple-emperor); 
    margin-bottom: 1.5em;
}

/* Estilos para la página de historia.html y otras páginas internas (cabecera) */
/* These selectors target specific background images via inline styles, making h1/p larger */
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] h1 {
    /* font-size: clamp(2.8em, 7vw, 4.5em) !important; */
}
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"] p,
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] p {
    font-size: clamp(1.1em, 2.5vw, 1.5em) !important;
}

/* Estilos para el índice de personajes y bloques de contenido de página interna */
.page-content-block .intro-paragraph { /* Refinement for intro-paragraph within page-content-block */
    font-style: normal;
    border: none;
    background-color: transparent;
    padding: 0;
    margin-bottom: 2em;
}

.indice-categorias {
    list-style: none;
    padding: 0;
}
.indice-categorias li {
    margin-bottom: 2em;
    padding-bottom: 1.5em;
    border-bottom: 1px solid var(--color-piedra-media, #D2B48C); 
}
.indice-categorias li:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}
.indice-categorias h3 {
    font-size: clamp(1.5em, 3.5vw, 2em);
    color: var(--epic-purple-emperor); 
    margin-bottom: 0.8em;
    border-left: 4px solid var(--epic-gold-main, #B8860B); 
    padding-left: 15px;
}
.indice-categorias h3 i {
    margin-right: 10px;
    color: var(--epic-gold-main, #B8860B); 
}
.indice-personajes-lista {
    list-style: none;
    padding-left: 20px;
}
.indice-personajes-lista li {
    margin-bottom: 0.7em;
    border-bottom: none;
    padding-bottom: 0;
}
.indice-personajes-lista li::before {
    content: '';
    display: inline-block;
    width: 10px;
    height: 10px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 10px;
    opacity: 0.8;
}
.indice-personajes-lista li a {
    font-size: clamp(1em, 2vw, 1.15em);
    color: var(--color-texto-principal, #2c1d12); 
}
.indice-personajes-lista li a:hover {
    color: var(--epic-gold-main, #B8860B); 
}
.back-to-link {
    display: inline-block;
    margin-top: 2em;
    padding: 12px 25px;
    background-color: var(--epic-gold-main, #B8860B); 
    color: var(--epic-purple-emperor) !important; 
    border-radius: 25px;
    font-family: var(--font-headings); /* Use theme font */
    font-weight: bold;
    text-align: center;
    text-decoration: none;
    border: 2px solid var(--epic-purple-emperor); 
    transition: background-color var(--global-transition-speed) ease, color var(--global-transition-speed) ease, transform var(--global-transition-speed) ease; /* Standardized */
}
.back-to-link:hover {
    background-color: var(--epic-purple-emperor); 
    color: var(--color-acento-amarillo, #FFD700) !important; 
    text-decoration: none;
    transform: translateY(-2px);
}

/* Styles for Character Detail Pages */
.page-content-block.personaje-detail-content img.personaje-imagen-principal {
    max-width: 300px;
    margin: 1em auto 2em auto;
    border: 6px solid var(--color-piedra-media, #D2B48C); 
    border-radius: 50%;
    -o-object-fit: contain;
       object-fit: contain; /* Avoid cropping */
    height: 300px;
    background-color: var(--color-piedra-clara, #EAE0C8); 
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); 
}

.page-content-block.personaje-detail-content h2 {
    text-align: center;
    border-bottom: 3px solid var(--epic-gold-main, #B8860B); 
    padding-bottom: 0.4em;
    margin-top: 0;
    margin-bottom: 1.2em;
    font-size: clamp(1.9em, 4.5vw, 2.6em);
    color: var(--epic-purple-emperor); 
}
.page-content-block.personaje-detail-content h2::after {
    display: none !important;
}

.page-content-block.personaje-detail-content h3 {
    font-size: clamp(1.5em, 3.5vw, 2em);
    color: var(--epic-purple-emperor); 
    margin-top: 1.8em;
    margin-bottom: 0.8em;
    border-bottom: 1px solid var(--color-piedra-media, #D2B48C); 
    padding-bottom: 0.2em;
}


.page-content-block.personaje-detail-content p,
.page-content-block.personaje-detail-content ul {
    /* text-align: center; */ /* Let's see if left align looks better */
    margin-bottom: 1.6em;
    font-size: clamp(1.05em, 2.2vw, 1.18em);
    line-height: 1.85;
}
.page-content-block.personaje-detail-content ul {
    list-style-position: inside;
    padding-left: 0;
}
.page-content-block.personaje-detail-content ul li {
    margin-bottom: 0.7em;
    /* text-align: center; */ /* Let's see if left align looks better */
}

.page-header.hero[style*="hero_personajes_background.jpg"] .hero-content h1 {
    color: var(--epic-text-light);
    text-shadow: 2px 2px 8px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.75);
    /* font-size: clamp(2.8em, 6.5vw, 4.2em); */
}
.page-header.hero[style*="hero_personajes_background.jpg"] .hero-content p {
    font-size: clamp(1.1em, 2.3vw, 1.4em);
    color: var(--color-piedra-clara, #EAE0C8); 
}

.page-header-indice .hero-content h1 {
     color: var(--epic-text-light);
     text-shadow: 2px 2px 6px var(--color-negro-contraste, #1A1A1A); 
}


/* Estilos para la página de Alfoz */
.bibliografia-referencias {
    margin-top: 3em;
    padding-top: 2em;
    border-top: 1px solid var(--color-piedra-media, #D2B48C); 
}
.bibliografia-referencias h3 {
    font-size: clamp(1.4em, 3vw, 1.9em);
    margin-bottom: 0.8em;
}
.bibliografia-referencias ul, .bibliografia-referencias ol {
    padding-left: 25px; /* This will make items not centered */
    margin-bottom: 1.5em;
}
.bibliografia-referencias ul li, .bibliografia-referencias ol li {
    margin-bottom: 0.6em;
    font-size: clamp(0.9em, 1.8vw, 1em);
    color: var(--color-texto-secundario, #2c1d12); 
    text-align: left; /* Override global li centering */
}
.datos-historicos-alcazar {
    margin-top: 3em;
    padding: 20px;
    background-color: rgba(var(--color-piedra-arena-rgb, 200, 187, 174), 0.2); 
    border-left: 5px solid var(--epic-gold-main, #B8860B); 
    border-radius: var(--border-radius-suave, 5px); 
}
.datos-historicos-alcazar h3, .datos-historicos-alcazar h4 {
    margin-top: 0.5em;
}
.cita-latin {
    display: block;
    margin: 1em 0 1em 2em; /* Left margin will make it not centered */
    padding: 0.8em 1em;
    background-color: rgba(var(--color-piedra-clara-rgb,234,224,208), 0.5); 
    border-left: 3px solid var(--epic-gold-main, #B8860B); 
    font-style: italic;
    color: var(--color-texto-principal, #2c1d12); 
    font-size: 0.95em;
    text-align: left; /* Override global centering */
}

/* Estilos para la página de contacto */
.contact-section .container.page-content-block {
    /* Los estilos de .page-content-block ya se aplican */
}
.contact-info {
    text-align: center; /* Contact info block often looks good centered */
    margin-bottom: 40px;
    font-size: clamp(1em, 2.2vw, 1.15em);
}
.contact-info p {
    margin-bottom: 10px;
    text-align: center; /* Ensure paragraphs in contact-info remain centered */
}
.contact-info .email-link {
    font-weight: bold;
    color: var(--epic-purple-emperor); 
}
.contact-info .email-link:hover {
    color: var(--epic-gold-main, #B8860B); 
}

.contact-form-container {
    max-width: 700px;
    margin: 0 auto;
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.75) !important; 
    padding: 30px 40px;
    border-radius: var(--border-radius-medio, 10px); 
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); 
    border: 1px solid var(--color-piedra-media, #D2B48C); 
}
.contact-form-container h2 {
    text-align: center; /* Form title centered */
    margin-top: 0;
    margin-bottom: 30px;
}

.form-group {
    margin-bottom: 25px;
}

.form-group label {
    display: block;
    font-family: var(--font-headings); /* Use theme font */
    font-weight: 700;
    color: var(--epic-purple-emperor); 
    margin-bottom: 8px;
    font-size: 1.1em;
    text-align: left; /* Override global centering */
}
.form-group label i {
    margin-right: 8px;
    color: var(--epic-gold-main, #B8860B); 
}

.form-group input[type="text"],
.form-group input[type="email"],
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--color-piedra-media, #D2B48C); 
    border-radius: var(--border-radius-suave, 5px); 
    font-family: var(--font-primary); /* Use theme font */
    font-size: 1em;
    color: var(--color-texto-principal, #2c1d12); 
    background-color: rgba(var(--color-fondo-pagina-base-rgb, 253, 250, 246), 0.7); 
    transition: border-color var(--global-transition-speed) ease, box-shadow var(--global-transition-speed) ease; /* Standardized */
    text-align: left; /* Override global centering */
}
.form-group input[type="text"]:focus,
.form-group input[type="email"]:focus,
.form-group textarea:focus {
    border-color: var(--epic-gold-main, #B8860B);
    box-shadow: 0 0 0 3px rgba(var(--color-dorado-rgb, 184, 134, 11), 0.25);
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
    background-color: var(--color-fondo-pagina, #fdfaf6);
}

.form-group textarea {
    min-height: 150px;
    resize: vertical;
}

.submit-button { 
    width: 100%;
    margin-top: 10px;
}

/* Estilos para la página del Museo Colaborativo y Galería Colaborativa */
.upload-section .container.page-content-block, /* Uses .container, epic_theme uses .container-epic */
.museum-gallery-section .container.page-content-block, /* Uses .container */
.upload-section-galeria .container.page-content-block,  /* Uses .container */
.photo-gallery-section .container.page-content-block { /* Uses .container */
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.92); 
}

.upload-form-container {
    max-width: 750px;
    margin: 0 auto;
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.75) !important; 
    padding: 30px 40px;
    border-radius: var(--border-radius-medio, 10px); 
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); 
    border: 1px solid var(--color-piedra-media, #D2B48C); 
}
.upload-form-container h2 {
    text-align: center; /* Ensure form title is centered */
    margin-top: 0;
    margin-bottom: 30px;
}
.upload-form-container .form-group label i { /* Styles for icon in label */
    color: var(--epic-gold-main, #B8860B); 
}
.upload-form-container .submit-button {
    width: 100%;
    margin-top: 15px;
}
.preview-container img {
    max-height: 200px;
    margin: 0 auto 10px auto;
    border: 2px solid var(--color-piedra-media, #D2B48C); 
    border-radius: var(--border-radius-suave, 5px); 
    display: block;
}

.museum-gallery-grid {
}
.museum-piece-card img { /* This is a class on a .card, so .card img styles apply. This adds cursor & filter. */
    cursor: pointer;
    filter: grayscale(50%) sepia(25%) contrast(1.05) brightness(0.9);
}
.museum-piece-card:hover img { /* This overrides .card:hover img filter if more specific */
    filter: grayscale(0%) sepia(0%) contrast(1) brightness(1);
}
.museum-piece-card .piece-author {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); 
    margin-top: -10px;
    margin-bottom: 10px;
    text-align: center; /* Ensure centered if not inherited */
}
.museum-piece-card .piece-description {
    font-size: 0.95em;
    color: var(--color-texto-principal, #2c1d12); 
    text-align: center;
    min-height: 60px;
}
.no-pieces-message,
.no-photos-message {
    grid-column: 1 / -1;
    text-align: center;
    font-style: italic;
    color: var(--color-texto-secundario, #2c1d12); 
    padding: 40px;
}

/* Estilos específicos para la Galería de Fotos Colaborativa */
.photo-gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}
.photo-card {
    background-color: var(--color-fondo-pagina, #fdfaf6); 
    border: 1px solid var(--color-piedra-media, #D2B48C); 
    border-radius: var(--border-radius-suave, 5px); 
    box-shadow: var(--box-shadow-sutil, 0 4px 10px rgba(74, 13, 103, 0.07)); 
    overflow: hidden;
    transition: transform var(--global-transition-speed) ease, box-shadow var(--global-transition-speed) ease; /* Standardized */
    display: flex;
    flex-direction: column;
}
.photo-card:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); 
}
.photo-card img {
    width: 100%;
    height: auto;
    -o-object-fit: contain;
       object-fit: contain; /* Show complete photo */
    border-radius: var(--border-radius-suave, 5px) var(--border-radius-suave, 5px) 0 0; 
    margin: 0;
    cursor: pointer;
}
.photo-card-caption {
    padding: 15px;
    text-align: center; /* Captions often centered */
}
.photo-card-caption h4 {
    font-size: clamp(1.1em, 2.5vw, 1.4em);
    margin-top: 0;
    margin-bottom: 8px;
    color: var(--epic-purple-emperor); 
}
.photo-card-caption p {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); 
    margin-bottom: 5px;
    line-height: 1.4;
    /* text-align: center; */ /* Inherits from .photo-card-caption */
}
.photo-author-gallery {
    font-size: 0.8em !important;
    font-style: italic;
    color: var(--color-piedra-media, #D2B48C) !important; 
    margin-top: 5px;
    /* text-align: center; */ /* Inherits from .photo-card-caption */
}


/* Modal para imágenes */
.modal {
  display: none;
  position: fixed;
  z-index: 2000;
  padding-top: 50px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.92); 
}
.modal-content {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 750px;
  max-height: 85vh;
  animation-name: zoomModal;
  animation-duration: 0.5s;
  border: 5px solid var(--color-piedra-clara, #EAE0C8); 
  border-radius: var(--border-radius-suave, 5px); 
}
@keyframes zoomModal {
  from {transform:scale(0.8)}
  to {transform:scale(1)}
}
#modalCaption {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
  text-align: center;
  color: var(--color-piedra-clara, #EAE0C8); 
  padding: 15px 0;
  font-family: var(--font-headings); /* Use theme font */
  font-size: 1.2em;
}
.modal-close-button {
  position: absolute;
  top: 15px;
  right: 35px;
  color: var(--color-piedra-clara, #EAE0C8); 
  font-size: 40px;
  font-weight: bold;
  transition: color var(--global-transition-speed) ease; /* Standardized */
}
.modal-close-button:hover,
.modal-close-button:focus {
  color: var(--color-acento-amarillo, #FFD700); 
  text-decoration: none;
  cursor: pointer;
}

/* --- Styles for Content Subsections and Figures --- */
.content-subsection {
    margin-bottom: 3.5em;
    padding-bottom: 2em;
    border-bottom: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.3); 
}

.content-subsection:last-of-type {
    border-bottom: none;
    margin-bottom: 1em;
}

.content-subsection h3 {
    font-size: clamp(1.6em, 3.8vw, 2.2em);
    color: var(--epic-purple-emperor); 
    margin-bottom: 1em;
    padding-bottom: 0.3em;
    border-bottom: 2px solid var(--epic-gold-main, #B8860B); 
    display: inline-block;
    text-align: left; /* Override global h3 centering if needed for this context */
}

.content-subsection h3 i {
    margin-right: 12px;
    color: var(--epic-gold-main, #B8860B); 
}

.content-subsection p {
    font-size: clamp(1em, 2.2vw, 1.15em);
    line-height: 1.75;
    margin-bottom: 1.5em;
    text-align: left; /* Override global p centering for these subsections */
}

.content-subsection .image-gallery-intro { /* Already defined */
    margin-top: 1.5em;
    margin-bottom: 2em;
}

.content-subsection figure {
    margin: 1em auto; /* Centered figure */
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.5); 
    padding: 10px;
    border-radius: var(--border-radius-suave, 5px); 
    box-shadow: var(--box-shadow-sutil, 0 4px 10px rgba(74, 13, 103, 0.07)); 
    border: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.4); 
    max-width: -moz-fit-content;
    max-width: fit-content; /* Allow figure to shrink to image size if image is smaller */
}

.content-subsection figure img {
    border: none;
    margin-bottom: 0.5em;
    border-radius: var(--border-radius-suave, 5px); 
    display: block; /* Ensure img is block for centering within figure */
    margin-left: auto; /* Center image within figure */
    margin-right: auto; /* Center image within figure */
}

.content-subsection figcaption {
    font-size: clamp(0.85em, 1.8vw, 0.95em);
    text-align: center; /* Figcaptions are often centered */
    color: var(--color-texto-principal, #2c1d12); 
    font-style: italic;
    padding: 0.5em 0;
}

.page-content-block .content-subsection .image-gallery-intro img {
    /* This rule ensures images within a gallery inside a content subsection don't get double borders */
    border: none;
}

/* --- Styles for Comments Section --- */
#comments-section {
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.7); 
    padding: 25px;
    border-radius: var(--border-radius-suave, 5px); 
    margin-top: 2em;
}

#comments-section h3 {
    border-bottom: none;
    text-align: center; /* Comment section title centered */
}

#comments-section .contact-form-container { /* Re-using for comment form styling */
    box-shadow: none;
    border: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.3); 
}

.comment-item {
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.75) !important; 
    padding: 15px;
    border-radius: var(--border-radius-suave, 5px); 
    margin-bottom: 15px;
    border: 1px solid var(--color-piedra-media, #D2B48C); 
    box-shadow: var(--box-shadow-sutil, 0 4px 10px rgba(74, 13, 103, 0.07)); 
}

.comment-item p {
    margin-bottom: 0.5em;
    font-size: 1em;
    line-height: 1.6;
    text-align: left; /* Comments should be left-aligned */
}

.comment-item strong {
    color: var(--epic-purple-emperor); 
    font-family: var(--font-headings); /* Use theme font */
}

.comment-item small {
    font-size: 0.8em;
    color: var(--color-texto-secundario, #2c1d12); 
    display: block;
    text-align: right;
    margin-top: 5px;
}

/* --- Styles for Participation Sections (Share Story, Quiz, Gallery Promo) --- */
#share-story-section, #quiz-section, #gallery-promo-section {
    margin-top: 2.5em;
    padding-top: 1.5em;
}

#share-story-section h3, #quiz-section h3, #gallery-promo-section h3 {
    text-align: center; /* These titles also centered */
    border-bottom: none;
    margin-bottom: 1.2em;
}

.quiz-container {
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.75) !important; 
    padding: 20px;
    border-radius: var(--border-radius-suave, 5px); 
    border: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.4); 
}

.quiz-question {
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px dashed rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.3); 
}
.quiz-question:last-of-type {
    border-bottom: none;
    margin-bottom: 0;
}

.quiz-question p strong { /* Question text */
    font-family: var(--font-primary); /* Use theme font */
    color: var(--color-texto-principal, #2c1d12); 
    text-align: left; /* Ensure question text is left aligned */
    display: block; /* Make it block for alignment */
}

.quiz-options {
    list-style: none;
    padding: 0;
    margin: 10px 0 0 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.quiz-options button {
    display: block;
    width: 100%;
    padding: 10px 15px;
    font-family: var(--font-primary); /* Use theme font */
    font-size: 0.95em;
    background-color: var(--color-piedra-clara, #EAE0C8); 
    color: var(--color-texto-principal, #2c1d12); 
    border: 1px solid var(--color-piedra-media, #D2B48C); 
    border-radius: var(--border-radius-suave, 5px); 
    cursor: pointer;
    transition: background-color var(--global-transition-speed), color var(--global-transition-speed); /* Standardized */
    text-align: left;
}

.quiz-options button:hover:not(:disabled) {
    background-color: var(--epic-gold-main, #B8860B); 
    color: var(--epic-purple-emperor); 
}

.quiz-options button:disabled {
    cursor: not-allowed;
    opacity: 0.7;
}

#quiz-feedback {
    min-height: 20px;
    font-size: 1.1em;
    color: var(--epic-purple-emperor); 
    text-align: center;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}

#quiz-feedback.visible {
    opacity: 1;
    transform: translateY(0);
}

#gallery-promo-section .image-gallery-intro figure {
    border: 2px solid var(--color-piedra-clara, #EAE0C8); 
}
#gallery-promo-section .image-gallery-intro figcaption {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); 
}

/* --- Scroll Animation Styling --- */
/* For optimal use, JavaScript is recommended to add the '.is-visible' class
   when the element actually enters the viewport.
   JS can also be used to create staggered delays for multiple items. */
.animate-on-scroll {
    opacity: 0;
    transform: translateY(25px); /* Subtler entry */
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
    transition-delay: 0.1s; /* Quicker start */
}

.animate-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
}

/* --- Subtle Hover Effects for Figures in Content Subsections --- */
.content-subsection figure img {
    transition: transform var(--global-transition-speed) ease-in-out,
                box-shadow var(--global-transition-speed) ease-in-out,
                filter var(--global-transition-speed) ease-in-out; /* Standardized */
}

.content-subsection figure:hover img {
    transform: scale(1.05);
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); 
}

/* --- Styles from historia_ampliada_nuevo4.md <style> block (Embedded in page) --- */
/* These are highly specific to .article-content, so they should be fine. */
.article-content p {
    margin-bottom: 1em;
    line-height: 1.6;
    /* text-align: left; is default for p in epic_theme.css, so this is fine */
}
.article-content h3 {
    font-family: var(--font-headings); /* Matches --font-headings */
    color: var(--epic-gold-main, #B8860B); 
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    text-align: left; /* Overrides global centering */
}
.article-content h4 {
    font-family: var(--font-primary); /* Matches --font-primary */
    font-style: italic;
    color: var(--epic-purple-emperor); 
    margin-top: 1em;
    margin-bottom: 0.3em;
    text-align: left; /* Overrides global centering */
}
.article-content a {
    color: var(--epic-gold-main); /* This variable --color-acento-rojo is not in epic_theme. Needs to be added or mapped. Using epic-gold-main for now. */
    color: var(--epic-gold-main);
    text-decoration: underline;
}
.article-content a:hover {
    color: var(--epic-gold-main, #B8860B); 
}
/* --- End of styles from historia_ampliada_nuevo4.md <style> block --- */

/* --- Styles from inline attributes in historia_ampliada_nuevo4.md --- */
/* This creates a specific hero style for one page. */
.page-header.hero.hero-nuestra-historia-specific {
    background-image: linear-gradient(rgba(var(--epic-purple-emperor-rgb, 74, 13, 103), 0.7), rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.85)), url('/assets/img/cerezo_vista_aerea.jpg');
    min-height: 50vh;
}
/* --- End of styles from inline attributes in historia_ampliada_nuevo4.md --- */

/* The .section::before (dark overlay) is already defined.
   The spotlight will appear on top of the ::before overlay, but behind the .container-epic content.
   The ::before overlay opacity might need adjustment on sections with spotlight. */

.section.spotlight-active::after {
    content: '';
    position: absolute;
    inset: 0; /* Cover the entire section */
    background: radial-gradient(
        circle calc(var(--spotlight-size, 200px) * 1.5) at var(--spotlight-x, 50%) var(--spotlight-y, 50%),
        rgba(230, 240, 255, 0.35) 0%,       /* Light, slightly bluish-white center */
        rgba(200, 220, 255, 0.20) 30%, /* Light, slightly bluish-white haze */
        transparent 60%                                /* Fade out */
    );
    opacity: var(--spotlight-opacity, 0); /* Controlled by JS, default to 0 */
    pointer-events: none; /* Doesn't interfere with mouse events */
    transition: opacity var(--global-transition-speed) ease-out, background var(--global-transition-speed) ease-out;
    z-index: 1; /* Above ::before overlay, below .container-epic (which should have z-index:2 or higher) */
    border-radius: inherit;
}

/* Ensure content within section is above the spotlight */
.section > .container-epic {
    position: relative;
    z-index: 2; /* Content above spotlight and overlays */
    text-align: center;
}

/* Variables for JS to control the spotlight position and size */
:root {
    --epic-error-red: #D9534F; /* Default error red */
    --spotlight-x: 50%;
    --spotlight-y: 50%;
    --spotlight-size: 200px; /* Default size, can be changed by JS */
    --spotlight-opacity: 0; /* Default opacity, JS will change to 1 to show */
}

/* --- Museo 3D Container Styles --- */
.museo-3d-section { /* The <section> wrapping the 3D container */
    /* Uses .section base styles. Can add specific background or padding if needed */
    /* For example, to ensure it has a darker background for the 3D scene to pop: */
    background-image: linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.85), rgba(var(--epic-text-color-rgb), 0.9)), url('/assets/img/hero_default_background.jpg');
    color: var(--epic-text-light); /* Light text for titles/paragraphs in this section */
}

.museo-3d-section .container-epic h2, /* If using .container-epic inside */
.museo-3d-section .page-content-block h2 { /* If using .page-content-block inside */
    color: var(--epic-gold-main); /* Gold title for this section */
}
.museo-3d-section .container-epic p,
.museo-3d-section .page-content-block p {
    color: var(--epic-alabaster-medium); /* Lighter paragraph text */
}

#museo-3d-container {
    width: 100%; /* Full width of its parent container */
    min-height: 300px; /* Minimum height for small screens */
    height: 60vh; /* Responsive height based on viewport height */
    max-height: 700px; /* Maximum height to prevent it from becoming too large on tall screens */
    margin: 20px auto; /* Center it if parent is wider */
    background-color: #1a1a1a; /* Dark background for the canvas itself, can be overridden by renderer */
    border-radius: var(--global-border-radius);
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.5); /* Optional inner shadow */
    position: relative; /* For potential overlays or UI elements on top */
    overflow: hidden; /* Ensures canvas doesn't spill out if sized differently */
}

#museo-3d-container canvas { /* Styling the canvas generated by Three.js */
    display: block; /* Remove extra space below canvas */
    width: 100% !important; /* Ensure canvas fills container */
    height: 100% !important; /* Ensure canvas fills container */
}

/* --- Timeline Styles (Adapted from estilos_condado.css) --- */
.timeline-section { /* This class is on the <section> element */
    /* .section styling from epic_theme.css already applies background, padding etc. */
    /* We might want a specific background or overlay for timeline sections if different from default */
}

.timeline-section .container-epic { /* Ensure container within timeline section has appropriate styling */
    background-color: transparent; /* Override default semi-transparent alabaster if section itself has full bg */
    box-shadow: none;
    border: none;
    padding-top: 1em; /* Adjust padding as needed */
    padding-bottom: 1em;
}

.timeline-intro {
    text-align: center; /* Timeline intro text often centered */
    max-width: 75ch;
    margin-left: auto;
    margin-right: auto;
    font-size: clamp(1.1em, 2.3vw, 1.25em);
    margin-bottom: 3em;
    color: var(--epic-text-color); /* Ensure it uses theme text color */
    opacity: 0.9;
}

.timeline {
    list-style: none;
    padding: 0;
    margin: 0 auto;
    max-width: 800px;
    position: relative;
}

.timeline::before { /* The central line */
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 38px;
    width: 4px;
    background-color: var(--epic-gold-secondary); /* Gold line */
    border-radius: 2px;
    box-shadow: 0 0 8px rgba(var(--epic-gold-secondary-rgb), 0.5);
}

.timeline-item {
    position: relative;
    margin-bottom: 40px; /* Space between items */
    padding-left: 95px; /* Space for the icon */
}
.timeline-item:last-child {
    margin-bottom: 0;
}

.timeline-icon {
    position: absolute;
    left: 0;
    top: 0;
    width: 76px;
    height: 76px;
    background-color: var(--epic-alabaster-bg); /* Alabaster background for icon holder */
    border: 3px solid var(--epic-gold-main); /* Gold border */
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1; /* Above the timeline's central line */
    box-shadow: 0 0 18px rgba(var(--epic-gold-main-rgb), 0.4);
}

.timeline-icon img { /* Assuming the star image is used */
    width: 45px; /* Adjust size of star image */
    height: 45px;
    -o-object-fit: contain;
       object-fit: contain;
    border-radius: var(--global-border-radius); /* No border for the image itself if it's an icon */
    border: none;
    box-shadow: none;
    filter: drop-shadow(0 0 4px rgba(var(--epic-gold-main-rgb), 0.6));
    margin: 0;
}

.timeline-content {
    background-color: var(--epic-transparent-overlay-light); /* Semi-transparent alabaster */
    -webkit-backdrop-filter: blur(3px);
            backdrop-filter: blur(3px);
    padding: 20px 25px;
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    border: 1px solid var(--epic-gold-secondary);
    text-align: center; /* Timeline content block itself centered */
    /* text-align: center; */ /* Text within p will be left by default */
}

.timeline-content h3 {
    margin-top: 0;
    font-size: clamp(1.4em, 3vw, 1.9em); /* Slightly smaller than section titles */
    color: var(--epic-purple-emperor);
    margin-bottom: 0.6em;
}

.timeline-content p {
    font-size: clamp(0.95em, 1.8vw, 1.05em);
    color: var(--epic-text-color);
    opacity: 0.9;
    margin-bottom: 1em;
    /* text-align: center; is inherited */
}

.timeline-read-more { /* This is a link styled as a button */
    display: inline-block;
    font-size: 0.9em;
    font-weight: bold;
    font-family: var(--font-headings);
    color: var(--epic-gold-secondary);
    padding: 8px 15px;
    border: 1px solid var(--epic-gold-secondary);
    border-radius: 20px;
    transition: background-color var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
    margin-top: 0.5em;
}

.timeline-read-more:hover, .timeline-read-more:focus-visible {
    background-color: var(--epic-gold-secondary);
    color: var(--epic-alabaster-bg);
    text-decoration: none;
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* ============================================= */
/* == ESTANDARIZACIÓN DE ALINEACIÓN DE TEXTO == */
/* ============================================= */
/*
 * Regla para centrar titulares (h1-h6) y justificar párrafos (p)
 * dentro del contenedor principal (<main>) de cada página.
 * Esto unifica el diseño en todo el sitio.
*/
/*
main h1,
main h2,
main h3,
main h4,
main h5,
main h6 {
    text-align: center;
}

main p {
    text-align: justify;
}
*/
/* ===== Dark Mode Theme Variables ===== */
body.dark-mode {
    /* Alabaster colors remain unchanged in dark mode */
    --epic-text-color: #F0F0F0; /* Increased contrast */
    --epic-text-color-rgb: 240, 240, 240; /* Increased contrast */
    --epic-text-light: #D8D8D8; /* Lighter secondary text */
    --epic-text-light-rgb: 245,245,245;
    --epic-icon-color: #a0b8d8; /* Base blue-gray for icons */
    --epic-icon-hover: #87cefa; /* Light sky blue for icon hover */
    /* background-image is inherited from body::before via cascading */
    background-color: var(--epic-alabaster-bg); /* This will be the dark version of the variable */
    /* filter property is now on body.dark-mode::before */
    padding-top: calc(var(--menu-extra-offset) + var(--language-bar-offset));
}

body.dark-mode::before {
    content: ''; /* Must be redeclared for pseudo-elements in combined selectors if overriding */
    /* Inherits background-image, size, repeat, attachment, position from body::before */
    background-image: var(--alabaster-background-image); /* Ensure same alabaster backdrop */
    /* Only apply the dark mode specific filter */
    filter: grayscale(80%) brightness(85%); /* Original dark mode filter */
}

body.dark-mode h2,
body.dark-mode h3,
body.dark-mode h4,
body.dark-mode h5,
body.dark-mode h6 {
    color: var(--epic-text-color); /* Default dark mode heading color */
    text-shadow: 1px 1px 3px rgba(0,0,0, 0.5); /* Dark mode text shadow for smaller headings */
}

body.dark-mode h2,
body.dark-mode h3 {
    text-shadow: 1px 1px 3px rgba(0,0,0, 0.5); /* Dark mode text shadow for larger headings */
}

body.dark-mode h1 {
    text-shadow: 2px 2px 6px rgba(253,184,67,0.4);
    color: var(--epic-gold-main);
}

body.dark-mode h2 {
    color: var(--epic-gold-main); /* Changed from epic-gold-secondary for better contrast */
}

body.dark-mode p {
    text-shadow: 0 0 3px rgba(0, 0, 0, 0.6);
}

body.dark-mode .card,
body.dark-mode #overlay-content {
    background-color: var(--epic-alabaster-medium); /* Uses the dark mode version of --epic-alabaster-medium, e.g., #2a2f39 */
}

/* Smooth theme toggle transitions */
#theme-toggle {
    transition: color var(--global-transition-speed) ease-in-out,
                background-color var(--global-transition-speed) ease-in-out;
}

#theme-toggle i {
    transition: color var(--global-transition-speed) ease-in-out;
}

body.dark-mode #theme-toggle i {
    color: var(--epic-icon-color);
}

body.dark-mode #theme-toggle:hover i {
    color: var(--epic-icon-hover);
}

/* === IA Tools Menu === */
#ia-tools-menu {
    margin: 0;
    padding: 10px;
    border: 1px solid var(--epic-gold-secondary);
    background-color: var(--epic-alabaster-bg);
    box-shadow: var(--global-box-shadow-dark);
    border-radius: var(--global-border-radius);
    display: flex;
    flex-direction: column;
    gap: 8px;
}

#ia-tools-menu button {
    font-family: var(--font-headings);
    background-color: var(--epic-gold-main);
    color: var(--epic-purple-emperor);
    border: 1px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color var(--global-transition-speed);
}

#ia-tools-menu button:hover {
    background-color: var(--epic-gold-secondary);
}

/* === IA Tools Output Overlay === */
#ia-tools-output.ia-output {
    position: fixed;
    top: 10%;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    display: flex;
    justify-content: center;
    max-width: 600px;
    max-height: 80vh;
    overflow: auto;
    padding: 20px;
    background-color: var(--epic-alabaster-bg);
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-dark);
    z-index: 2000;
}

#ia-tools-output.hidden {
    display: none;
}

#ia-tools-output.dragging {
    opacity: 0.9;
    cursor: move;
}

#ia-tools-output .ia-output-close {
    position: absolute;
    top: 6px;
    right: 8px;
    background: none;
    border: none;
    color: var(--epic-text-color);
    font-size: 1.2em;
    cursor: pointer;
}

body.dark-mode #ia-tools-output .ia-output-close {
    color: var(--epic-icon-color);
}

body.dark-mode #ia-tools-output .ia-output-close:hover {
    color: var(--epic-icon-hover);
}

.db-warning {
    background-color: var(--epic-alabaster-bg);
    color: var(--epic-purple-emperor);
    border: 1px solid var(--epic-gold-secondary);
    padding: 10px;
    margin: 10px 0;
    border-radius: var(--global-border-radius);
}
/* Center all buttons across the site */
button, input[type="submit"], input[type="button"], .cta-button, .submit-button, .menu-item-button {
    display: block;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.66);
    color: var(--epic-alabaster-bg);
}

.menu-panel .menu-item-button {
    text-align: center;
}

/* --- Utility classes migrated from inline styles --- */
.error-page {
    text-align: center;
    padding: 4em 1em;
}

.ai-translation-box {
    padding: 15px;
    background-color: var(--epic-transparent-overlay-light);
    border: 1px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    margin-top: 10px;
}

.ai-translation-box p {
    font-size: 0.9em;
    color: var(--epic-purple-emperor);
}

.ai-translation-box .ai-note {
    font-size: 0.8em;
    color: var(--epic-purple-hover);
    margin-top: 10px;
}

.photo-preview {
    max-height: 200px;
    margin-bottom: 10px;
    border: 1px solid var(--epic-gold-secondary);
}

.intro-big {
    font-size: 1.2em;
    margin-top: 1em;
}

.preview-hidden {
    display: none;
}

.crosshair {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 6px;
    height: 6px;
    background-color: rgba(var(--epic-gold-main-rgb), 0.6);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 9998;
    pointer-events: none;
    display: none;
}

.pointer-lock-instructions {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--epic-purple-emperor-rgb), 0.85);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 20px;
    z-index: 10000;
    cursor: pointer;
}

.pointer-lock-instructions p {
    margin-top: 0.5em;
}

.hero-galeria {
    background-image: linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.75), rgba(var(--epic-alabaster-bg-rgb), 0.88)), url('/imagenes/hero_galeria_background.jpg');
}

.hero-museo {
    background-image: linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.75), rgba(var(--epic-alabaster-bg-rgb), 0.88)), url('/imagenes/hero_museo_background.jpg');
}

/* --- Notice and Utility Classes --- */
.notice-success {
    color: var(--epic-success-text);
    background-color: var(--epic-success-bg);
    border: 1px solid var(--epic-success-border);
    padding: 0.75em 1em;
    border-radius: var(--global-border-radius);
}

.notice-error {
    color: var(--epic-danger-text);
    background-color: var(--epic-danger-bg);
    border: 1px solid var(--epic-danger-border);
    padding: 0.75em 1em;
    border-radius: var(--global-border-radius);
}

/* Highlighted tool error messages */
.ia-tool-error {
    color: var(--epic-error-red, #D9534F);
    text-align: center;
}

.section-divider {
    margin-top: 30px;
    margin-bottom: 30px;
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px dashed var(--epic-neutral-border);
    border-bottom: 1px dashed var(--epic-neutral-border);
}

.section-divider-bottom {
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px dashed var(--epic-neutral-border);
}

.cta-large {
    padding: 12px 25px;
    font-size: 1.1em;
}

.my-30 {
    margin-top: 30px;
    margin-bottom: 30px;
}

.mt-20 {
    margin-top: 20px;
}

/* Additional spacing utilities */
.mt-25 { margin-top: 2.5em; }
.mb-25 { margin-bottom: 2.5em; }

/* Center introductory text blocks */
.intro-centered {
    text-align: center;
    margin: 0 auto 2em;
    max-width: 80ch;
}

/* Inline form layout */
.inline-form { display: inline; }

.hero-atapuerca {
    background-image: linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.55), rgba(var(--epic-purple-emperor-rgb), 0.55)), url('/assets/img/placeholder.jpg');
}

.language-selector {
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px dashed var(--epic-neutral-border);
}

.tags-container {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px dashed var(--epic-neutral-border);
}

/* ===== Luna Theme Variables ===== */
body.luna {
    --epic-purple-emperor: #1e3a8a; /* Replacing purple with deep blue */
    --epic-purple-emperor-rgb: 30, 58, 138;
    --epic-gold-main: #c0c0c0; /* Main silver tone */
    --epic-gold-main-rgb: 192, 192, 192;
    --epic-gold-secondary: #a9a9a9; /* Secondary silver */
    --epic-gold-secondary-rgb: 169, 169, 169;
    --global-box-shadow-light: 0 2px 8px rgba(30, 58, 138, 0.5);
    --global-box-shadow-medium: 0 5px 15px rgba(30, 58, 138, 0.5);
    --global-box-shadow-dark: 0 8px 25px rgba(30, 58, 138, 0.5);
    background-color: var(--epic-alabaster-bg);
    padding-top: calc(var(--menu-extra-offset) + var(--language-bar-offset));
}

body.luna::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: -1;
    background-image: var(--alabaster-background-image);
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: center center;
    filter: hue-rotate(200deg) brightness(90%);
}

body.luna .firefly {
    position: absolute;
    width: 3px;
    height: 3px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    animation: firefly 3s ease-in-out infinite;
    pointer-events: none;
}

@keyframes firefly {
    0% { opacity: 0; transform: translateY(0) scale(0.5); }
    50% { opacity: 1; transform: translateY(-15px) scale(1); }
    100% { opacity: 0; transform: translateY(-30px) scale(0.5); }
}
