@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Lora:ital,wght@0,400;0,700;1,400&display=swap');

:root {
    --epic-purple-emperor: #4A0D67;
    --epic-purple-emperor-rgb: 74, 13, 103;
    --epic-gold-main: #FFD700;
    --epic-gold-main-rgb: 255, 215, 0;
    --epic-gold-secondary: #B8860B;
    --epic-gold-secondary-rgb: 184, 134, 11;
    --epic-alabaster-bg: #EAEBF0; /* Cool greyish-white */
    --epic-alabaster-bg-rgb: 234, 235, 240; /* RGB for the new color */
    --epic-alabaster-medium: #D8D9E0; /* Derived from new --epic-alabaster-bg */
    --epic-alabaster-medium-rgb: 216, 217, 224; /* RGB for new medium alabaster */
    --epic-text-color: #2c1d12;
    --epic-text-color-rgb: 44, 29, 18;
    --epic-text-light: #EAE0C8;
    --epic-text-light-rgb: 234, 224, 208;

    --epic-transparent-overlay-dark: rgba(var(--epic-purple-emperor-rgb), 0.65);
    --epic-transparent-overlay-medium: rgba(var(--epic-purple-emperor-rgb), 0.45);
    --epic-transparent-overlay-light: rgba(var(--epic-alabaster-medium-rgb), 0.85);
    --epic-transparent-black-overlay: rgba(10, 10, 10, 0.75);

    --font-primary: 'Lora', serif;
    --font-headings: 'Cinzel', serif;

    --global-border-radius: 8px;
    --global-transition-speed: 0.3s;
    --global-box-shadow-light: 0 2px 8px rgba(var(--epic-text-color-rgb), 0.1);
    --global-box-shadow-medium: 0 5px 15px rgba(var(--epic-text-color-rgb), 0.15);
    --global-box-shadow-dark: 0 8px 25px rgba(var(--epic-text-color-rgb), 0.2);
    --alabaster-background-image: url('/assets/img/alabastro.jpg');
}

/* --- Global Reset & Box Sizing --- */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 100%;
    scroll-behavior: smooth;
}

/* --- Body Styling --- */
body {
    font-family: var(--font-primary);
    color: var(--epic-text-color);
    background-image: var(--alabaster-background-image);
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed; /* For parallax-like effect */
    background-position: center center;
    background-color: var(--epic-alabaster-bg); /* Fallback color */
    filter: grayscale(70%) brightness(110%) contrast(105%); /* Cooler, greyish tone for alabastro.jpg */
    line-height: 1.7;
    text-align: left; /* Default text alignment */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    animation: fadeInPage 0.7s ease-out forwards;
}

@keyframes fadeInPage {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Headings --- */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headings);
    color: var(--epic-purple-emperor);
    margin-top: 1.5em;
    margin-bottom: 0.8em;
    line-height: 1.3;
    font-weight: 700;
    text-wrap: balance; /* Improves text wrapping for titles */
}

h1 { font-size: clamp(2.8em, 6vw, 4.2em); }
h2 { font-size: clamp(2.2em, 5vw, 3.2em); color: var(--epic-gold-secondary); } /* Secondary gold for H2 for variety */
h3 { font-size: clamp(1.8em, 4vw, 2.5em); }
h4 { font-size: clamp(1.4em, 3.5vw, 2em); }
h5 { font-size: clamp(1.2em, 3vw, 1.7em); }
h6 { font-size: clamp(1em, 2.5vw, 1.4em); }

/* --- Paragraphs --- */
p {
    margin-bottom: 1.25em; /* Adjusted margin */
    max-width: 70ch; /* Limit width for readability, even if centered */
    /* margin-left: auto; and margin-right: auto; removed for default left align */
    text-shadow: 0 1px 2px rgba(var(--epic-alabaster-medium-rgb), 0.4); /* Subtle shadow for depth/readability */
}

/* --- Links --- */
a {
    color: var(--epic-gold-main);
    text-decoration: none;
    transition: color var(--global-transition-speed) ease-in-out, opacity var(--global-transition-speed) ease-in-out, letter-spacing var(--global-transition-speed) ease-in-out;
}

a:hover,
a:focus-visible {
    color: var(--epic-gold-secondary);
    opacity: 0.85;
    text-decoration: underline;
    letter-spacing: 0.25px;
}
a:focus-visible {
    outline: 2px solid var(--epic-gold-main);
    outline-offset: 2px;
}

/* --- Lists --- */
ul, ol {
    margin-bottom: 1.5em;
    padding-left: 1.5em; /* Standard padding for lists */
    list-style-position: outside; /* Standard marker position */
}

li {
    margin-bottom: 0.5em;
}

/* --- Images --- */
img {
    max-width: 100%;
    height: auto;
    display: block; /* Allows centering with margin auto */
    margin-left: auto;
    margin-right: auto;
    border-radius: var(--global-border-radius);
    margin-top: 1em;
    margin-bottom: 1em;
}

/* --- Tables --- */
table {
    width: 100%; /* Or a specific width like 80% and margin auto */
    margin: 2em auto;
    border-collapse: collapse;
    border: 1px solid var(--epic-purple-emperor);
    /* text-align: center; for td/th will be inherited or can be set explicitly */
}

th, td {
    border: 1px solid var(--epic-purple-emperor);
    padding: 0.75em 1em;
    /* text-align: center; is inherited from body */
}

th {
    background-color: var(--epic-transparent-overlay-medium); /* Purple transparent */
    color: var(--epic-text-light);
    font-family: var(--font-headings);
}

/* --- Basic Container (optional, can be expanded later) --- */
.container-epic {
    width: 90%;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    padding: clamp(1.5em, 3vw, 2.5em); /* Adjusted padding */
}

/* --- Helper class for forced left alignment if needed --- */
.text-left-override {
    text-align: left !important;
}
.text-left-override p,
.text-left-override li,
.text-left-override td,
.text-left-override div { /* Add other elements as needed */
    text-align: left !important;
    margin-left: 0; /* Reset margin-left for these cases if they used auto */
    margin-right: 0; /* Reset margin-right for these cases if they used auto */
}

/* --- Helper class for forced right alignment if needed --- */
.text-right-override {
    text-align: right !important;
}
.text-right-override p,
.text-right-override li,
.text-right-override td,
.text-right-override div {
    text-align: right !important;
    margin-left: 0;
    margin-right: 0;
}

/* --- Sidebar Navigation (#sidebar, #sidebar-toggle from _header.html) --- */
#sidebar {
    position: fixed;
    top: 0;
    left: -280px; /* Initial hidden state */
    width: 280px;
    height: 100vh;
    background-color: var(--epic-transparent-overlay-dark); /* Purple with transparency */
    backdrop-filter: blur(5px); /* Optional: frosted glass effect */
    padding: 25px 15px; /* Refined padding */
    box-shadow: 3px 0 15px rgba(var(--epic-text-color-rgb), 0.25);
    transition: left var(--global-transition-speed) ease-in-out;
    overflow-y: auto;
    z-index: 1001; /* High z-index */
    display: flex;
    flex-direction: column;
    border-right: 2px solid var(--epic-gold-secondary);
}

#sidebar.sidebar-visible {
    left: 0;
}

#sidebar-toggle {
    position: fixed;
    top: 15px;
    left: 15px;
    /* font-size: 1.8em; Removed as icon is no longer text */
    background-color: var(--epic-purple-emperor);
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    padding: 10px; /* Adjusted padding for icon */
    cursor: pointer;
    z-index: 1002; /* Above sidebar */
    transition: left var(--global-transition-speed) ease-in-out, background-color var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
    display: flex; /* For centering bars if needed, or for layout of bars */
    flex-direction: column;
    justify-content: space-around;
    width: 44px; /* Fixed width for consistency */
    height: 44px; /* Fixed height for consistency */
}

#sidebar-toggle .bar {
    display: block;
    width: 22px;
    height: 3px;
    background-color: var(--epic-gold-main); /* Default bar color */
    margin: 2px auto; /* Adjusted margin for tighter packing, auto for horizontal centering */
    transition: all 0.3s ease-in-out;
    border-radius: 1px;
}

#sidebar-toggle:hover .bar {
    background-color: var(--epic-purple-emperor); /* Bars turn purple when button is hovered (gold bg) */
}

#sidebar-toggle:hover {
    background-color: var(--epic-gold-main);
    /* color: var(--epic-purple-emperor); No longer needed for text icon */
}

/* Adjust toggle button position and icon animation when sidebar is visible */
body.sidebar-active #sidebar-toggle {
    left: 300px; /* sidebar width + desired offset */
}

body.sidebar-active #sidebar-toggle .bar:nth-child(1) {
    transform: translateY(7px) rotate(45deg); /* height (3px) + margin (4px from example, using 2px*2=4 + 3/2 for center = ~7) */
}
body.sidebar-active #sidebar-toggle .bar:nth-child(2) {
    opacity: 0;
}
body.sidebar-active #sidebar-toggle .bar:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
}

/* Ensure bars maintain correct color on hover when active (X shape) */
body.sidebar-active #sidebar-toggle:hover .bar {
    background-color: var(--epic-purple-emperor); /* Or whatever the X color should be on hover */
}


#sidebar .logo-link {
    display: block;
    /* text-align: center; */
    margin-bottom: 30px; /* Refined margin */
    padding: 10px 0;
}

#sidebar .logo-image {
    max-width: 80%;
    height: auto;
    border-radius: var(--global-border-radius);
    margin: 0 auto; /* Centering already handled by parent text-align and block display */
    border: 3px solid var(--epic-gold-secondary);
    background-color: var(--epic-alabaster-bg); /* Alabaster background for logo */
}

#sidebar .nav-links { /* Uses existing .nav-links class */
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Align items to the start for left text align */
    width: 100%;
}

#sidebar .nav-links li {
    width: 100%;
    margin-bottom: 8px;
}

#sidebar .nav-links a {
    display: block;
    padding: 12px 15px;
    color: var(--epic-text-light); /* Light text for dark sidebar */
    font-family: var(--font-headings);
    font-size: 1.1em;
    font-weight: 600;
    text-decoration: none;
    border-radius: var(--global-border-radius);
    transition: background-color var(--global-transition-speed) ease-in-out, color var(--global-transition-speed) ease-in-out, padding-left var(--global-transition-speed) ease-in-out;
    text-align: left; /* Explicitly left align sidebar links */
}

#sidebar .nav-links a:hover,
#sidebar .nav-links a:focus-visible,
#sidebar .nav-links a.active-link { /* active-link might need JS to set based on current page */
    background-color: var(--epic-gold-main);
    color: var(--epic-purple-emperor);
    padding-left: 25px; /* Indent on hover/active */
    outline: none;
}

#sidebar .nav-links a i { /* FontAwesome icons */
    margin-right: 10px;
    font-size: 1.1em;
    width: 20px; /* For alignment */
    text-align: center;
}

/* Main content adjustment when sidebar is active */
body.sidebar-active {
    margin-left: 280px; /* Match sidebar width */
    transition: margin-left var(--global-transition-speed) ease-in-out;
}

/* Hide standard navbar and its toggle if sidebar is the primary mobile nav */
@media (max-width: 768px) {
    .navbar .nav-toggle, /* Standard navbar toggle */
    .navbar .nav-links { /* Standard navbar links container */
        /* display: none !important; /* Assuming sidebar takes over */
    }
    /* If sidebar overlaps on mobile instead of pushing content */
    /* body.sidebar-active { margin-left: 0; } */
}


/* --- Footer Styling (.footer from _footer.html) --- */
.footer {
    background-color: var(--epic-purple-emperor);
    color: var(--epic-text-light);
    padding: 3em 1em 2em 1em; /* More padding */
    text-align: center; /* Footer content should generally be centered */
    border-top: 8px solid var(--epic-gold-main);
    position: relative;
    margin-top: 2em; /* Space above footer */
}

.footer::before { /* Optional decorative element */
    content: '';
    display: block;
    width: 60px;
    height: 60px;
    background-image: url('/assets/img/estrella.png'); /* Re-use existing star if appropriate */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: -60px auto 20px auto; /* Position it above the footer */
    position: relative;
    opacity: 0.5;
    filter: drop-shadow(0 0 5px var(--epic-gold-main));
}

.footer p {
    margin-bottom: 0.8em;
    font-size: clamp(0.9em, 1.8vw, 1em);
    color: var(--epic-alabaster-medium);
    text-align: center; /* Ensure paragraphs in footer remain centered */
}

.footer a {
    color: var(--epic-gold-main);
}
.footer a:hover, .footer a:focus-visible {
    color: var(--epic-alabaster-bg); /* Brighter gold on hover */
    text-decoration: underline;
}

.footer .social-links {
    margin-top: 1.5em;
}

.footer .social-links a {
    font-size: 1.8em; /* Larger icons */
    color: var(--epic-gold-secondary);
    margin: 0 12px;
    display: inline-block;
    transition: transform var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
}

.footer .social-links a:hover, .footer .social-links a:focus-visible {
    color: var(--epic-gold-main);
    transform: scale(1.2);
}

/* Style for social links that are placeholders (e.g., href="#") */
.footer .social-links a[href="#"] {
    opacity: 0.4;
    pointer-events: none; /* Make them non-interactive */
    filter: grayscale(90%);
    cursor: default;
}
.footer .social-links a[href="#"]:hover { /* Override hover effect for disabled links */
    transform: none;
    color: var(--epic-gold-secondary); /* Keep original color or a muted one */
}


/* --- Hero Sections (.hero, .page-header) --- */
.hero, .page-header {
    position: relative;
    width: 100%;
    background-size: cover;
    background-position: center center;
    display: flex; /* For centering content */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--epic-text-light); /* Light text for dark backgrounds */
    text-align: center; /* Hero section text should be centered */
    padding: clamp(3em, 10vh, 6em) 1em;
    border-bottom: 10px solid var(--epic-gold-main);
    overflow: hidden; /* Contain pseudo-elements */
    min-height: 50vh; /* Default min height for page headers */
}
/* Default background if no inline style is set - a purple gradient */
.hero, .page-header {
    background-image: linear-gradient(var(--epic-transparent-overlay-dark), var(--epic-transparent-black-overlay));
    background-color: var(--epic-purple-emperor); /* Fallback */
}

/* Specific hero for homepage */
.hero { /* This class is often used for the main homepage banner */
    min-height: 80vh; /* Taller for homepage hero */
}


/* Overlay for all hero/page-header sections to ensure text readability */
.hero::before, .page-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--epic-transparent-overlay-dark); /* Default dark purple overlay */
    z-index: 1; /* Below content, above background image */
}
/* If a specific background image is set via inline style, this ensures the overlay is still there */
[style*="background-image"]::before {
    background-color: var(--epic-transparent-overlay-dark); /* Ensure consistency */
}


.hero-content, .page-header .hero-content { /* .hero-content is a common inner wrapper */
    position: relative;
    z-index: 2; /* Above the overlay */
    max-width: 900px;
    background-color: var(--epic-transparent-black-overlay); /* Semi-transparent black for content box */
    padding: clamp(1.5em, 5vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-dark);
    border: 2px solid var(--epic-gold-secondary);
    text-align: center; /* Content within hero-content should be centered */
}

.hero-content h1, .page-header .hero-content h1 {
    font-size: clamp(2.5em, 7vw, 4.5em); /* Larger for hero titles */
    color: var(--epic-gold-main); /* Gold for main hero titles */
    text-shadow: 2px 2px 5px rgba(var(--epic-text-color-rgb), 0.7);
    margin-top: 0;
    margin-bottom: 0.4em;
}

.hero-content p, .page-header .hero-content p { /* Subtitles in hero */
    font-size: clamp(1.1em, 2.5vw, 1.5em);
    color: var(--epic-alabaster-bg);
    max-width: 65ch;
    margin: 0 auto 1em auto; /* Centering handled by parent */
    line-height: 1.6;
}

.hero-escudo { /* Specific to index.html hero */
    width: clamp(150px, 25vw, 220px);
    height: auto;
    margin-bottom: 1.5em; /* text-align:center on parent centers it */
    border: 5px solid var(--epic-gold-main);
    padding: 8px;
    background-color: var(--epic-transparent-overlay-dark);
    box-shadow: 0 0 20px var(--epic-gold-main), inset 0 0 15px rgba(var(--epic-text-color-rgb),0.4);
}

.cta-button { /* Call to Action button styling */
    display: inline-block;
    background-image: linear-gradient(145deg, var(--epic-gold-main), var(--epic-gold-secondary) 70%);
    color: var(--epic-purple-emperor);
    padding: clamp(1em, 2vh, 1.2em) clamp(2em, 4vw, 3em);
    font-size: clamp(1.1em, 2.5vw, 1.4em);
    font-family: var(--font-headings);
    font-weight: 700;
    border-radius: 50px; /* Pill shape */
    border: 2px solid var(--epic-purple-emperor);
    box-shadow: var(--global-box-shadow-medium), inset 0 -3px 5px rgba(var(--epic-text-color-rgb), 0.2);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--global-transition-speed) ease-in-out;
    margin-top: 1em;
}

.cta-button:hover, .cta-button:focus-visible {
    background-image: linear-gradient(145deg, var(--epic-purple-emperor), #380A54); /* Darker purple */
    color: var(--epic-gold-main);
    border-color: var(--epic-gold-main);
    transform: translateY(-3px) scale(1.03);
    box-shadow: var(--global-box-shadow-dark), inset 0 -2px 3px rgba(var(--epic-text-color-rgb), 0.1);
    outline: none;
}


/* --- Content Sections (.section, .page-content-block) --- */
.section {
    padding: clamp(3em, 8vh, 5em) 0;
    position: relative;
    background-image: var(--alabaster-background-image); /* Default alabaster texture for sections */
    background-size: cover;
    background-position: center center;
    background-attachment: local; /* Parallax within section, not fixed to viewport like body */
    z-index: 1;
    margin: 2em 0; /* Space between sections */
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-light);
    overflow: hidden; /* For pseudo-elements */
}

/* Dark overlay for sections with background images, to make content pop */
.section::before {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--epic-transparent-overlay-dark); /* Dark purple overlay */
    opacity: 0; /* Hidden by default, only show if .section has a specific bg image or class */
    transition: opacity var(--global-transition-speed) ease-out;
    z-index: 0;
    border-radius: inherit;
    pointer-events: none;
}
/* Activate overlay for sections that are likely to have a prominent background image */
.section.alternate-bg::before, /* Example class */
.section[style*="background-image"]::before { /* If section has inline background image */
    opacity: 1; /* Show the overlay */
}

/* Container within .section for actual content */
.section > .container-epic { /* Using the .container-epic defined in base styles */
    position: relative;
    z-index: 1; /* Above section's ::before overlay */
    background-color: var(--epic-transparent-overlay-light); /* Semi-transparent alabaster */
    backdrop-filter: blur(3px); /* Subtle blur for content background */
    padding: clamp(1.5em, 4vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    margin-top: 0; /* Reset if inside .section */
    margin-bottom: 0; /* Reset if inside .section */
}

.page-content-block { /* .page-content-block is another common content wrapper */
    position: relative;
    z-index: 1; /* Above section's ::before overlay */
    background-color: var(--epic-transparent-overlay-light); /* Semi-transparent alabaster */
    backdrop-filter: blur(3px); /* Subtle blur for content background */
    padding: clamp(1.5em, 4vw, 3em);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    margin-top: 2em; /* General margin for page-content-block */
    margin-bottom: 2em; /* General margin for page-content-block */
}

/* If a section has a specific background and we want its content container to be more opaque */
.section.alternate-bg > .container-epic,
.section[style*="background-image"] > .container-epic,
.page-content-block.dark-bg-content { /* Add this class if page-content-block is on a dark page bg */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.92); /* More opaque alabaster */
    /* Margins are already set by the general .page-content-block or .section > .container-epic rules.
       If specific overrides are needed for .dark-bg-content, they can be added here.
       The previous change that added margins here might have been too specific.
       Keeping the margin declaration here if .page-content-block.dark-bg-content needs different margins
       than the general .page-content-block. For now, let's assume it inherits or we want the 2em.
       If the 2em from the previous step on this specific selector was intentional and different from the
       general .page-content-block, then it should be preserved.
       Re-evaluating: the previous step DID add 2em here. The new general rule for .page-content-block also adds 2em.
       So, it's redundant for .page-content-block.dark-bg-content to also have it if it's the same.
       Let's remove the specific margin from .page-content-block.dark-bg-content here,
       as it will inherit from the new general .page-content-block rule.
    */
}


.section-title { /* Title for a section */
    text-align: center; /* Section titles are usually centered */
    font-size: clamp(2em, 5vw, 3em);
    margin-bottom: 1.5em;
    color: var(--epic-purple-emperor);
}
.section-title::after { /* Decorative element after section titles */
    content: '';
    display: block;
    width: 50px;
    height: 50px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: 20px auto 40px auto;
    opacity: 0.8;
    filter: drop-shadow(0 0 8px var(--epic-gold-main));
}

/* --- Cards (.card) --- */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2em; /* Increased gap */
    margin-top: 2em;
}

.card {
    background-color: var(--epic-alabaster-bg);
    border: 2px solid var(--epic-gold-secondary);
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    overflow: hidden;
    transition: transform var(--global-transition-speed) ease-in-out, box-shadow var(--global-transition-speed) ease-in-out;
    display: flex;
    flex-direction: column; /* For footer button alignment */
    text-align: center; /* Card content often centered */
}

.card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: var(--global-box-shadow-dark);
    border-color: var(--epic-gold-main);
}

.card img {
    width: 100%;
    height: 200px; /* Fixed height for card images */
    object-fit: cover; /* Crop images to fit */
    border-bottom: 4px solid var(--epic-gold-main);
    margin: 0 0 1em 0; /* Remove image's own margins, add space below */
    border-radius: 0; /* Image takes top radius from card */
    filter: sepia(30%) contrast(1.1) brightness(0.9); /* Subtle epic filter */
    transition: filter var(--global-transition-speed) ease-in-out, transform var(--global-transition-speed) ease-in-out;
}
.card:hover img {
    filter: sepia(10%) contrast(1) brightness(1);
    transform: scale(1.05);
}

.card-content {
    padding: 1.5em;
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allows button to stick to bottom */
    /* text-align: center; is inherited */
}

.card-content h3 {
    font-size: clamp(1.3em, 3vw, 1.7em);
    margin-top: 0;
    margin-bottom: 0.7em;
    color: var(--epic-purple-emperor);
}
.card-content h3::before { /* Small star before card titles */
    content: '';
    display: inline-block;
    width: 12px;
    height: 12px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    margin-right: 8px;
    opacity: 0.7;
    vertical-align: middle;
}

.card-content p {
    font-size: clamp(0.95em, 2vw, 1.05em);
    line-height: 1.6;
    color: var(--epic-text-color);
    margin-bottom: 1.2em;
    flex-grow: 1; /* Pushes button down */
}

.card-content .read-more { /* Button inside card */
    background-color: transparent;
    color: var(--epic-gold-secondary);
    border: 2px solid var(--epic-gold-secondary);
    padding: 0.6em 1.2em;
    font-size: 0.9em;
    font-weight: 700;
    font-family: var(--font-headings);
    text-transform: uppercase;
    border-radius: 20px;
    align-self: center; /* Center button */
    margin-top: auto; /* Stick to bottom */
    transition: background-color var(--global-transition-speed) ease-in-out, color var(--global-transition-speed) ease-in-out;
}

.card-content .read-more:hover, .card-content .read-more:focus-visible {
    background-color: var(--epic-gold-secondary);
    color: var(--epic-alabaster-bg); /* Light text on gold bg */
    text-decoration: none;
    outline: none;
}

/* --- View Switcher Buttons --- */
.view-switch-controls {
    /* Using .container class for width management if needed, or text-align: center; directly */
    /* text-align: center; is inherited from body but can be explicit */
    /* margin-bottom: 20px; already applied inline, can be moved here */
    /* padding-top: 20px; already applied inline, can be moved here */
}

.view-switch-button {
    /* Inherits from .cta-button, can add overrides or use a different base */
    padding: 0.8em 1.5em; /* Slightly smaller than main CTA */
    font-size: clamp(1em, 2.2vw, 1.2em); /* Adjust size */
    margin: 5px;
    letter-spacing: 0.5px;
    border-width: 2px; /* Ensure border width is consistent */
}

.view-switch-button:disabled {
    background-image: none; /* Remove gradient */
    background-color: var(--epic-alabaster-medium); /* Grey out */
    color: var(--epic-text-color);
    opacity: 0.6;
    cursor: not-allowed;
    border-color: var(--epic-alabaster-medium);
    transform: none; /* No hover effect */
    box-shadow: var(--global-box-shadow-light);
}

/* Initial hidden state for 3D museum */
#museo-3d-section {
    display: none; /* Hidden by default, JS will toggle */
}


/* --- Content from estilos.css Merged --- */

/*
   Variable Review Note: Variables from estilos.css like --color-primario-purpura,
   --color-secundario-dorado, etc., have been mapped to corresponding
   --epic-purple-emperor, --epic-gold-main/secondary etc. in the rules below where possible.
   Any unmapped variables from estilos.css that are critical for specific appended sections
   would need to be added to the :root definition in epic_theme.css.
   For now, :root from epic_theme.css is the primary source of variables.
*/

/* Global Resets and Base element styles from estilos.css were omitted as epic_theme.css covers them. */
/* Navbar styles from estilos.css were omitted as sidebar is used. */

/* --- Page Headers & Hero Sections (Styles from estilos.css, potentially conflicting/overlapping) --- */
/* The .page-header.hero rules from estilos.css are generally more specific due to image selectors or context. */
/* We assume epic_theme.css .hero and .page-header provide base styling, and these are overrides/extensions. */

.page-header.hero { /* This is a combined rule. epic_theme.css provides a base .page-header and .hero */
    /* Properties from estilos.css .page-header.hero */
    background-image:
        linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.8), rgba(var(--epic-text-color-rgb), 0.9)), /* Mapped to epic vars */
        url('/assets/img/hero_default_background.jpg');
    min-height: 45vh; /* This might override epic_theme.css min-height for .page-header */
    padding: clamp(60px, 15vh, 100px) 20px; /* This might override epic_theme.css padding for .page-header */
    border-bottom-width: 10px; /* This might override epic_theme.css border for .page-header */
    /* Other properties like color, text-align, display, justify-content, align-items are likely inherited or set by epic_theme.css base .hero/.page-header */
}
/* Specific background images from estilos.css page-headers. These are important. */
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"],
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"],
.page-header.hero[style*="/imagenes/hero_lugares_background.jpg"],
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"],
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"],
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"],
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"],
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"],
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"],
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] {
    /* No specific rules here, but the selectors imply these background images are set via inline styles */
}

.page-header.hero .hero-content { /* Compare with .hero-content in epic_theme.css */
    padding: clamp(25px, 4vw, 45px);
    background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.7);
}
.page-header.hero .hero-content h1 {
    font-size: clamp(2.5em, 6vw, 4em);
    margin-bottom: 0.3em;
}
.page-header.hero .hero-content p {
    font-size: clamp(1.05em, 2.2vw, 1.4em);
    margin-bottom: 0;
    color: var(--color-piedra-clara, #EAE0C8); /* Mapped to epic_theme var if possible, or add as new */
    text-shadow: 0 1px 5px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.7);
}
.page-header.hero .decorative-star-header {
    width: clamp(50px, 8vw, 70px);
    height: auto;
    margin: 0 auto 15px auto;
    opacity: 0.8;
    filter: drop-shadow(0 0 10px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.5)); /* Mapped to epic_theme var */
}

.decorative-star-header-highlighted { /* Specific for Cerezo de Rio Tiron header star */
    filter: drop-shadow(0 0 12px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.75)) !important;
    width: clamp(60px, 10vw, 80px) !important;
    margin-bottom: 20px !important;
}


/* --- Hero Section (Página de Inicio from estilos.css) --- */
/* This .hero style is specifically for the homepage as per estilos.css.
   epic_theme.css also has a .hero style. We need to ensure they don't conflict badly,
   or that the homepage hero takes precedence if it's more specific. */
.hero { /* This rule might conflict with epic_theme.css .hero. Consider namespacing if needed. */
    background-image:
        linear-gradient(rgba(var(--color-primario-purpura-rgb, 74, 13, 103), 0.82), rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.95)),
        url('/assets/img/hero_mis_tierras.jpg');
    background-color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    /* other properties like background-size, position, color, padding, text-align, border-bottom, min-height, display, flex-direction, justify-content, align-items, position, overflow are likely similar or need careful merge */
}

/* .hero-content from estilos.css - compare with .hero-content in epic_theme.css */
/* Styles for .hero-escudo, .hero h1, .hero p, .cta-button from estilos.css are appended.
   These are specific to the homepage hero design in estilos.css. */

.hero-content { /* This rule for .hero-content from estilos.css might conflict */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px;
    max-width: 950px;
    background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.85);
    padding: clamp(40px, 7vw, 70px);
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: 0 15px 50px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.6);
    position: relative;
    z-index: 1;
    border: 3px solid rgba(var(--color-dorado-rgb, 184, 134, 11), 0.6); /* Mapped */
}

.hero-escudo { /* This is from estilos.css, specific to its hero */
    width: clamp(180px, 30vw, 280px);
    height: auto;
    margin-bottom: 30px;
    animation: fadeInScaleUp 1.4s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    filter: drop-shadow(0px 12px 28px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.8));
    border: 7px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding: 10px;
    background-color: rgba(var(--color-primario-purpura-rgb, 74, 13, 103), 0.65);
    box-shadow: 0 0 25px rgba(var(--color-secundario-dorado, #B8860B), 0.7), inset 0 0 18px rgba(var(--color-negro-contraste-rgb,10,10,10),0.5);
}

@keyframes fadeInScaleUp {
    from { opacity: 0; transform: scale(0.5) translateY(50px) rotate(-5deg); }
    to { opacity: 1; transform: scale(1) translateY(0) rotate(0deg); }
}

.hero h1 { /* From estilos.css, for homepage hero */
    font-size: clamp(3.2em, 10vw, 6em);
    color: var(--color-alabastro, #fdfaf6); /* Mapped, though epic_theme uses --epic-gold-main for hero h1 */
    margin-top: 0;
    margin-bottom: 0.5em;
    text-shadow: 0 5px 15px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 1), 0 0 50px rgba(var(--color-acento-amarillo, #FFD700),0.95);
    line-height: 1.1;
    text-align: center;
}

.hero p { /* From estilos.css, for homepage hero */
    font-size: clamp(1.25em, 3.5vw, 1.9em);
    margin-bottom: 55px;
    color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
    text-shadow: 0 3px 20px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 1);
    line-height: 1.75;
    max-width: 50ch;
    text-align: center;
}

/* .cta-button from estilos.css - epic_theme.css also has .cta-button. Review needed. */
/* Appending estilos.css version for now. */
.cta-button {
    background-image: linear-gradient(145deg, var(--color-acento-amarillo, #FFD700), var(--color-secundario-dorado, #B8860B) 70%);
    color: var(--color-primario-purpura, #4A0D67);
    padding: clamp(20px, 3vh, 26px) clamp(50px, 8vw, 65px);
    font-size: clamp(1.3em, 3.5vw, 1.7em);
    font-weight: 700;
    border-radius: 50px;
    border: 3px solid var(--color-primario-purpura, #4A0D67);
    box-shadow: 0 8px 25px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.4), inset 0 -4px 6px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.25);
    text-transform: uppercase;
    letter-spacing: 1.8px;
    transition: all var(--global-transition-speed) cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Standardized */
    display: inline-block;
}

.cta-button:hover, .cta-button:focus-visible {
    background-image: linear-gradient(145deg, var(--color-primario-purpura, #4A0D67), #380A54);
    color: var(--color-acento-amarillo, #FFD700);
    border-color: var(--color-acento-amarillo, #FFD700);
    transform: translateY(-6px) scale(1.08);
    box-shadow: 0 16px 40px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.5), inset 0 -2px 3px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.1);
    outline: none;
}

.cta-button-small {
    padding: clamp(12px, 2vh, 18px) clamp(25px, 5vw, 45px);
    font-size: clamp(0.9em, 2.2vw, 1.2em);
    letter-spacing: 1.2px;
}
.cta-button-small:hover, .cta-button-small:focus-visible {
    /* Inherits from .cta-button hover */
}


/* --- Sección de Video --- */
.video-section {
    padding: clamp(60px, 10vh, 80px) 0;
}
.video-container {
    max-width: 1100px;
    margin: 25px auto;
    border: 8px solid var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)), 0 0 30px rgba(var(--color-alabastro-glow-rgb, 248, 245, 238), 0.25); /* Mapped */
    aspect-ratio: 16 / 9;
    overflow: hidden;
}
.video-container iframe {
    width: 100%;
    height: 100%;
    display: block;
}
.video-section h2 {
     margin-bottom: 45px;
     color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}

/* --- Secciones Generales con Efecto de Linterna (Spotlight) --- */
/* epic_theme.css has .section and .section.spotlight-active::after.
   estilos.css also has .section, .section::before (dark overlay), and .section::after (spotlight).
   Strategy: Use epic_theme.css's spotlight implementation. Omit .section::after from estilos.css.
   The .section::before for dark overlay from estilos.css will be kept if it provides a different or complementary effect.
*/
.section { /* This rule from estilos.css might conflict with .section in epic_theme.css */
    /* padding, position, background-image, size, position, attachment, z-index, border-radius, margin, box-shadow, overflow are common properties. */
    /* epic_theme.css .section already provides robust base styling. */
    /* The ::before overlay from estilos.css is different (multiply blend mode) and could be kept if that specific effect is desired. */
    /* However, epic_theme.css .section::before already provides a dark overlay, controlled by opacity. */
    /* To avoid conflicting overlays, we will rely on epic_theme.css .section::before and its .section.alternate-bg::before logic. */
    /* So, the .section::before from estilos.css (with mix-blend-mode) is removed. */
}

/* Spotlight effect from estilos.css (.section::after) was OMITTED during initial append to prefer epic_theme.css version. */

/*
   Container class: estilos.css uses .container, epic_theme.css uses .container-epic.
   The rule .section > .container from estilos.css is specific.
   epic_theme.css has .section > .container-epic.
   If pages use <section><div class="container"> (from estilos.css pattern), that rule will apply.
   If pages use <section><div class="container-epic"> (from epic_theme.css pattern), that rule will apply.
   This is acceptable for now, as they style different class names.
*/
.section > .container { /* This is from estilos.css, for pages using <div class="container"> directly in a section */
    position: relative;
    z-index: 1; /* Ensure content is above section's ::before if any */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.9); /* Mapped to epic var */
    padding: 30px;
    border-radius: var(--global-border-radius); /* Mapped to epic var */
    box-shadow: 0 0 15px rgba(var(--epic-text-color-rgb), 0.1); /* Mapped to epic var */
}


/* SECCIÓN DE INTRODUCCIÓN DETALLADA y Bloques de Contenido de Página Interna */
/* .detailed-intro-section .container uses .container, so the rule above applies. */
/* .page-content-block is defined in both. epic_theme.css provides a base. Appended styles from estilos.css are more specific. */
.detailed-intro-section .container,
.page-content-block {
    /* epic_theme.css .page-content-block provides base: bg, backdrop-filter, padding, border-radius, box-shadow */
    /* estilos.css version adds more specific background and padding, potentially overriding epic_theme.css */
    background-color: rgba(var(--epic-alabaster-bg-rgb), 0.96); /* Mapped & slightly more opaque */
    padding: clamp(30px, 5vw, 50px); /* Potentially different padding */
    border-radius: var(--global-border-radius); /* Mapped, should be consistent */
    box-shadow: var(--global-box-shadow-medium); /* Mapped, should be consistent */
    margin-top: 0;
    margin-bottom: 0;
}
.detailed-intro-section h2,
.page-content-block h2 {
    text-align: center;
    font-size: clamp(2.2em, 5.5vw, 3.2em);
    margin-bottom: 1.3em;
}
.detailed-intro-section p,
.page-content-block p {
    font-size: clamp(1.05em, 2.3vw, 1.2em);
    line-height: 1.85;
    /* text-align: center !important; */ /* Allowing left align from body now */
    margin-bottom: 1.6em;
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
}
.detailed-intro-section p:first-of-type,
.page-content-block .intro-paragraph {
    font-size: clamp(1.2em, 2.8vw, 1.4em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    font-style: italic;
    /* text-align: center; */ /* Allowing left align from body now, or specific centering if needed */
    border-left: 4px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    border-right: 4px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding: 0.7em 1.2em;
    background-color: rgba(var(--color-piedra-arena-rgb, 200, 187, 174), 0.15); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
}


.image-gallery-intro {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-top: 40px;
}
.image-gallery-intro img {
    border: 6px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); /* Mapped */
    transition: transform 0.4s ease-in-out, box-shadow 0.4s ease-in-out, filter 0.4s ease-in-out;
    margin: 0 auto;
}
.image-gallery-intro img:hover {
    transform: scale(1.08) rotate(-2deg);
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); /* Mapped */
    filter: sepia(50%) contrast(1.1) brightness(0.85);
}


.section.alternate-bg > .container::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 300px;
    height: 300px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transform: translate(-50%, -50%) rotate(15deg);
    z-index: -1;
    opacity: 0.06;
}


.section-title { /* epic_theme.css has .section-title too. Appending for now. */
    /* text-align: center; */ /* Already centered by previous rule */
    font-size: clamp(2.2em, 5.5vw, 3.2em);
    margin-bottom: 25px;
}

.section-title::after { /* epic_theme.css has .section-title::after too. Appending for now. */
    content: '';
    display: block;
    width: 55px;
    height: 55px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin: 30px auto 60px auto;
    position: relative;
    animation: pulseStar 3.8s infinite ease-in-out;
    filter: drop-shadow(0 0 8px rgba(var(--color-acento-amarillo-rgb, 255, 215, 0), 0.6)); /* Mapped */
}
@keyframes pulseStar {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
    50% { transform: scale(1.08) rotate(10deg); opacity: 1; }
}


/* --- Tarjetas (Cards) --- */
/* epic_theme.css has .card-grid and .card. estilos.css also has these. Appending for now. */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 40px;
}

.card {
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    border: 2px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: 8px 8px 0px -2px var(--color-piedra-media, #D2B48C), 16px 16px 28px rgba(var(--color-morado-emperador-rgb, 74, 13, 103), 0.18); /* Mapped */
    overflow: hidden;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
}

.card:hover {
    transform: translateY(-18px) translateX(-9px) rotate(1.5deg);
    box-shadow: 12px 12px 0px -2px var(--color-secundario-dorado, #B8860B), 22px 22px 35px rgba(var(--color-morado-emperador-rgb, 74, 13, 103), 0.25); /* Mapped */
}

.card img {
    border-bottom: 6px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    border-radius: var(--border-radius-medio, 10px) var(--border-radius-medio, 10px) 0 0; /* Mapped */
    filter: grayscale(70%) sepia(40%) contrast(1.1) brightness(0.85);
    transition: transform 0.45s cubic-bezier(0.165, 0.84, 0.44, 1), filter 0.45s ease-out;
    margin: 0;
    width: 100%;
}
.card:hover img {
    transform: scale(1.15);
    filter: grayscale(10%) sepia(10%) contrast(1.05) brightness(1);
}

.card-content { /* epic_theme.css has .card-content. Appending. */
    padding: 30px;
    /* text-align: center; */ /* Already centered by previous rule */
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}
.card-content h3::before { /* epic_theme.css has .card-content h3::before. Appending. */
    content: '';
    display: inline-block;
    width: 14px;
    height: 14px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 10px;
    vertical-align: middle;
    opacity: 0.75;
    transform: translateY(-2px) rotate(-12deg);
}


.card-content h3 { /* epic_theme.css has .card-content h3. Appending. */
    font-size: clamp(1.4em, 3vw, 1.8em);
    margin-bottom: 15px;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}

.card-content p { /* epic_theme.css has .card-content p. Appending. */
    font-size: clamp(1em, 2vw, 1.05em);
    line-height: 1.7;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped to --epic-text-color or similar */
    /* text-align: center; */ /* Inherits from .card-content */
    margin-bottom: 1.5em;
    flex-grow: 1;
}

.card-content .read-more { /* epic_theme.css has .card-content .read-more. Appending. */
    background-color: transparent;
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    border: 2px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding: 10px 20px;
    font-size: 0.9em;
    font-weight: 700;
    margin-top: auto;
    align-self: center;
    text-decoration: none;
}
.card-content .read-more:hover, .card-content .read-more:focus-visible {
    background-color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    text-decoration: none;
    outline: none;
}

/* --- Sección de Inmersión --- */
.immersion-section {
    background-color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    color: var(--color-alabastro, #fdfaf6); /* Mapped */
    padding: clamp(60px, 12vh, 100px) 20px;
    background-image:
        linear-gradient(rgba(var(--color-primario-purpura-rgb, 74, 13, 103),0.92), rgba(var(--color-primario-purpura-rgb, 74, 13, 103),0.97)),
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.04) 10px,
            rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.04) 20px
        );
    filter: none !important;
    margin: 30px 0;
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
}
.immersion-section::before {
    opacity: 0 !important;
}
.immersion-section::after {
    opacity: 0 !important;
}


.immersion-section h2 {
    color: var(--color-acento-amarillo, #FFD700); /* Mapped */
    font-size: clamp(2em, 5vw, 3em);
}
.immersion-section p {
    font-size: clamp(1.15em, 2.8vw, 1.5em);
    max-width: 850px;
    line-height: 1.7;
    /* text-align: center; */ /* Centered by .immersion-section */
}
.immersion-section .cta-button { /* Styles for CTA button within immersion section */
    background-image: linear-gradient(to bottom, var(--color-acento-amarillo, #FFD700), var(--color-secundario-dorado, #B8860B));
    color: var(--color-primario-purpura, #4A0D67);
    border-color: var(--color-alabastro, #fdfaf6);
}
.immersion-section .cta-button:hover, .immersion-section .cta-button:focus-visible {
    background-image: linear-gradient(to bottom, var(--color-alabastro, #fdfaf6), #e0dccc);
    color: var(--color-morado-emperador, #4A0D67); /* Mapped */
    border-color: var(--color-morado-emperador, #4A0D67); /* Mapped */
    outline: none;
}

/* --- Estilos para la Línea de Tiempo (Timeline) --- */
/* --- Estilos para la Línea de Tiempo (Timeline) --- */
/* Both files have extensive timeline styling. epic_theme.css's version is kept as primary.
   The version from estilos.css is very similar. Key differences might be variable names (mapped)
   or minor cosmetic tweaks. For simplicity, we're relying on epic_theme.css's timeline styles.
   If specific features from estilos.css timeline are missing, they would need to be merged granularly.
   The general ul, ol, li text-align:center from estilos.css is a broad change and might be undesirable
   globally if epic_theme.css has other list styles. It's better to apply text-align:center specifically where needed.
*/
/*
.timeline-section { ... } // from estilos.css - omitted
.timeline-intro { ... } // from estilos.css - epic_theme.css has its own
.timeline { ... } // from estilos.css - epic_theme.css has its own
ul, ol { list-style-position: inside; padding-left: 0; } // Broader rule from estilos.css, potentially unwanted globally
ul li, ol li { text-align: center; } // Broader rule from estilos.css
.timeline::before { ... } // from estilos.css - epic_theme.css has its own
.timeline-item { ... } // from estilos.css - epic_theme.css has its own
.timeline-icon { ... } // from estilos.css - epic_theme.css has its own
.timeline-icon img { ... } // from estilos.css - epic_theme.css has its own
.timeline-content { ... } // from estilos.css - epic_theme.css has its own
.timeline-content h3 { ... } // from estilos.css - epic_theme.css has its own
.timeline-content p { ... } // from estilos.css - epic_theme.css has its own
.timeline-read-more { ... } // from estilos.css - epic_theme.css has its own
.timeline-read-more:hover { ... } // from estilos.css - epic_theme.css has its own
*/

/* --- Footer --- */
/* Both files have .footer styles. epic_theme.css's version is primary.
   estilos.css version has a different ::before pseudo-element and some different padding/border.
   For consistency, we'll rely on epic_theme.css .footer.
   If the specific ::before from estilos.css is desired, it would need careful merging.
*/
/*
.footer { ... } // from estilos.css - omitted
.footer::before { ... } // from estilos.css - omitted
.footer p { ... } // from estilos.css - omitted
.footer a { ... } // from estilos.css - omitted
.footer a:focus-visible { ... } // from estilos.css - omitted
.footer a:hover { ... } // from estilos.css - omitted
.footer .social-links { ... } // from estilos.css - omitted
.footer .social-links a { ... } // from estilos.css - omitted
.footer .social-links a:hover, .footer .social-links a:focus-visible { ... } // from estilos.css - omitted
*/


/* --- Responsive Design (Media Queries from estilos.css) --- */
/* Appending media queries from estilos.css. These should be placed after epic_theme.css's base styles and its own media queries. */
/* Any conflicting rules within these media queries will be resolved by source order (later rules override earlier ones). */
@media (max-width: 768px) {
    /* Styles for .hero-content, .hero-escudo, .hero h1, .hero p for responsive hero (from estilos.css) */
    /* These are more specific to the homepage hero from estilos.css and should apply there. */
    .hero-content {
        padding: 20px;
    }
    .hero-escudo {
        width: clamp(150px, 35vw, 200px);
    }
    .hero h1 { font-size: clamp(2.4em, 7vw, 3.5em); }
    .hero p { font-size: clamp(1.05em, 3.5vw, 1.4em); max-width: 90%;}

    .detailed-intro-section p { text-align: center !important; }
    .section-title::after { width: 40px; height: 40px; margin: 20px auto 35px auto; }

    /* Timeline responsive from estilos.css */
    .timeline::before { left: 20px; }
    .timeline-item { padding-left: 60px; margin-bottom: 40px; }
    .timeline-icon { width: 40px; height: 40px; left: 0; }
    .timeline-icon img { width: 60%; height: 60%; }

    /* Sidebar responsive styles from estilos.css (already somewhat covered by epic_theme.css sidebar styles) */
    /* .navbar, .nav-toggle from estilos.css related to old navbar are omitted */
    #sidebar .nav-links { /* This is from estilos.css, might conflict with epic_theme sidebar nav links */
        /* max-height: none; */ /* This conflicts with how old nav-links were toggled */
        /* overflow: visible; */
    }
    #sidebar .nav-links a { /* Styles for sidebar links from estilos.css */
        /* color: var(--color-piedra-clara); Ensure this is consistent */
    }
}
@media (max-width: 480px) {
    /* Styles for .hero h1, .hero p, .cta-button, .detailed-intro-section h2, .section-title, .card-content, .section-title::after, .footer::before from estilos.css */
    .hero h1 { font-size: clamp(2.2em, 10vw, 3em); }
    .hero p { font-size: clamp(1em, 4vw, 1.2em); }
    .cta-button { padding: 15px 30px; font-size: clamp(1em, 4vw, 1.2em); }
    .detailed-intro-section h2, .section-title { font-size: clamp(1.8em, 6vw, 2.5em); }
    .card-content { padding: 20px; }
    .section-title::after { width: 35px; height: 35px; }
    .footer::before { width: 50px; height: 50px; margin: -80px auto 20px auto; }
}

/* --- Page Specific Styles from estilos.css --- */

/* Estilos para la página de Camino de Santiago */
.camino-content-block {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    align-items: center;
    margin-bottom: 3em;
}
.camino-content-block.reverse {
    flex-direction: row-reverse;
}
.camino-text {
    flex: 1;
    min-width: 300px;
}
.camino-text p {
    /* text-align: center; */ /* Will be left by default */
    font-size: clamp(1em, 2.1vw, 1.15em);
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
}
.camino-image {
    flex: 1;
    min-width: 280px;
    /* text-align: center; */ /* Images are block centered with margin auto */
}
.camino-image img {
    border: 4px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); /* Mapped */
    max-width: 100%;
    margin: 1em auto;
}
.camino-image .image-caption {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
    font-style: italic;
    margin-top: 0.8em;
}
.camino-image .image-caption i {
    margin-right: 6px;
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}

.camino-cta-block {
    /* text-align: center; */ /* Centered by .camino-cta-block */
    padding: 30px;
    background-color: rgba(var(--color-piedra-clara-rgb, 234, 224, 208), 0.3); /* Mapped */
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    margin-top: 3em;
    border: 2px dashed var(--color-secundario-dorado, #B8860B); /* Mapped */
}
.camino-cta-block .decorative-star-cta {
    width: 50px;
    height: 50px;
    margin: 0 auto 15px auto;
    opacity: 0.7;
}
.camino-cta-block p {
    font-size: clamp(1.1em, 2.3vw, 1.3em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    margin-bottom: 1.5em;
}

/* Estilos para la página de historia.html y otras páginas internas (cabecera) */
/* These selectors target specific background images via inline styles, making h1/p larger */
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"] h1,
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] h1 {
    font-size: clamp(2.8em, 7vw, 4.5em) !important;
}
.page-header.hero[style*="/imagenes/hero_historia_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_alfoz_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_personajes_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_camino_santiago.jpg"] p,
.page-header.hero[style*="/imagenes/hero_cultura_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_visitas_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_contacto_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_museo_background.jpg"] p,
.page-header.hero[style*="/imagenes/hero_galeria_background.jpg"] p {
    font-size: clamp(1.1em, 2.5vw, 1.5em) !important;
}

/* Estilos para el índice de personajes y bloques de contenido de página interna */
/* .page-content-block is already styled by epic_theme.css and earlier in this merge */
.page-content-block .intro-paragraph { /* Refinement for intro-paragraph within page-content-block */
    font-style: normal;
    border: none;
    background-color: transparent;
    padding: 0;
    margin-bottom: 2em;
}

.indice-categorias {
    list-style: none;
    padding: 0;
}
.indice-categorias li {
    margin-bottom: 2em;
    padding-bottom: 1.5em;
    border-bottom: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
}
.indice-categorias li:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}
.indice-categorias h3 {
    font-size: clamp(1.5em, 3.5vw, 2em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    margin-bottom: 0.8em;
    border-left: 4px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding-left: 15px;
}
.indice-categorias h3 i {
    margin-right: 10px;
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}
.indice-personajes-lista {
    list-style: none;
    padding-left: 20px;
}
.indice-personajes-lista li {
    margin-bottom: 0.7em;
    border-bottom: none;
    padding-bottom: 0;
}
.indice-personajes-lista li::before {
    content: '';
    display: inline-block;
    width: 10px;
    height: 10px;
    background-image: url('/assets/img/estrella.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 10px;
    opacity: 0.8;
}
.indice-personajes-lista li a {
    font-size: clamp(1em, 2vw, 1.15em);
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
}
.indice-personajes-lista li a:hover {
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}
.back-to-link {
    display: inline-block;
    margin-top: 2em;
    padding: 12px 25px;
    background-color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    color: var(--color-primario-purpura, #4A0D67) !important; /* Mapped */
    border-radius: 25px;
    font-family: "Cinzel", serif; /* Use theme font */
    font-weight: bold;
    text-align: center;
    text-decoration: none;
    border: 2px solid var(--color-primario-purpura, #4A0D67); /* Mapped */
    transition: background-color var(--global-transition-speed) ease, color var(--global-transition-speed) ease, transform var(--global-transition-speed) ease; /* Standardized */
}
.back-to-link:hover {
    background-color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    color: var(--color-acento-amarillo, #FFD700) !important; /* Mapped */
    text-decoration: none;
    transform: translateY(-2px);
}

/* Styles for Character Detail Pages */
.page-content-block.personaje-detail-content img.personaje-imagen-principal {
    max-width: 300px;
    margin: 1em auto 2em auto;
    border: 6px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    border-radius: 50%;
    object-fit: cover;
    height: 300px;
    background-color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); /* Mapped */
}

.page-content-block.personaje-detail-content h2 {
    text-align: center;
    border-bottom: 3px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    padding-bottom: 0.4em;
    margin-top: 0;
    margin-bottom: 1.2em;
    font-size: clamp(1.9em, 4.5vw, 2.6em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}
.page-content-block.personaje-detail-content h2::after {
    display: none !important;
}

.page-content-block.personaje-detail-content h3 {
    font-size: clamp(1.5em, 3.5vw, 2em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    margin-top: 1.8em;
    margin-bottom: 0.8em;
    border-bottom: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    padding-bottom: 0.2em;
}


.page-content-block.personaje-detail-content p,
.page-content-block.personaje-detail-content ul {
    /* text-align: center; */ /* Let's see if left align looks better */
    margin-bottom: 1.6em;
    font-size: clamp(1.05em, 2.2vw, 1.18em);
    line-height: 1.85;
}
.page-content-block.personaje-detail-content ul {
    list-style-position: inside;
    padding-left: 0;
}
.page-content-block.personaje-detail-content ul li {
    margin-bottom: 0.7em;
    /* text-align: center; */ /* Let's see if left align looks better */
}

.page-header.hero[style*="hero_personajes_background.jpg"] .hero-content h1 {
    color: #fff;
    text-shadow: 2px 2px 8px rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.75);
    font-size: clamp(2.8em, 6.5vw, 4.2em);
}
.page-header.hero[style*="hero_personajes_background.jpg"] .hero-content p {
    font-size: clamp(1.1em, 2.3vw, 1.4em);
    color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
}

.page-header-indice .hero-content h1 {
     color: #fff;
     text-shadow: 2px 2px 6px var(--color-negro-contraste, #1A1A1A); /* Mapped */
}


/* Estilos para la página de Alfoz */
.bibliografia-referencias {
    margin-top: 3em;
    padding-top: 2em;
    border-top: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
}
.bibliografia-referencias h3 {
    font-size: clamp(1.4em, 3vw, 1.9em);
    margin-bottom: 0.8em;
}
.bibliografia-referencias ul, .bibliografia-referencias ol {
    padding-left: 25px; /* This will make items not centered */
    margin-bottom: 1.5em;
}
.bibliografia-referencias ul li, .bibliografia-referencias ol li {
    margin-bottom: 0.6em;
    font-size: clamp(0.9em, 1.8vw, 1em);
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
    text-align: left; /* Override global li centering */
}
.datos-historicos-alcazar {
    margin-top: 3em;
    padding: 20px;
    background-color: rgba(var(--color-piedra-arena-rgb, 200, 187, 174), 0.2); /* Mapped */
    border-left: 5px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
}
.datos-historicos-alcazar h3, .datos-historicos-alcazar h4 {
    margin-top: 0.5em;
}
.cita-latin {
    display: block;
    margin: 1em 0 1em 2em; /* Left margin will make it not centered */
    padding: 0.8em 1em;
    background-color: rgba(var(--color-piedra-clara-rgb,234,224,208), 0.5); /* Mapped */
    border-left: 3px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    font-style: italic;
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
    font-size: 0.95em;
    text-align: left; /* Override global centering */
}

/* Estilos para la página de contacto */
.contact-section .container.page-content-block {
    /* Los estilos de .page-content-block ya se aplican */
}
.contact-info {
    text-align: center; /* Contact info block often looks good centered */
    margin-bottom: 40px;
    font-size: clamp(1em, 2.2vw, 1.15em);
}
.contact-info p {
    margin-bottom: 10px;
    text-align: center; /* Ensure paragraphs in contact-info remain centered */
}
.contact-info .email-link {
    font-weight: bold;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}
.contact-info .email-link:hover {
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}

.contact-form-container {
    max-width: 700px;
    margin: 0 auto;
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    padding: 30px 40px;
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); /* Mapped */
    border: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
}
.contact-form-container h2 {
    text-align: center; /* Form title centered */
    margin-top: 0;
    margin-bottom: 30px;
}

.form-group {
    margin-bottom: 25px;
}

.form-group label {
    display: block;
    font-family: var(--font-titulos); /* Use theme font */
    font-weight: 700;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    margin-bottom: 8px;
    font-size: 1.1em;
    text-align: left; /* Override global centering */
}
.form-group label i {
    margin-right: 8px;
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}

.form-group input[type="text"],
.form-group input[type="email"],
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    font-family: var(--font-principal); /* Use theme font */
    font-size: 1em;
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
    background-color: rgba(var(--color-fondo-pagina-base-rgb, 253, 250, 246), 0.7); /* Mapped */
    transition: border-color var(--global-transition-speed) ease, box-shadow var(--global-transition-speed) ease; /* Standardized */
    text-align: left; /* Override global centering */
}
.form-group input[type="text"]:focus,
.form-group input[type="email"]:focus,
.form-group textarea:focus {
    border-color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    box-shadow: 0 0 0 3px rgba(var(--color-dorado-rgb, 184, 134, 11), 0.25); /* Mapped */
    outline: none;
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Mapped */
}

.form-group textarea {
    min-height: 150px;
    resize: vertical;
}

.submit-button { /* This class is used by .cta-button, so styling might be inherited or conflict. */
    width: 100%;
    margin-top: 10px;
}

/* Estilos para la página del Museo Colaborativo y Galería Colaborativa */
.upload-section .container.page-content-block, /* Uses .container, epic_theme uses .container-epic */
.museum-gallery-section .container.page-content-block, /* Uses .container */
.upload-section-galeria .container.page-content-block,  /* Uses .container */
.photo-gallery-section .container.page-content-block { /* Uses .container */
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.92); /* Mapped */
}

.upload-form-container {
    max-width: 750px;
    margin: 0 auto;
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    padding: 30px 40px;
    border-radius: var(--border-radius-medio, 10px); /* Mapped */
    box-shadow: var(--box-shadow-elevado, 0 10px 35px rgba(10, 10, 10, 0.2)); /* Mapped */
    border: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
}
.upload-form-container h2 {
    text-align: center; /* Ensure form title is centered */
    margin-top: 0;
    margin-bottom: 30px;
}
.upload-form-container .form-group label i { /* Styles for icon in label */
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}
.upload-form-container .submit-button {
    width: 100%;
    margin-top: 15px;
}
.preview-container img {
    max-height: 200px;
    margin: 0 auto 10px auto;
    border: 2px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    display: block;
}

.museum-gallery-grid {
    /* Los estilos de .card-grid ya se aplican from epic_theme.css or earlier estilos.css merge */
}
.museum-piece-card img { /* This is a class on a .card, so .card img styles apply. This adds cursor & filter. */
    cursor: pointer;
    filter: grayscale(50%) sepia(25%) contrast(1.05) brightness(0.9);
}
.museum-piece-card:hover img { /* This overrides .card:hover img filter if more specific */
    filter: grayscale(0%) sepia(0%) contrast(1) brightness(1);
}
.museum-piece-card .piece-author {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
    margin-top: -10px;
    margin-bottom: 10px;
    text-align: center; /* Ensure centered if not inherited */
}
.museum-piece-card .piece-description {
    font-size: 0.95em;
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
    text-align: center;
    min-height: 60px;
}
.no-pieces-message,
.no-photos-message {
    grid-column: 1 / -1;
    text-align: center;
    font-style: italic;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
    padding: 40px;
}

/* Estilos específicos para la Galería de Fotos Colaborativa */
.photo-gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}
.photo-card {
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    border: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    box-shadow: var(--box-shadow-sutil, 0 4px 10px rgba(74, 13, 103, 0.07)); /* Mapped */
    overflow: hidden;
    transition: transform var(--global-transition-speed) ease, box-shadow var(--global-transition-speed) ease; /* Standardized */
    display: flex;
    flex-direction: column;
}
.photo-card:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); /* Mapped */
}
.photo-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: var(--border-radius-suave, 5px) var(--border-radius-suave, 5px) 0 0; /* Mapped */
    margin: 0;
    cursor: pointer;
}
.photo-card-caption {
    padding: 15px;
    text-align: center; /* Captions often centered */
}
.photo-card-caption h4 {
    font-size: clamp(1.1em, 2.5vw, 1.4em);
    margin-top: 0;
    margin-bottom: 8px;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}
.photo-card-caption p {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
    margin-bottom: 5px;
    line-height: 1.4;
    /* text-align: center; */ /* Inherits from .photo-card-caption */
}
.photo-author-gallery {
    font-size: 0.8em !important;
    font-style: italic;
    color: var(--color-piedra-media, #D2B48C) !important; /* Mapped */
    margin-top: 5px;
    /* text-align: center; */ /* Inherits from .photo-card-caption */
}


/* Modal para imágenes */
.modal {
  display: none;
  position: fixed;
  z-index: 2000;
  padding-top: 50px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.92); /* Mapped */
}
.modal-content {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 750px;
  max-height: 85vh;
  animation-name: zoomModal;
  animation-duration: 0.5s;
  border: 5px solid var(--color-piedra-clara, #EAE0C8); /* Mapped */
  border-radius: var(--border-radius-suave, 5px); /* Mapped */
}
@keyframes zoomModal {
  from {transform:scale(0.8)}
  to {transform:scale(1)}
}
#modalCaption {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
  text-align: center;
  color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
  padding: 15px 0;
  font-family: var(--font-titulos); /* Use theme font */
  font-size: 1.2em;
}
.modal-close-button {
  position: absolute;
  top: 15px;
  right: 35px;
  color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
  font-size: 40px;
  font-weight: bold;
  transition: color var(--global-transition-speed) ease; /* Standardized */
}
.modal-close-button:hover,
.modal-close-button:focus {
  color: var(--color-acento-amarillo, #FFD700); /* Mapped */
  text-decoration: none;
  cursor: pointer;
}

/* --- Styles for Content Subsections and Figures --- */
.content-subsection {
    margin-bottom: 3.5em;
    padding-bottom: 2em;
    border-bottom: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.3); /* Mapped */
}

.content-subsection:last-of-type {
    border-bottom: none;
    margin-bottom: 1em;
}

.content-subsection h3 {
    font-size: clamp(1.6em, 3.8vw, 2.2em);
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    margin-bottom: 1em;
    padding-bottom: 0.3em;
    border-bottom: 2px solid var(--color-secundario-dorado, #B8860B); /* Mapped */
    display: inline-block;
    text-align: left; /* Override global h3 centering if needed for this context */
}

.content-subsection h3 i {
    margin-right: 12px;
    color: var(--color-secundario-dorado, #B8860B); /* Mapped */
}

.content-subsection p {
    font-size: clamp(1em, 2.2vw, 1.15em);
    line-height: 1.75;
    margin-bottom: 1.5em;
    text-align: left; /* Override global p centering for these subsections */
}

.content-subsection .image-gallery-intro { /* Already defined */
    margin-top: 1.5em;
    margin-bottom: 2em;
}

.content-subsection figure {
    margin: 1em auto; /* Centered figure */
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.5); /* Mapped */
    padding: 10px;
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    box-shadow: var(--box-shadow-sutil, 0 4px 10px rgba(74, 13, 103, 0.07)); /* Mapped */
    border: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.4); /* Mapped */
    max-width: fit-content; /* Allow figure to shrink to image size if image is smaller */
}

.content-subsection figure img {
    border: none;
    margin-bottom: 0.5em;
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    display: block; /* Ensure img is block for centering within figure */
    margin-left: auto; /* Center image within figure */
    margin-right: auto; /* Center image within figure */
}

.content-subsection figcaption {
    font-size: clamp(0.85em, 1.8vw, 0.95em);
    text-align: center; /* Figcaptions are often centered */
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
    font-style: italic;
    padding: 0.5em 0;
}

.page-content-block .content-subsection .image-gallery-intro img {
    /* This rule ensures images within a gallery inside a content subsection don't get double borders */
    border: none;
}

/* --- Styles for Comments Section --- */
#comments-section {
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.7); /* Mapped */
    padding: 25px;
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    margin-top: 2em;
}

#comments-section h3 {
    border-bottom: none;
    text-align: center; /* Comment section title centered */
}

#comments-section .contact-form-container { /* Re-using for comment form styling */
    box-shadow: none;
    border: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.3); /* Mapped */
}

.comment-item {
    background-color: var(--color-fondo-pagina, #fdfaf6); /* Mapped */
    padding: 15px;
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    margin-bottom: 15px;
    border: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    box-shadow: var(--box-shadow-sutil, 0 4px 10px rgba(74, 13, 103, 0.07)); /* Mapped */
}

.comment-item p {
    margin-bottom: 0.5em;
    font-size: 1em;
    line-height: 1.6;
    text-align: left; /* Comments should be left-aligned */
}

.comment-item strong {
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    font-family: var(--font-titulos); /* Use theme font */
}

.comment-item small {
    font-size: 0.8em;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
    display: block;
    text-align: right;
    margin-top: 5px;
}

/* --- Styles for Participation Sections (Share Story, Quiz, Gallery Promo) --- */
#share-story-section, #quiz-section, #gallery-promo-section {
    margin-top: 2.5em;
    padding-top: 1.5em;
}

#share-story-section h3, #quiz-section h3, #gallery-promo-section h3 {
    text-align: center; /* These titles also centered */
    border-bottom: none;
    margin-bottom: 1.2em;
}

.quiz-container {
    background-color: rgba(var(--color-fondo-pagina-rgb, 253, 250, 246), 0.8); /* Mapped */
    padding: 20px;
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    border: 1px solid rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.4); /* Mapped */
}

.quiz-question {
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px dashed rgba(var(--color-piedra-media-rgb, 210, 180, 140), 0.3); /* Mapped */
}
.quiz-question:last-of-type {
    border-bottom: none;
    margin-bottom: 0;
}

.quiz-question p strong { /* Question text */
    font-family: var(--font-principal); /* Use theme font */
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
    text-align: left; /* Ensure question text is left aligned */
    display: block; /* Make it block for alignment */
}

.quiz-options {
    list-style: none;
    padding: 0;
    margin: 10px 0 0 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.quiz-options button {
    display: block;
    width: 100%;
    padding: 10px 15px;
    font-family: var(--font-principal); /* Use theme font */
    font-size: 0.95em;
    background-color: var(--color-piedra-clara, #EAE0C8); /* Mapped */
    color: var(--color-texto-principal, #2c1d12); /* Mapped */
    border: 1px solid var(--color-piedra-media, #D2B48C); /* Mapped */
    border-radius: var(--border-radius-suave, 5px); /* Mapped */
    cursor: pointer;
    transition: background-color var(--global-transition-speed), color var(--global-transition-speed); /* Standardized */
    text-align: left;
}

.quiz-options button:hover:not(:disabled) {
    background-color: var(--color-secundario-dorado, #B8860B); /* Mapped */
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
}

.quiz-options button:disabled {
    cursor: not-allowed;
    opacity: 0.7;
}

#quiz-feedback {
    min-height: 20px;
    font-size: 1.1em;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped */
    text-align: center;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}

#quiz-feedback.visible {
    opacity: 1;
    transform: translateY(0);
}

#gallery-promo-section .image-gallery-intro figure {
    border: 2px solid var(--color-piedra-clara, #EAE0C8); /* Mapped */
}
#gallery-promo-section .image-gallery-intro figcaption {
    font-size: 0.9em;
    color: var(--color-texto-secundario, #2c1d12); /* Mapped */
}

/* --- Scroll Animation Styling --- */
/* For optimal use, JavaScript is recommended to add the '.is-visible' class
   when the element actually enters the viewport.
   JS can also be used to create staggered delays for multiple items. */
.animate-on-scroll {
    opacity: 0;
    transform: translateY(25px); /* Subtler entry */
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
    transition-delay: 0.1s; /* Quicker start */
}

.animate-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
}

/* --- Subtle Hover Effects for Figures in Content Subsections --- */
.content-subsection figure img {
    transition: transform var(--global-transition-speed) ease-in-out,
                box-shadow var(--global-transition-speed) ease-in-out,
                filter var(--global-transition-speed) ease-in-out; /* Standardized */
}

.content-subsection figure:hover img {
    transform: scale(1.05);
    box-shadow: var(--box-shadow-medio, 0 6px 18px rgba(74, 13, 103, 0.1)); /* Mapped */
}


/* --- Sidebar Styles from estilos.css --- */
/* Sidebar styles from estilos.css were omitted as epic_theme.css provides comprehensive sidebar styling. */

/* --- Styles from historia/nuestra_historia_nuevo4.html <style> block (Embedded in page) --- */
/* These are highly specific to .article-content, so they should be fine. */
.article-content p {
    margin-bottom: 1em;
    line-height: 1.6;
    /* text-align: left; is default for p in epic_theme.css, so this is fine */
}
.article-content h3 {
    font-family: 'Cinzel', serif; /* Matches --font-headings */
    color: var(--color-secundario-dorado, #B8860B); /* Mapped to --epic-gold-secondary or similar */
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    text-align: left; /* Overrides global centering */
}
.article-content h4 {
    font-family: 'Lora', serif; /* Matches --font-primary */
    font-style: italic;
    color: var(--color-primario-purpura, #4A0D67); /* Mapped to --epic-purple-emperor */
    margin-top: 1em;
    margin-bottom: 0.3em;
    text-align: left; /* Overrides global centering */
}
.article-content a {
    color: var(--color-acento-rojo); /* This variable --color-acento-rojo is not in epic_theme. Needs to be added or mapped. Using epic-gold-main for now. */
    color: var(--epic-gold-main);
    text-decoration: underline;
}
.article-content a:hover {
    color: var(--color-secundario-dorado, #B8860B); /* Mapped to --epic-gold-secondary */
}
/* --- End of styles from historia/nuestra_historia_nuevo4.html <style> block --- */

/* --- Styles from inline attributes in historia/nuestra_historia_nuevo4.html --- */
/* This creates a specific hero style for one page. */
.page-header.hero.hero-nuestra-historia-specific {
    background-image: linear-gradient(rgba(var(--color-primario-purpura-rgb, 74, 13, 103), 0.7), rgba(var(--color-negro-contraste-rgb, 10, 10, 10), 0.85)), url('/assets/img/cerezo_vista_aerea.jpg');
    min-height: 50vh;
}
/* --- End of styles from inline attributes in historia/nuestra_historia_nuevo4.html --- */

/* The .section::before (dark overlay) is already defined.
   The spotlight will appear on top of the ::before overlay, but behind the .container-epic content.
   The ::before overlay opacity might need adjustment on sections with spotlight. */

.section.spotlight-active::after {
    content: '';
    position: absolute;
    inset: 0; /* Cover the entire section */
    background: radial-gradient(
        circle calc(var(--spotlight-size, 200px) * 1.5) at var(--spotlight-x, 50%) var(--spotlight-y, 50%),
        rgba(230, 240, 255, 0.35) 0%,       /* Light, slightly bluish-white center */
        rgba(200, 220, 255, 0.20) 30%, /* Light, slightly bluish-white haze */
        transparent 60%                                /* Fade out */
    );
    opacity: var(--spotlight-opacity, 0); /* Controlled by JS, default to 0 */
    pointer-events: none; /* Doesn't interfere with mouse events */
    transition: opacity var(--global-transition-speed) ease-out, background var(--global-transition-speed) ease-out;
    z-index: 1; /* Above ::before overlay, below .container-epic (which should have z-index:2 or higher) */
    border-radius: inherit;
}

/* Ensure content within section is above the spotlight */
.section > .container-epic {
    position: relative;
    z-index: 2; /* Content above spotlight and overlays */
}

/* Variables for JS to control the spotlight position and size */
:root {
    --spotlight-x: 50%;
    --spotlight-y: 50%;
    --spotlight-size: 200px; /* Default size, can be changed by JS */
    --spotlight-opacity: 0; /* Default opacity, JS will change to 1 to show */
}

/* --- Museo 3D Container Styles --- */
.museo-3d-section { /* The <section> wrapping the 3D container */
    /* Uses .section base styles. Can add specific background or padding if needed */
    /* For example, to ensure it has a darker background for the 3D scene to pop: */
    background-image: linear-gradient(rgba(var(--epic-purple-emperor-rgb), 0.85), rgba(var(--epic-text-color-rgb), 0.9)), url('/assets/img/hero_default_background.jpg');
    color: var(--epic-text-light); /* Light text for titles/paragraphs in this section */
}

.museo-3d-section .container-epic h2, /* If using .container-epic inside */
.museo-3d-section .page-content-block h2 { /* If using .page-content-block inside */
    color: var(--epic-gold-main); /* Gold title for this section */
}
.museo-3d-section .container-epic p,
.museo-3d-section .page-content-block p {
    color: var(--epic-alabaster-medium); /* Lighter paragraph text */
}

#museo-3d-container {
    width: 100%; /* Full width of its parent container */
    min-height: 300px; /* Minimum height for small screens */
    height: 60vh; /* Responsive height based on viewport height */
    max-height: 700px; /* Maximum height to prevent it from becoming too large on tall screens */
    margin: 20px auto; /* Center it if parent is wider */
    background-color: #1a1a1a; /* Dark background for the canvas itself, can be overridden by renderer */
    border-radius: var(--global-border-radius);
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.5); /* Optional inner shadow */
    position: relative; /* For potential overlays or UI elements on top */
    overflow: hidden; /* Ensures canvas doesn't spill out if sized differently */
}

#museo-3d-container canvas { /* Styling the canvas generated by Three.js */
    display: block; /* Remove extra space below canvas */
    width: 100% !important; /* Ensure canvas fills container */
    height: 100% !important; /* Ensure canvas fills container */
}

/* --- Timeline Styles (Adapted from estilos_condado.css) --- */
.timeline-section { /* This class is on the <section> element */
    /* .section styling from epic_theme.css already applies background, padding etc. */
    /* We might want a specific background or overlay for timeline sections if different from default */
}

.timeline-section .container-epic { /* Ensure container within timeline section has appropriate styling */
    background-color: transparent; /* Override default semi-transparent alabaster if section itself has full bg */
    box-shadow: none;
    border: none;
    padding-top: 1em; /* Adjust padding as needed */
    padding-bottom: 1em;
}

.timeline-intro {
    text-align: center; /* Timeline intro text often centered */
    max-width: 75ch;
    margin-left: auto;
    margin-right: auto;
    font-size: clamp(1.1em, 2.3vw, 1.25em);
    margin-bottom: 3em;
    color: var(--epic-text-color); /* Ensure it uses theme text color */
    opacity: 0.9;
}

.timeline {
    list-style: none;
    padding: 0;
    margin: 0 auto;
    max-width: 800px;
    position: relative;
}

.timeline::before { /* The central line */
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 38px;
    width: 4px;
    background-color: var(--epic-gold-secondary); /* Gold line */
    border-radius: 2px;
    box-shadow: 0 0 8px rgba(var(--epic-gold-secondary-rgb), 0.5);
}

.timeline-item {
    position: relative;
    margin-bottom: 40px; /* Space between items */
    padding-left: 95px; /* Space for the icon */
}
.timeline-item:last-child {
    margin-bottom: 0;
}

.timeline-icon {
    position: absolute;
    left: 0;
    top: 0;
    width: 76px;
    height: 76px;
    background-color: var(--epic-alabaster-bg); /* Alabaster background for icon holder */
    border: 3px solid var(--epic-gold-main); /* Gold border */
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1; /* Above the timeline's central line */
    box-shadow: 0 0 18px rgba(var(--epic-gold-main-rgb), 0.4);
}

.timeline-icon img { /* Assuming the star image is used */
    width: 45px; /* Adjust size of star image */
    height: 45px;
    object-fit: contain;
    border-radius: 0; /* No border for the image itself if it's an icon */
    border: none;
    box-shadow: none;
    filter: drop-shadow(0 0 4px rgba(var(--epic-gold-main-rgb), 0.6));
    margin: 0;
}

.timeline-content {
    background-color: var(--epic-transparent-overlay-light); /* Semi-transparent alabaster */
    backdrop-filter: blur(3px);
    padding: 20px 25px;
    border-radius: var(--global-border-radius);
    box-shadow: var(--global-box-shadow-medium);
    border: 1px solid var(--epic-gold-secondary);
    text-align: center; /* Timeline content block itself centered */
    /* text-align: center; */ /* Text within p will be left by default */
}

.timeline-content h3 {
    margin-top: 0;
    font-size: clamp(1.4em, 3vw, 1.9em); /* Slightly smaller than section titles */
    color: var(--epic-purple-emperor);
    margin-bottom: 0.6em;
}

.timeline-content p {
    font-size: clamp(0.95em, 1.8vw, 1.05em);
    color: var(--epic-text-color);
    opacity: 0.9;
    margin-bottom: 1em;
    /* text-align: center; is inherited */
}

.timeline-read-more { /* This is a link styled as a button */
    display: inline-block;
    font-size: 0.9em;
    font-weight: bold;
    font-family: var(--font-headings);
    color: var(--epic-gold-secondary);
    padding: 8px 15px;
    border: 1px solid var(--epic-gold-secondary);
    border-radius: 20px;
    transition: background-color var(--global-transition-speed) ease, color var(--global-transition-speed) ease;
    margin-top: 0.5em;
}

.timeline-read-more:hover, .timeline-read-more:focus-visible {
    background-color: var(--epic-gold-secondary);
    color: var(--epic-alabaster-bg);
    text-decoration: none;
    outline: none;
}
